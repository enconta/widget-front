{"ast":null,"code":"import _regeneratorRuntime from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/shared/credentials/components/FielCard.js\";\nimport React, { PureComponent } from 'react';\nimport SatCredentialsActions from 'actions/satCredentials';\nimport NotificationsActions from 'actions/notifications';\nimport validator from 'validator';\nimport { formatFile } from 'utils';\nimport Fiel, { FielWorking } from './Fiel';\nvar defaultState = {\n  requestInProgress: false,\n  status: 'pending',\n  fiel: {\n    fiel_key_file_password: '',\n    fiel_key_file: {\n      attached_file: '',\n      original_filename: '',\n      content_type: ''\n    },\n    fiel_cer_file: {\n      attached_file: '',\n      original_filename: '',\n      content_type: ''\n    }\n  },\n  isValid: {\n    fiel_key_file_password: true,\n    fiel_key_file: true,\n    fiel_cer_file: true\n  }\n};\nvar content = {\n  error: {\n    title: '¡Tenemos un problema! Actualiza tu FIEL',\n    description: \"Nuestro Robot ha encontrado un error con la credencial \\n    que has registrado y no ha podido enlazar tu informaci\\xF3n. \\n    Por favor actualiza tus datos, si el error persiste, verifica en el \\n    SAT la validez de la credencial.\",\n    imagen: '/img/fiel_error.svg'\n  },\n  pending: {\n    title: 'Ingresa tu Firma Electrónica Avanzada (FIEL)',\n    description: \"Te recomendamos ingresarla para para iniciar la sincronizaci\\xF3n de tus facturas con el SAT, y as\\xED conocer toda la experiencia de Enconta.\",\n    imagen: '/img/fiel_sign.svg'\n  }\n};\n\nvar FielCard =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(FielCard, _PureComponent);\n\n  function FielCard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, FielCard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FielCard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = _objectSpread({}, defaultState);\n\n    _this.onChangeFielPassword = function (e) {\n      _this.setState({\n        fiel: _objectSpread({}, _this.state.fiel, {\n          fiel_key_file_password: e.currentTarget.value\n        })\n      });\n    };\n\n    _this.isValidFielKey = function () {\n      var isValid = !validator.isEmpty(_this.state.fiel.fiel_key_file.attached_file);\n\n      _this.setState({\n        isValid: {\n          fiel_key_file: isValid\n        }\n      });\n\n      return isValid;\n    };\n\n    _this.isValidFielCer = function () {\n      var isValid = !validator.isEmpty(_this.state.fiel.fiel_cer_file.attached_file);\n\n      _this.setState({\n        isValid: {\n          fiel_cer_file: isValid\n        }\n      });\n\n      return isValid;\n    };\n\n    _this.isValidFielPassword = function () {\n      var isValid = !validator.isEmpty(_this.state.fiel.fiel_key_file_password);\n\n      _this.setState({\n        isValid: {\n          fiel_key_file_password: isValid\n        }\n      });\n\n      return isValid;\n    };\n\n    _this.setFielKey =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(fileUpload) {\n        var _ref2, file64, name, contentType;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return formatFile(fileUpload);\n\n              case 3:\n                _ref2 = _context.sent;\n                file64 = _ref2.file64;\n                name = _ref2.name;\n                contentType = _ref2.contentType;\n\n                _this.setState({\n                  fiel: _objectSpread({}, _this.state.fiel, {\n                    fiel_key_file: {\n                      attached_file: file64,\n                      original_filename: name,\n                      content_type: contentType\n                    }\n                  })\n                });\n\n                _this.isValidFielKey();\n\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n                NotificationsActions.error(_context.t0);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 11]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.setFielCer =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(fileUpload) {\n        var _ref4, file64, name, contentType;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return formatFile(fileUpload);\n\n              case 3:\n                _ref4 = _context2.sent;\n                file64 = _ref4.file64;\n                name = _ref4.name;\n                contentType = _ref4.contentType;\n\n                _this.setState({\n                  fiel: _objectSpread({}, _this.state.fiel, {\n                    fiel_cer_file: {\n                      attached_file: file64,\n                      original_filename: name,\n                      content_type: contentType\n                    }\n                  })\n                });\n\n                _this.isValidFielCer();\n\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                NotificationsActions.error(_context2.t0);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 11]]);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.uploadFiel =\n    /*#__PURE__*/\n    function () {\n      var _ref5 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(e) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!(_this.isValidFielKey() && _this.isValidFielCer() && _this.isValidFielPassword())) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                _this.setState({\n                  requestInProgress: true\n                });\n\n                _context3.prev = 3;\n                _context3.next = 6;\n                return SatCredentialsActions.updateSatCredentials({\n                  taxable_entity: _this.state.fiel\n                });\n\n              case 6:\n                NotificationsActions.success('FIEL guardada correctamente');\n\n                _this.setState({\n                  requestInProgress: false,\n                  status: 'working'\n                });\n\n                setTimeout(SatCredentialsActions.getSatCredentials, 20000);\n                _context3.next = 15;\n                break;\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](3);\n                NotificationsActions.error(_context3.t0);\n\n                _this.setState(_objectSpread({}, defaultState, {\n                  status: 'error'\n                }));\n\n              case 15:\n                _context3.next = 18;\n                break;\n\n              case 17:\n                NotificationsActions.error('Hay algunos datos invalidos en el FIEL');\n\n              case 18:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[3, 11]]);\n      }));\n\n      return function (_x3) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(FielCard, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          status = _this$state.status,\n          requestInProgress = _this$state.requestInProgress,\n          isValid = _this$state.isValid,\n          fiel = _this$state.fiel;\n      var isShowedCiec = this.props.isShowedCiec;\n\n      if (status === 'working') {\n        return React.createElement(FielWorking, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(Fiel, Object.assign({\n        setFielKey: this.setFielKey,\n        setFielCer: this.setFielCer,\n        onChangeFielPassword: this.onChangeFielPassword,\n        uploadFiel: this.uploadFiel,\n        fiel: fiel,\n        isValid: isValid,\n        requestInProgress: requestInProgress,\n        isShowedCiec: isShowedCiec\n      }, content[status], {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return FielCard;\n}(PureComponent);\n\nexport default FielCard;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/shared/credentials/components/FielCard.js"],"names":["React","PureComponent","SatCredentialsActions","NotificationsActions","validator","formatFile","Fiel","FielWorking","defaultState","requestInProgress","status","fiel","fiel_key_file_password","fiel_key_file","attached_file","original_filename","content_type","fiel_cer_file","isValid","content","error","title","description","imagen","pending","FielCard","state","onChangeFielPassword","e","setState","currentTarget","value","isValidFielKey","isEmpty","isValidFielCer","isValidFielPassword","setFielKey","fileUpload","file64","name","contentType","setFielCer","uploadFiel","preventDefault","updateSatCredentials","taxable_entity","success","setTimeout","getSatCredentials","isShowedCiec","props"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\n\nimport SatCredentialsActions from 'actions/satCredentials'\nimport NotificationsActions from 'actions/notifications'\n\nimport validator from 'validator'\nimport { formatFile } from 'utils'\n\nimport Fiel, { FielWorking } from './Fiel'\n\nconst defaultState = {\n  requestInProgress: false,\n  status: 'pending',\n  fiel: {\n    fiel_key_file_password: '',\n    fiel_key_file: {\n      attached_file: '',\n      original_filename: '',\n      content_type: ''\n    },\n    fiel_cer_file: {\n      attached_file: '',\n      original_filename: '',\n      content_type: ''\n    }\n  },\n  isValid: {\n    fiel_key_file_password: true,\n    fiel_key_file: true,\n    fiel_cer_file: true\n  }\n}\n\nconst content = {\n  error: {\n    title: '¡Tenemos un problema! Actualiza tu FIEL',\n    description: `Nuestro Robot ha encontrado un error con la credencial \n    que has registrado y no ha podido enlazar tu información. \n    Por favor actualiza tus datos, si el error persiste, verifica en el \n    SAT la validez de la credencial.`,\n    imagen: '/img/fiel_error.svg'\n  },\n  pending: {\n    title: 'Ingresa tu Firma Electrónica Avanzada (FIEL)',\n    description: `Te recomendamos ingresarla para para iniciar la sincronización de tus facturas con el SAT, y así conocer toda la experiencia de Enconta.`,\n    imagen: '/img/fiel_sign.svg'\n  }\n}\n\nclass FielCard extends PureComponent {\n  state = {\n    ...defaultState\n  }\n\n  onChangeFielPassword = e => {\n    this.setState({\n      fiel: {\n        ...this.state.fiel,\n        fiel_key_file_password: e.currentTarget.value\n      }\n    })\n  }\n\n  isValidFielKey = () => {\n    const isValid = !validator.isEmpty(\n      this.state.fiel.fiel_key_file.attached_file\n    )\n\n    this.setState({ isValid: { fiel_key_file: isValid } })\n    return isValid\n  }\n\n  // Validate non empty certificate\n  isValidFielCer = () => {\n    const isValid = !validator.isEmpty(\n      this.state.fiel.fiel_cer_file.attached_file\n    )\n    this.setState({\n      isValid: { fiel_cer_file: isValid }\n    })\n\n    return isValid\n  }\n\n  // Validate non empty password\n  isValidFielPassword = () => {\n    const isValid = !validator.isEmpty(this.state.fiel.fiel_key_file_password)\n\n    this.setState({\n      isValid: {\n        fiel_key_file_password: isValid\n      }\n    })\n\n    return isValid\n  }\n\n  // Persist key to state\n  setFielKey = async fileUpload => {\n    try {\n      const { file64, name, contentType } = await formatFile(fileUpload)\n      this.setState({\n        fiel: {\n          ...this.state.fiel,\n          fiel_key_file: {\n            attached_file: file64,\n            original_filename: name,\n            content_type: contentType\n          }\n        }\n      })\n\n      this.isValidFielKey()\n    } catch (error) {\n      NotificationsActions.error(error)\n    }\n  }\n\n  // Persist certificate to state\n  setFielCer = async fileUpload => {\n    try {\n      const { file64, name, contentType } = await formatFile(fileUpload)\n      this.setState({\n        fiel: {\n          ...this.state.fiel,\n          fiel_cer_file: {\n            attached_file: file64,\n            original_filename: name,\n            content_type: contentType\n          }\n        }\n      })\n\n      this.isValidFielCer()\n    } catch (error) {\n      NotificationsActions.error(error)\n    }\n  }\n\n  uploadFiel = async e => {\n    e.preventDefault()\n\n    if (\n      this.isValidFielKey() &&\n      this.isValidFielCer() &&\n      this.isValidFielPassword()\n    ) {\n      this.setState({ requestInProgress: true })\n\n      try {\n        await SatCredentialsActions.updateSatCredentials({\n          taxable_entity: this.state.fiel\n        })\n        NotificationsActions.success('FIEL guardada correctamente')\n        this.setState({ requestInProgress: false, status: 'working' })\n        setTimeout(SatCredentialsActions.getSatCredentials, 20000)\n      } catch (error) {\n        NotificationsActions.error(error)\n        this.setState({ ...defaultState, status: 'error' })\n      }\n    } else {\n      NotificationsActions.error('Hay algunos datos invalidos en el FIEL')\n    }\n  }\n\n  render () {\n    const { status, requestInProgress, isValid, fiel } = this.state\n    const { isShowedCiec } = this.props\n    if (status === 'working') {\n      return <FielWorking />\n    }\n\n    return (\n      <Fiel\n        setFielKey={this.setFielKey}\n        setFielCer={this.setFielCer}\n        onChangeFielPassword={this.onChangeFielPassword}\n        uploadFiel={this.uploadFiel}\n        fiel={fiel}\n        isValid={isValid}\n        requestInProgress={requestInProgress}\n        isShowedCiec={isShowedCiec}\n        {...content[status]}\n      />\n    )\n  }\n}\n\nexport default FielCard\n"]},"metadata":{},"sourceType":"module"}