{"ast":null,"code":"import _toConsumableArray from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/complementos/localTaxes/index.js\";\n// Libraries\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport uuid from 'uuid'; // Components\n\nimport Button from 'shared/button'; // Children\n\nimport Tax from './tax'; // Keys\n\nvar LOCAL_TAX_KEY = 'local_tax_mg';\nvar LOCAL_TAX_RETAINED_KEY = 'local_retained_tax_mgs';\nvar LOCAL_TAX_TRANSFERRED_KEY = 'local_transferred_tax_mgs';\nvar TOTAL_CENTS_KEY = 'total_cents';\nvar TAX_KINDS = [{\n  title: 'Impuestos Retenidos',\n  button: 'Agregar Impuesto Retenido',\n  kind: LOCAL_TAX_RETAINED_KEY\n}, {\n  title: 'Impuestos Transladados',\n  button: 'Agregar Impuesto Transladado',\n  kind: LOCAL_TAX_TRANSFERRED_KEY\n}];\n\nvar LocalTaxes =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LocalTaxes, _Component);\n\n  function LocalTaxes(props) {\n    var _LOCAL_TAX_KEY;\n\n    var _this;\n\n    _classCallCheck(this, LocalTaxes);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LocalTaxes).call(this, props));\n    _this.data = _defineProperty({}, LOCAL_TAX_KEY, (_LOCAL_TAX_KEY = {}, _defineProperty(_LOCAL_TAX_KEY, LOCAL_TAX_RETAINED_KEY, []), _defineProperty(_LOCAL_TAX_KEY, LOCAL_TAX_TRANSFERRED_KEY, []), _LOCAL_TAX_KEY));\n    _this.state = Object.assign({}, _this.data);\n    return _this;\n  } // Add tax to tax in kind\n\n\n  _createClass(LocalTaxes, [{\n    key: \"addTax\",\n    value: function addTax(kind) {\n      this.setState(_defineProperty({}, LOCAL_TAX_KEY, update(this.state[LOCAL_TAX_KEY], _defineProperty({}, kind, _defineProperty({}, this.state[LOCAL_TAX_KEY][kind].length, {\n        $set: uuid()\n      })))));\n    } // Handle changes to invoice totals\n\n  }, {\n    key: \"totalChanged\",\n    value: function totalChanged(totals) {\n      var _this2 = this;\n\n      TAX_KINDS.map(function (t) {\n        return t.kind;\n      }).map(function (kind) {\n        return _defineProperty({}, kind, _this2.state[LOCAL_TAX_KEY][kind].map(function (uuid) {\n          return _this2.refs[uuid].updateBase(totals[TOTAL_CENTS_KEY]);\n        }));\n      });\n    } // Remove tax from kind\n\n  }, {\n    key: \"deleteTax\",\n    value: function deleteTax(uuid) {\n      var _this3 = this;\n\n      this.setState(_defineProperty({}, LOCAL_TAX_KEY, update(this.state[LOCAL_TAX_KEY], {\n        $set: Object.assign.apply(Object, [{}].concat(_toConsumableArray(TAX_KINDS.map(function (t) {\n          return t.kind;\n        }).map(function (t) {\n          return _defineProperty({}, t, _this3.state[LOCAL_TAX_KEY][t].filter(function (id) {\n            return id !== uuid;\n          }));\n        }))))\n      })));\n    } // Export all taxes from state @ LOCAL_TAX_KEY\n\n  }, {\n    key: \"validateAndExport\",\n    value: function validateAndExport() {\n      var _this4 = this;\n\n      var taxes = Object.assign.apply(Object, [{}].concat(_toConsumableArray(TAX_KINDS.map(function (t) {\n        return t.kind;\n      }).map(function (kind) {\n        return _defineProperty({}, kind, _this4.state[LOCAL_TAX_KEY][kind].map(function (uuid) {\n          return _this4.refs[uuid].export();\n        }));\n      }))));\n      return _defineProperty({}, LOCAL_TAX_KEY, taxes);\n    } // Render taxes from TAX_KINDS\n\n  }, {\n    key: \"renderTaxes\",\n    value: function renderTaxes() {\n      var _this5 = this;\n\n      return TAX_KINDS.map(function (_ref5) {\n        var title = _ref5.title,\n            kind = _ref5.kind,\n            button = _ref5.button;\n        return React.createElement(\"div\", {\n          key: kind,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, React.createElement(\"hr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"columns\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"column is-2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"deleteIconButton\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, title))), React.createElement(\"div\", {\n          className: \"column\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, _this5.state[LOCAL_TAX_KEY][kind].map(function (uuid) {\n          return React.createElement(Tax, {\n            key: uuid,\n            ref: uuid,\n            uuid: uuid,\n            totals: _this5.props.totals,\n            delete: _this5.deleteTax.bind(_this5, uuid),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 105\n            },\n            __self: this\n          });\n        }), React.createElement(\"div\", {\n          className: \"column\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(Button, {\n          buttonStyle: \"primaryLink\",\n          icon: \"plus\",\n          onClick: _this5.addTax.bind(_this5, kind),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, button))))));\n      });\n    } // Main render\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return React.createElement(\"div\", {\n        className: \"espacio-large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, this.props.title)), this.renderTaxes(), React.createElement(Button, {\n        buttonStyle: \"dangerLink\",\n        onClick: function onClick() {\n          _this6.props.deleteAddOn(_this6.props.uuid);\n        },\n        icon: \"delete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Eliminar Complemento\"));\n    }\n  }]);\n\n  return LocalTaxes;\n}(Component);\n\nLocalTaxes.propTypes = {\n  totals: PropTypes.array,\n  uuid: PropTypes.string,\n  title: PropTypes.string,\n  deleteAddOn: PropTypes.func\n};\nexport default LocalTaxes;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/complementos/localTaxes/index.js"],"names":["React","Component","PropTypes","update","uuid","Button","Tax","LOCAL_TAX_KEY","LOCAL_TAX_RETAINED_KEY","LOCAL_TAX_TRANSFERRED_KEY","TOTAL_CENTS_KEY","TAX_KINDS","title","button","kind","LocalTaxes","props","data","state","Object","assign","setState","length","$set","totals","map","t","refs","updateBase","filter","id","taxes","export","deleteTax","bind","addTax","renderTaxes","deleteAddOn","propTypes","array","string","func"],"mappings":"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","sourcesContent":["// Libraries\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport update from 'immutability-helper'\nimport uuid from 'uuid'\n\n// Components\nimport Button from 'shared/button'\n\n// Children\nimport Tax from './tax'\n\n// Keys\nconst LOCAL_TAX_KEY = 'local_tax_mg'\nconst LOCAL_TAX_RETAINED_KEY = 'local_retained_tax_mgs'\nconst LOCAL_TAX_TRANSFERRED_KEY = 'local_transferred_tax_mgs'\nconst TOTAL_CENTS_KEY = 'total_cents'\n\nconst TAX_KINDS = [\n  {\n    title: 'Impuestos Retenidos',\n    button: 'Agregar Impuesto Retenido',\n    kind: LOCAL_TAX_RETAINED_KEY\n  },\n  {\n    title: 'Impuestos Transladados',\n    button: 'Agregar Impuesto Transladado',\n    kind: LOCAL_TAX_TRANSFERRED_KEY\n  }\n]\n\nclass LocalTaxes extends Component {\n  constructor (props) {\n    super(props)\n    this.data = {\n      [LOCAL_TAX_KEY]: {\n        [LOCAL_TAX_RETAINED_KEY]: [],\n        [LOCAL_TAX_TRANSFERRED_KEY]: []\n      }\n    }\n    this.state = Object.assign({}, this.data)\n  }\n\n  // Add tax to tax in kind\n  addTax (kind) {\n    this.setState({\n      [LOCAL_TAX_KEY]: update(this.state[LOCAL_TAX_KEY], {\n        [kind]: {\n          [this.state[LOCAL_TAX_KEY][kind].length]: { $set: uuid() }\n        }\n      })\n    })\n  }\n\n  // Handle changes to invoice totals\n  totalChanged (totals) {\n    TAX_KINDS.map(t => t.kind).map(kind => ({\n      [kind]: this.state[LOCAL_TAX_KEY][kind].map(uuid =>\n        this.refs[uuid].updateBase(totals[TOTAL_CENTS_KEY])\n      )\n    }))\n  }\n\n  // Remove tax from kind\n  deleteTax (uuid) {\n    this.setState({\n      [LOCAL_TAX_KEY]: update(this.state[LOCAL_TAX_KEY], {\n        $set: Object.assign(\n          {},\n          ...TAX_KINDS.map(t => t.kind).map(t => ({\n            [t]: this.state[LOCAL_TAX_KEY][t].filter(id => id !== uuid)\n          }))\n        )\n      })\n    })\n  }\n\n  // Export all taxes from state @ LOCAL_TAX_KEY\n  validateAndExport () {\n    const taxes = Object.assign(\n      {},\n      ...TAX_KINDS.map(t => t.kind).map(kind => ({\n        [kind]: this.state[LOCAL_TAX_KEY][kind].map(uuid =>\n          this.refs[uuid].export()\n        )\n      }))\n    )\n\n    return { [LOCAL_TAX_KEY]: taxes }\n  }\n\n  // Render taxes from TAX_KINDS\n  renderTaxes () {\n    return TAX_KINDS.map(({ title, kind, button }) => (\n      <div key={kind}>\n        <hr />\n        <div className='columns'>\n          <div className='column is-2'>\n            <div className='deleteIconButton'>\n              <span className='title'>{title}</span>\n            </div>\n          </div>\n          <div className='column'>\n            {this.state[LOCAL_TAX_KEY][kind].map(uuid => (\n              <Tax\n                key={uuid}\n                ref={uuid}\n                uuid={uuid}\n                totals={this.props.totals}\n                delete={this.deleteTax.bind(this, uuid)}\n              />\n            ))}\n            <div className='column'>\n              <div>\n                <Button\n                  buttonStyle='primaryLink'\n                  icon='plus'\n                  onClick={this.addTax.bind(this, kind)}\n                >\n                  {button}\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ))\n  }\n\n  // Main render\n  render () {\n    return (\n      <div className='espacio-large'>\n        <p className='content'>\n          <span className='title'>{this.props.title}</span>\n        </p>\n        {this.renderTaxes()}\n        <Button\n          buttonStyle='dangerLink'\n          onClick={() => {\n            this.props.deleteAddOn(this.props.uuid)\n          }}\n          icon='delete'\n        >\n          Eliminar Complemento\n        </Button>\n      </div>\n    )\n  }\n}\n\nLocalTaxes.propTypes = {\n  totals: PropTypes.array,\n  uuid: PropTypes.string,\n  title: PropTypes.string,\n  deleteAddOn: PropTypes.func\n}\n\nexport default LocalTaxes\n"]},"metadata":{},"sourceType":"module"}