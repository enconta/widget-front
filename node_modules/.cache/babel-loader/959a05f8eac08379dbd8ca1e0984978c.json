{"ast":null,"code":"var _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/shared/plans/index.js\";\nimport React, { Fragment } from 'react';\nimport Button from 'shared/button';\nimport { PLANS_SPECIFICATIONS } from './catalogsPlan';\nimport { handleURL, getClientsPlan, getPlanName } from 'utils';\nimport Tooltip from 'shared/tooltip';\nimport classNames from 'classnames';\nimport IconButton from 'shared/iconButton';\nimport { browserHistory } from 'react-router';\nimport RegisterActions from 'actions/register';\nimport NotificationsActions from 'actions/notifications';\nimport SatCredentialsStore from 'stores/satCredentials';\nimport SessionStore from 'stores/session';\n\nvar premiumPlan = function premiumPlan(route, controlPlansModal) {\n  handleURL(route);\n  controlPlansModal();\n};\n\nvar buttonAction = function buttonAction(route, planName, controlPlansModal) {\n  var action = planName === 'Premium' ? premiumPlan(route, controlPlansModal) : handleDiagnosis();\n  return action;\n};\n\nvar moveStep = function moveStep() {\n  var currentEntity = SessionStore.getCurrentEntity();\n  var id = currentEntity.id;\n  var step = {\n    diagnosis: {\n      step: 'in_progress'\n    }\n  };\n  RegisterActions.setCurrentStep(id, step).then(function () {\n    browserHistory.push('/diagnostico/en-proceso');\n  }).catch(function (error) {\n    NotificationsActions.error(error);\n  });\n};\n\nvar handleDiagnosis = function handleDiagnosis() {\n  var currentEntity = SessionStore.getCurrentEntity();\n  var rfc = currentEntity.rfc,\n      id = currentEntity.id;\n  var credentials = SatCredentialsStore.getCredentialStatus();\n  var hasCiec = credentials.has_ciec,\n      hasFiel = credentials.has_fiel;\n  RegisterActions.createDiagnosis(id).then(function () {\n    if (hasCiec || hasFiel) {\n      moveStep();\n    } else {\n      browserHistory.push(\"/diagnostico/credenciales/\".concat(rfc));\n    }\n  }).catch(function () {\n    if (hasCiec || hasFiel) {\n      browserHistory.push('/diagnostico/en-proceso');\n    } else {\n      browserHistory.push(\"/diagnostico/credenciales/\".concat(rfc));\n    }\n  });\n};\n\nvar Plans = function Plans(props) {\n  var controlPlansModal = props.controlPlansModal;\n  var plan = getClientsPlan();\n  var planName = getPlanName();\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"plans__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Elige el plan m\\xE1s conveniente para ti\"), React.createElement(\"p\", {\n    className: \"plans__subtitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Tu plan actual es \", planName), React.createElement(\"div\", {\n    className: \"plans\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, PLANS_SPECIFICATIONS.map(function (_ref, index) {\n    var title = _ref.title,\n        buttonText = _ref.buttonText,\n        specifications = _ref.specifications,\n        price = _ref.price,\n        route = _ref.route,\n        periodicity = _ref.periodicity;\n    var disabledButton = title === 'Freemium' || title === 'Premium' && plan === 'premium';\n    var style = disabledButton ? 'none' : 'primary';\n    return React.createElement(\"div\", {\n      key: index,\n      className: 'plans__card--highlight',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"plans__card card-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"plans__card-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, title), React.createElement(\"p\", {\n      className: \"plans__price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, price), React.createElement(\"p\", {\n      className: \"plans__periodicity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, periodicity), React.createElement(\"div\", {\n      className: \"plans__button-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(Button, {\n      disabled: disabledButton,\n      buttonStyle: style,\n      className: \"plans__button\",\n      onClick: function onClick() {\n        return buttonAction(route, title, controlPlansModal);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, buttonText)), specifications.map(function (_ref2, index) {\n      var specification = _ref2.specification,\n          tooltip = _ref2.tooltip;\n      return React.createElement(\"div\", {\n        key: index,\n        className: \"plans__container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-check plans__icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(Tooltip, {\n        tooltip: tooltip,\n        className: \"plans__tooltip\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: classNames({\n          plans__specification: tooltip\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, specification, tooltip && React.createElement(IconButton, {\n        icon: \"comment-question\",\n        className: \"plans__tooltip-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }))));\n    })));\n  })));\n};\n\nexport default Plans;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/shared/plans/index.js"],"names":["React","Fragment","Button","PLANS_SPECIFICATIONS","handleURL","getClientsPlan","getPlanName","Tooltip","classNames","IconButton","browserHistory","RegisterActions","NotificationsActions","SatCredentialsStore","SessionStore","premiumPlan","route","controlPlansModal","buttonAction","planName","action","handleDiagnosis","moveStep","currentEntity","getCurrentEntity","id","step","diagnosis","setCurrentStep","then","push","catch","error","rfc","credentials","getCredentialStatus","hasCiec","has_ciec","hasFiel","has_fiel","createDiagnosis","Plans","props","plan","map","index","title","buttonText","specifications","price","periodicity","disabledButton","style","specification","tooltip","plans__specification"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react'\nimport Button from 'shared/button'\nimport { PLANS_SPECIFICATIONS } from './catalogsPlan'\nimport { handleURL, getClientsPlan, getPlanName } from 'utils'\nimport Tooltip from 'shared/tooltip'\nimport classNames from 'classnames'\nimport IconButton from 'shared/iconButton'\nimport { browserHistory } from 'react-router'\n\nimport RegisterActions from 'actions/register'\nimport NotificationsActions from 'actions/notifications'\n\nimport SatCredentialsStore from 'stores/satCredentials'\nimport SessionStore from 'stores/session'\n\nconst premiumPlan = (route, controlPlansModal) => {\n  handleURL(route)\n  controlPlansModal()\n}\n\nconst buttonAction = (route, planName, controlPlansModal) => {\n  const action =\n    planName === 'Premium'\n      ? premiumPlan(route, controlPlansModal)\n      : handleDiagnosis()\n  return action\n}\n\nconst moveStep = () => {\n  const currentEntity = SessionStore.getCurrentEntity()\n  const { id } = currentEntity\n  const step = {\n    diagnosis: { step: 'in_progress' }\n  }\n  RegisterActions.setCurrentStep(id, step)\n    .then(() => {\n      browserHistory.push('/diagnostico/en-proceso')\n    })\n    .catch(error => {\n      NotificationsActions.error(error)\n    })\n}\n\nconst handleDiagnosis = () => {\n  const currentEntity = SessionStore.getCurrentEntity()\n  const { rfc, id } = currentEntity\n  const credentials = SatCredentialsStore.getCredentialStatus()\n  const { has_ciec: hasCiec, has_fiel: hasFiel } = credentials\n  RegisterActions.createDiagnosis(id)\n    .then(() => {\n      if (hasCiec || hasFiel) {\n        moveStep()\n      } else {\n        browserHistory.push(`/diagnostico/credenciales/${rfc}`)\n      }\n    })\n    .catch(() => {\n      if (hasCiec || hasFiel) {\n        browserHistory.push('/diagnostico/en-proceso')\n      } else {\n        browserHistory.push(`/diagnostico/credenciales/${rfc}`)\n      }\n    })\n}\n\nconst Plans = props => {\n  const { controlPlansModal } = props\n  const plan = getClientsPlan()\n  const planName = getPlanName()\n  return (\n    <Fragment>\n      <p className='plans__title'>Elige el plan más conveniente para ti</p>\n      <p className='plans__subtitle'>Tu plan actual es {planName}</p>\n      <div className='plans'>\n        {PLANS_SPECIFICATIONS.map(\n          (\n            { title, buttonText, specifications, price, route, periodicity },\n            index\n          ) => {\n            const disabledButton =\n              title === 'Freemium' ||\n              (title === 'Premium' && plan === 'premium')\n            const style = disabledButton ? 'none' : 'primary'\n            return (\n              <div key={index} className={'plans__card--highlight'}>\n                <div className='plans__card card-container'>\n                  <p className='plans__card-title'>{title}</p>\n                  <p className='plans__price'>{price}</p>\n                  <p className='plans__periodicity'>{periodicity}</p>\n                  <div className='plans__button-container'>\n                    <Button\n                      disabled={disabledButton}\n                      buttonStyle={style}\n                      className='plans__button'\n                      onClick={() =>\n                        buttonAction(route, title, controlPlansModal)\n                      }\n                    >\n                      {buttonText}\n                    </Button>\n                  </div>\n                  {specifications.map(({ specification, tooltip }, index) => {\n                    return (\n                      <div key={index} className='plans__container'>\n                        <i className='mdi mdi-check plans__icon' />\n                        <Tooltip tooltip={tooltip} className='plans__tooltip'>\n                          <p\n                            className={classNames({\n                              plans__specification: tooltip\n                            })}\n                          >\n                            {specification}\n                            {tooltip && (\n                              <IconButton\n                                icon='comment-question'\n                                className='plans__tooltip-icon'\n                              />\n                            )}\n                          </p>\n                        </Tooltip>\n                      </div>\n                    )\n                  })}\n                </div>\n              </div>\n            )\n          }\n        )}\n      </div>\n    </Fragment>\n  )\n}\n\nexport default Plans\n"]},"metadata":{},"sourceType":"module"}