{"ast":null,"code":"import _defineProperty from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/register/index.js\";\nimport React, { Component, Fragment } from 'react';\nimport DocumentTitle from 'react-document-title';\nimport AppSignal from 'appsignal';\nimport API from 'api';\nimport NotificationsContainer from 'shared/notifications';\nimport Button from 'shared/button';\nimport TextField from 'shared/textField';\nimport NotificationsActions from 'actions/notifications';\nimport { validateAll } from 'utils';\nimport Terms from 'shared/terms';\nimport { REGISTER_TAX_CLASSIFICATIONS } from 'shared/catalogs';\nimport SelectField from 'shared/selectField';\nvar labelName = 'Nombre';\nvar labelLastName = 'Apellido';\nvar labelEmail = 'Correo';\nvar labelPhone = 'Número de teléfono';\nvar labelLegalName = 'Razón social';\nvar labelRFC = 'RFC'; // Utms keys\n\nvar UTMS_KEY = 'utms';\nvar requiredFields = new Set();\n\nvar loadDynamicConektaScript = function loadDynamicConektaScript(callback) {\n  var script = document.createElement('script');\n  var tagManager = document.createTextNode(\"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new\\n  Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\\n  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\\n  ' https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\\n  } )(window,document,'script','dataLayer','GTM-N3RDW5');\");\n  var facebookPixel = document.createTextNode(\"!function(f,b,e,v,n,t,s)\\n  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\\n  n.callMethod.apply(n,arguments):n.queue.push(arguments)};\\n  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\\n  n.queue=[];t=b.createElement(e);t.async=!0;\\n  t.src=v;s=b.getElementsByTagName(e)[0];\\n  s.parentNode.insertBefore(t,s)}(window, document,'script',\\n  'https://connect.facebook.net/en_US/fbevents.js');\\n  fbq('init', '572218182922351');\\n  fbq('track', 'PageView');\");\n  script.appendChild(tagManager);\n  script.appendChild(facebookPixel);\n  document.head.appendChild(script);\n\n  script.onload = function () {\n    if (callback) callback();\n  };\n};\n\nvar Register =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Register, _Component);\n\n  function Register() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Register)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      requestInProgress: false,\n      terms: true,\n      user: {\n        first_name: _this.props.location.query.name,\n        last_name: '',\n        email: _this.props.location.query.email,\n        phone: ''\n      },\n      taxable_entity: {\n        legal_name: '',\n        rfc: _this.props.location.query.rfc,\n        tax_classification: _this.props.location.query.reg\n      },\n      signUpCompleted: false\n    };\n\n    _this.onChange = function (form, field) {\n      return function (event) {\n        var value = event.target.value;\n\n        _this.setState(function (prevState) {\n          return _defineProperty({}, form, Object.assign(prevState[form], _defineProperty({}, field, value)));\n        });\n      };\n    };\n\n    _this.toggleCheckTerms = function () {\n      _this.setState(function (state) {\n        return {\n          terms: !state.terms\n        };\n      });\n    };\n\n    _this.saveData = function (event) {\n      event.preventDefault();\n\n      if (validateAll(requiredFields, _assertThisInitialized(_assertThisInitialized(_this)))) {\n        var newTaxableEntity = _this.createTaxableEntity();\n\n        _this.setState({\n          requestInProgress: true\n        }, function () {\n          API.User.New(newTaxableEntity).then(function (r) {\n            _this.setState({\n              requestInProgress: false,\n              signUpCompleted: true\n            });\n          }).catch(function (error) {\n            AppSignal.sendError(error);\n\n            _this.setState({\n              requestInProgress: false\n            }, function () {\n              NotificationsActions.error(error);\n            });\n          });\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      loadDynamicConektaScript();\n    }\n  }, {\n    key: \"createTaxableEntity\",\n    value: function createTaxableEntity() {\n      var params = this.props.location.query;\n      params.utm_source = params.utm_source || 'Directo';\n      params.utm_campaign = params.utm_campaign || 'Organico';\n      params.come_from = params.come_from || 'Directo';\n      params.landing = params.landing || window.location.href;\n      return _defineProperty({\n        user: Object.assign({}, this.state.user),\n        taxable_entity: this.state.taxable_entity\n      }, UTMS_KEY, params);\n    }\n  }, {\n    key: \"sendToEnconta\",\n    value: function sendToEnconta() {\n      window.location.href = 'https://enconta.com/';\n    }\n  }, {\n    key: \"renderSignUpCompleted\",\n    value: function renderSignUpCompleted() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"register register__form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"register__form-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Registro Solicitado\"), React.createElement(\"p\", {\n        className: \"register__form-title--highlight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Recibir\\xE1s un correo electr\\xF3nico con instrucciones para completar tu registro\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Button, {\n        buttonStyle: \"primary\",\n        onClick: function onClick() {\n          return _this2.sendToEnconta();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Ir al inicio\")));\n    }\n  }, {\n    key: \"renderForm\",\n    value: function renderForm() {\n      var _this$state = this.state,\n          terms = _this$state.terms,\n          user = _this$state.user,\n          taxableEntity = _this$state.taxable_entity;\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"register--left-side register--left-side-centered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"Ingresa tu fiel\",\n        src: '/img/register.png',\n        className: \"register__image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      })), React.createElement(\"form\", {\n        className: \"register__form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"register__form-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Comencemos creando tu\", ' ', React.createElement(\"span\", {\n        className: \"register__form-title--highlight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"cuenta\")), React.createElement(\"div\", {\n        className: \"register__form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        value: user.first_name,\n        onChange: this.onChange('user', 'first_name'),\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        required: true,\n        floatLabel: labelName,\n        placeholder: labelName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        floatLabel: labelLastName,\n        placeholder: labelLastName,\n        value: user.last_name,\n        onChange: this.onChange('user', 'last_name'),\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        floatLabel: labelEmail,\n        placeholder: labelEmail,\n        type: \"email-no-icon\",\n        value: user.email,\n        onChange: this.onChange('user', 'email'),\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        floatLabel: labelPhone,\n        placeholder: labelPhone,\n        value: user.phone,\n        onChange: this.onChange('user', 'phone'),\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        floatLabel: labelLegalName,\n        placeholder: labelLegalName,\n        value: taxableEntity.legal_name,\n        onChange: this.onChange('taxable_entity', 'legal_name'),\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        floatLabel: labelRFC,\n        placeholder: labelRFC,\n        value: taxableEntity.rfc,\n        onChange: this.onChange('taxable_entity', 'rfc'),\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"register__form-fiscal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(SelectField, {\n        placeholder: \"R\\xE9gimen Fiscal\",\n        floatLabel: true,\n        options: REGISTER_TAX_CLASSIFICATIONS,\n        value: taxableEntity.tax_classification,\n        onChange: this.onChange('taxable_entity', 'tax_classification'),\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        optionsConfig: {\n          id: 'encontaId',\n          label: 'label'\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }))), React.createElement(Button, {\n        buttonStyle: \"round\",\n        type: \"submit\",\n        loading: this.state.requestInProgress,\n        onClick: this.saveData,\n        disabled: !terms,\n        className: \"register__form-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Crear mi cuenta\"), React.createElement(\"div\", {\n        className: \"register__form-terms\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(Terms, {\n        terms: terms,\n        toggleCheckTerms: this.toggleCheckTerms,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }))));\n    }\n  }, {\n    key: \"renderSignUpForm\",\n    value: function renderSignUpForm() {\n      var signUpCompleted = this.state.signUpCompleted;\n      return signUpCompleted ? this.renderSignUpCompleted() : this.renderForm();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(DocumentTitle, {\n        title: 'Registrarme - Enconta',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, this.renderSignUpForm(), React.createElement(\"div\", {\n        className: \"notification-container notification-centered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(NotificationsContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Register;\n}(Component);\n\nexport default Register;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/register/index.js"],"names":["React","Component","Fragment","DocumentTitle","AppSignal","API","NotificationsContainer","Button","TextField","NotificationsActions","validateAll","Terms","REGISTER_TAX_CLASSIFICATIONS","SelectField","labelName","labelLastName","labelEmail","labelPhone","labelLegalName","labelRFC","UTMS_KEY","requiredFields","Set","loadDynamicConektaScript","callback","script","document","createElement","tagManager","createTextNode","facebookPixel","appendChild","head","onload","Register","state","requestInProgress","terms","user","first_name","props","location","query","name","last_name","email","phone","taxable_entity","legal_name","rfc","tax_classification","reg","signUpCompleted","onChange","form","field","event","value","target","setState","prevState","Object","assign","toggleCheckTerms","saveData","preventDefault","newTaxableEntity","createTaxableEntity","User","New","then","r","catch","error","sendError","params","utm_source","utm_campaign","come_from","landing","window","href","sendToEnconta","taxableEntity","add","id","label","renderSignUpCompleted","renderForm","renderSignUpForm"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\nimport DocumentTitle from 'react-document-title'\nimport AppSignal from 'appsignal'\n\nimport API from 'api'\nimport NotificationsContainer from 'shared/notifications'\nimport Button from 'shared/button'\nimport TextField from 'shared/textField'\n\nimport NotificationsActions from 'actions/notifications'\nimport { validateAll } from 'utils'\nimport Terms from 'shared/terms'\nimport { REGISTER_TAX_CLASSIFICATIONS } from 'shared/catalogs'\nimport SelectField from 'shared/selectField'\n\nconst labelName = 'Nombre'\nconst labelLastName = 'Apellido'\nconst labelEmail = 'Correo'\nconst labelPhone = 'Número de teléfono'\nconst labelLegalName = 'Razón social'\nconst labelRFC = 'RFC'\n\n// Utms keys\nconst UTMS_KEY = 'utms'\n\nconst requiredFields = new Set()\n\nconst loadDynamicConektaScript = callback => {\n  const script = document.createElement('script')\n  const tagManager = document.createTextNode(`(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new\n  Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n  ' https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n  } )(window,document,'script','dataLayer','GTM-N3RDW5');`)\n\n  const facebookPixel = document.createTextNode(`!function(f,b,e,v,n,t,s)\n  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n  n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n  n.queue=[];t=b.createElement(e);t.async=!0;\n  t.src=v;s=b.getElementsByTagName(e)[0];\n  s.parentNode.insertBefore(t,s)}(window, document,'script',\n  'https://connect.facebook.net/en_US/fbevents.js');\n  fbq('init', '572218182922351');\n  fbq('track', 'PageView');`)\n\n  script.appendChild(tagManager)\n  script.appendChild(facebookPixel)\n  document.head.appendChild(script)\n  script.onload = () => {\n    if (callback) callback()\n  }\n}\n\nclass Register extends Component {\n  state = {\n    requestInProgress: false,\n    terms: true,\n    user: {\n      first_name: this.props.location.query.name,\n      last_name: '',\n      email: this.props.location.query.email,\n      phone: ''\n    },\n    taxable_entity: {\n      legal_name: '',\n      rfc: this.props.location.query.rfc,\n      tax_classification: this.props.location.query.reg\n    },\n    signUpCompleted: false\n  }\n\n  componentDidMount () {\n    loadDynamicConektaScript()\n  }\n\n  onChange = (form, field) => event => {\n    const value = event.target.value\n    this.setState(prevState => ({\n      [form]: Object.assign(prevState[form], { [field]: value })\n    }))\n  }\n\n  createTaxableEntity () {\n    const params = this.props.location.query\n    params.utm_source = params.utm_source || 'Directo'\n    params.utm_campaign = params.utm_campaign || 'Organico'\n    params.come_from = params.come_from || 'Directo'\n    params.landing = params.landing || window.location.href\n\n    return {\n      user: Object.assign({}, this.state.user),\n      taxable_entity: this.state.taxable_entity,\n      [UTMS_KEY]: params\n    }\n  }\n\n  toggleCheckTerms = () => {\n    this.setState(state => ({ terms: !state.terms }))\n  }\n\n  saveData = event => {\n    event.preventDefault()\n    if (validateAll(requiredFields, this)) {\n      let newTaxableEntity = this.createTaxableEntity()\n      this.setState({ requestInProgress: true }, () => {\n        API.User.New(newTaxableEntity)\n          .then(r => {\n            this.setState({ requestInProgress: false, signUpCompleted: true })\n          })\n          .catch(error => {\n            AppSignal.sendError(error)\n            this.setState({ requestInProgress: false }, () => {\n              NotificationsActions.error(error)\n            })\n          })\n      })\n    }\n  }\n\n  sendToEnconta () {\n    window.location.href = 'https://enconta.com/'\n  }\n\n  renderSignUpCompleted () {\n    return (\n      <div className='register register__form'>\n        <p className='register__form-title'>Registro Solicitado</p>\n        <p className='register__form-title--highlight'>\n          Recibirás un correo electrónico con instrucciones para completar tu\n          registro\n        </p>\n        <br />\n        <div className='block'>\n          <Button buttonStyle='primary' onClick={() => this.sendToEnconta()}>\n            Ir al inicio\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  renderForm () {\n    const { terms, user, taxable_entity: taxableEntity } = this.state\n\n    return (\n      <Fragment>\n        <div className='register--left-side register--left-side-centered'>\n          <img\n            alt='Ingresa tu fiel'\n            src={'/img/register.png'}\n            className='register__image'\n          />\n        </div>\n\n        <form className='register__form'>\n          <p className='register__form-title'>\n            Comencemos creando tu{' '}\n            <span className='register__form-title--highlight'>cuenta</span>\n          </p>\n\n          <div className='register__form-container'>\n            <TextField\n              value={user.first_name}\n              onChange={this.onChange('user', 'first_name')}\n              ref={r => requiredFields.add(r)}\n              required\n              floatLabel={labelName}\n              placeholder={labelName}\n            />\n            <TextField\n              floatLabel={labelLastName}\n              placeholder={labelLastName}\n              value={user.last_name}\n              onChange={this.onChange('user', 'last_name')}\n              ref={r => requiredFields.add(r)}\n              required\n            />\n\n            <TextField\n              floatLabel={labelEmail}\n              placeholder={labelEmail}\n              type='email-no-icon'\n              value={user.email}\n              onChange={this.onChange('user', 'email')}\n              ref={r => requiredFields.add(r)}\n              required\n            />\n            <TextField\n              floatLabel={labelPhone}\n              placeholder={labelPhone}\n              value={user.phone}\n              onChange={this.onChange('user', 'phone')}\n              ref={r => requiredFields.add(r)}\n              required\n            />\n\n            <TextField\n              floatLabel={labelLegalName}\n              placeholder={labelLegalName}\n              value={taxableEntity.legal_name}\n              onChange={this.onChange('taxable_entity', 'legal_name')}\n              ref={r => requiredFields.add(r)}\n              required\n            />\n\n            <TextField\n              floatLabel={labelRFC}\n              placeholder={labelRFC}\n              value={taxableEntity.rfc}\n              onChange={this.onChange('taxable_entity', 'rfc')}\n              ref={r => requiredFields.add(r)}\n              required\n            />\n\n            <div className='register__form-fiscal'>\n              <SelectField\n                placeholder='Régimen Fiscal'\n                floatLabel\n                options={REGISTER_TAX_CLASSIFICATIONS}\n                value={taxableEntity.tax_classification}\n                onChange={this.onChange('taxable_entity', 'tax_classification')}\n                ref={r => requiredFields.add(r)}\n                optionsConfig={{ id: 'encontaId', label: 'label' }}\n                required\n              />\n            </div>\n          </div>\n\n          <Button\n            buttonStyle='round'\n            type='submit'\n            loading={this.state.requestInProgress}\n            onClick={this.saveData}\n            disabled={!terms}\n            className='register__form-button'\n          >\n            Crear mi cuenta\n          </Button>\n\n          <div className='register__form-terms'>\n            <Terms terms={terms} toggleCheckTerms={this.toggleCheckTerms} />\n          </div>\n        </form>\n      </Fragment>\n    )\n  }\n\n  renderSignUpForm () {\n    const { signUpCompleted } = this.state\n    return signUpCompleted ? this.renderSignUpCompleted() : this.renderForm()\n  }\n\n  render () {\n    return (\n      <DocumentTitle title={'Registrarme - Enconta'}>\n        <div className='register'>\n          {this.renderSignUpForm()}\n          <div className='notification-container notification-centered'>\n            <NotificationsContainer />\n          </div>\n        </div>\n      </DocumentTitle>\n    )\n  }\n}\n\nexport default Register\n"]},"metadata":{},"sourceType":"module"}