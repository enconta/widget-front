{"ast":null,"code":"var _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/index.js\";\n\n/* eslint-disable */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport DocumentTitle from 'react-document-title';\nimport { browserHistory } from 'react-router';\nimport AppSignal from 'appsignal';\nimport { ErrorBoundary } from '@appsignal/react';\nimport { getCurrentServer, isWarningActivated, getClientsPlan } from 'utils';\nimport AppStorage from 'api/appStorage';\nimport classNames from 'classnames';\nimport moment from 'moment-timezone';\nimport ReactGA from 'react-ga';\nimport Topbar from 'shared/topbar';\nimport NotificationsContainer from 'shared/notifications';\nimport AppWideNotification from 'shared/appWideNotification';\nimport Footer from 'shared/footer';\nimport ChatButton from 'shared/appWideNotification/button';\nimport SessionStore from 'stores/session'; // prettier-ignore\n\nvar loadZenDesk = function loadZenDesk() {\n  window.zEmbed || function (e, t) {\n    var n;\n    var o;\n    var d;\n    var i;\n    var s;\n    var a = [];\n    var r = document.createElement('iframe');\n    window.zEmbed = function () {\n      a.push(arguments);\n    }, window.zE = window.zE || window.zEmbed, r.src = 'javascript:false', r.title = '', r.role = 'presentation', (r.frameElement || r).style.cssText = 'display: none', d = document.getElementsByTagName('script'), d = d[d.length - 1], d.parentNode.insertBefore(r, d), i = r.contentWindow, s = i.document;\n\n    try {\n      o = s;\n    } catch (e) {\n      ;\n      n = document.domain, r.src = 'javascript:var d=document.open();d.domain=\"' + n + '\";void(0);', o = s;\n    }\n\n    ;\n    o.open()._l = function () {\n      var e = this.createElement('script');\n      n && (this.domain = n), e.id = 'js-iframe-async', e.src = 'https://assets.zendesk.com/embeddable_framework/main.js', this.t = +new Date(), this.zendeskHost = 'enconta.zendesk.com', this.zEQueue = a, this.body.appendChild(e);\n    }, o.write('<body onload=\"document._l();\">'), o.close();\n  }(); // eslint-disable-line\n};\n\nvar App = function App(props) {\n  if (!AppStorage.hasSession()) browserHistory.push('/ingresar');\n  var title = props.children.props.route.title ? \"\".concat(props.children.props.route.title, \" - Enconta\") : 'Enconta';\n  var plan = getClientsPlan();\n  var isVisibleZenDesk = plan !== 'free' && plan !== 'free_premium' && getCurrentServer() === 'production';\n\n  if (isVisibleZenDesk) {\n    loadZenDesk();\n  }\n\n  var currentEntity = SessionStore.getCurrentEntity();\n  var legalType = currentEntity.legal_type,\n      rfc = currentEntity.rfc,\n      email = currentEntity.email;\n  var warning = isWarningActivated();\n  var displayChatbutton = legalType === 'individual' && plan === 'integral_service';\n  moment.tz.setDefault('America/Mexico_City');\n\n  if (!email.includes('@enconta.com') && !email.includes('@resuelve.mx')) {\n    ReactGA.set({\n      dimension4: rfc\n    });\n    ReactGA.set({\n      dimension5: plan\n    });\n    ReactGA.set({\n      dimension6: email\n    });\n  }\n\n  return React.createElement(ErrorBoundary, {\n    instance: AppSignal,\n    fallback: function fallback() {\n      browserHistory.push('/500');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(DocumentTitle, {\n    title: title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"app-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(Topbar, {\n    pathname: props.location.pathname,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: classNames('main-container', {\n      'main-container--warning-active': warning\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"main-container__children\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(AppWideNotification, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }), props.children), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })), displayChatbutton && React.createElement(ChatButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }), React.createElement(NotificationsContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }))));\n};\n\nApp.propTypes = {\n  children: PropTypes.element,\n  location: PropTypes.shape({\n    pathname: PropTypes.string\n  })\n};\nexport default App;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/index.js"],"names":["React","PropTypes","DocumentTitle","browserHistory","AppSignal","ErrorBoundary","getCurrentServer","isWarningActivated","getClientsPlan","AppStorage","classNames","moment","ReactGA","Topbar","NotificationsContainer","AppWideNotification","Footer","ChatButton","SessionStore","loadZenDesk","window","zEmbed","e","t","n","o","d","i","s","a","r","document","createElement","push","arguments","zE","src","title","role","frameElement","style","cssText","getElementsByTagName","length","parentNode","insertBefore","contentWindow","domain","open","_l","id","Date","zendeskHost","zEQueue","body","appendChild","write","close","App","props","hasSession","children","route","plan","isVisibleZenDesk","currentEntity","getCurrentEntity","legalType","legal_type","rfc","email","warning","displayChatbutton","tz","setDefault","includes","set","dimension4","dimension5","dimension6","location","pathname","propTypes","element","shape","string"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport DocumentTitle from 'react-document-title'\nimport {browserHistory} from 'react-router'\nimport AppSignal from 'appsignal'\nimport {ErrorBoundary} from '@appsignal/react'\nimport {getCurrentServer, isWarningActivated, getClientsPlan} from 'utils'\nimport AppStorage from 'api/appStorage'\nimport classNames from 'classnames'\nimport moment from 'moment-timezone'\nimport ReactGA from 'react-ga'\n\nimport Topbar from 'shared/topbar'\nimport NotificationsContainer from 'shared/notifications'\nimport AppWideNotification from 'shared/appWideNotification'\nimport Footer from 'shared/footer'\nimport ChatButton from 'shared/appWideNotification/button'\n\nimport SessionStore from 'stores/session'\n\n// prettier-ignore\nconst loadZenDesk = () => {\n  window.zEmbed ||\n    (function (e, t) {\n      var n\n      var o\n      var d\n      var i\n      var s\n      var a = []\n      var r = document.createElement('iframe')\n      ;(window.zEmbed = function () {\n        a.push(arguments)\n      }),\n      (window.zE = window.zE || window.zEmbed),\n      (r.src = 'javascript:false'),\n      (r.title = ''),\n      (r.role = 'presentation'),\n      ((r.frameElement || r).style.cssText = 'display: none'),\n      (d = document.getElementsByTagName('script')),\n      (d = d[d.length - 1]),\n      d.parentNode.insertBefore(r, d),\n      (i = r.contentWindow),\n      (s = i.document)\n      try {\n        o = s\n      } catch (e) {\n        ;(n = document.domain),\n        (r.src =\n            'javascript:var d=document.open();d.domain=\"' + n + '\";void(0);'),\n        (o = s)\n      }\n      ;(o.open()._l = function () {\n        var e = this.createElement('script')\n        n && (this.domain = n),\n        (e.id = 'js-iframe-async'),\n        (e.src = 'https://assets.zendesk.com/embeddable_framework/main.js'),\n        (this.t = +new Date()),\n        (this.zendeskHost = 'enconta.zendesk.com'),\n        (this.zEQueue = a),\n        this.body.appendChild(e)\n      }),\n      o.write('<body onload=\"document._l();\">'),\n      o.close()\n    })() // eslint-disable-line\n}\n\nconst App = props => {\n  if (!AppStorage.hasSession()) browserHistory.push('/ingresar')\n\n  let title = props.children.props.route.title\n    ? `${props.children.props.route.title} - Enconta`\n    : 'Enconta'\n\n  const plan = getClientsPlan()\n  const isVisibleZenDesk =\n    plan !== 'free' &&\n    plan !== 'free_premium' &&\n    getCurrentServer() === 'production'\n\n  if (isVisibleZenDesk) {\n    loadZenDesk()\n  }\n  const currentEntity = SessionStore.getCurrentEntity()\n  const {legal_type: legalType, rfc, email} = currentEntity\n\n  const warning = isWarningActivated()\n\n  const displayChatbutton =\n    legalType === 'individual' && plan === 'integral_service'\n  moment.tz.setDefault('America/Mexico_City')\n  if (!email.includes('@enconta.com') && !email.includes('@resuelve.mx')) {\n    ReactGA.set({dimension4: rfc})\n    ReactGA.set({dimension5: plan})\n    ReactGA.set({dimension6: email})\n  }\n\n  return (\n    <ErrorBoundary\n      instance={AppSignal}\n      fallback={() => {\n        browserHistory.push('/500')\n      }}\n    >\n      <DocumentTitle title={title}>\n        <div className='app-content'>\n          <Topbar pathname={props.location.pathname} />\n          <div\n            className={classNames('main-container', {\n              'main-container--warning-active': warning\n            })}\n          >\n            <div className='main-container__children'>\n              <AppWideNotification />\n              {props.children}\n            </div>\n\n            <Footer />\n          </div>\n          {displayChatbutton && <ChatButton />}\n          <NotificationsContainer />\n        </div>\n      </DocumentTitle>\n    </ErrorBoundary>\n  )\n}\n\nApp.propTypes = {\n  children: PropTypes.element,\n  location: PropTypes.shape({\n    pathname: PropTypes.string\n  })\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}