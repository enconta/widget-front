{"ast":null,"code":"import _regeneratorRuntime from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/accountingPeriods/accountingAccepted/index.js\";\n// Libraries\nimport React, { Component } from 'react';\nimport AppSignal from 'appsignal'; // Components\n\nimport NotificationsActions from 'actions/notifications';\nimport Loading from 'shared/loading';\nimport API from 'api';\nimport Calculation from '../review/components/calculation';\n\nvar accountingAccepted =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(accountingAccepted, _Component);\n\n  function accountingAccepted() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, accountingAccepted);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(accountingAccepted)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      calculations: [],\n      requestInProgress: false,\n      openCalculation: ''\n    };\n\n    _this.toggleOpenCalculation = function (id) {\n      return function () {\n        _this.setState({\n          openCalculation: id === _this.state.openCalculation ? '' : id\n        });\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(accountingAccepted, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getCalculation();\n    } // Get calculation from api\n\n  }, {\n    key: \"getCalculation\",\n    value: function () {\n      var _getCalculation = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _ref, calculations, openCalculation, isOpen;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                this.setState({\n                  requestInProgress: true\n                });\n                _context.next = 4;\n                return API.Conciliation.GetCalculations(this.props.period.id);\n\n              case 4:\n                _ref = _context.sent;\n                calculations = _ref.calculations;\n                openCalculation = this.state.openCalculation;\n                isOpen = this.props.isOpen;\n\n                if (isOpen) {\n                  openCalculation = calculations.find(function (calculation) {\n                    return calculation.status === 'accepted';\n                  }).id;\n                }\n\n                this.setState({\n                  calculations: calculations,\n                  requestInProgress: false,\n                  openCalculation: openCalculation\n                });\n                _context.next = 17;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](0);\n                AppSignal.sendError(_context.t0);\n                NotificationsActions.error('Ha ocurrido un error cargando los cálculos');\n                this.setState({\n                  requestInProgress: false\n                });\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 12]]);\n      }));\n\n      function getCalculation() {\n        return _getCalculation.apply(this, arguments);\n      }\n\n      return getCalculation;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          calculations = _this$state.calculations,\n          openCalculation = _this$state.openCalculation;\n      var period = this.props.period;\n      var calculationAccepted = calculations.find(function (calculation) {\n        return calculation.status === 'accepted';\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, calculationAccepted ? React.createElement(Calculation, {\n        calculation: calculationAccepted,\n        period: period,\n        key: calculationAccepted.id,\n        isOpen: openCalculation === calculationAccepted.id,\n        toggleOpenCalculation: this.toggleOpenCalculation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }) : React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return accountingAccepted;\n}(Component);\n\nexport { accountingAccepted as default };","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/accountingPeriods/accountingAccepted/index.js"],"names":["React","Component","AppSignal","NotificationsActions","Loading","API","Calculation","accountingAccepted","state","calculations","requestInProgress","openCalculation","toggleOpenCalculation","id","setState","getCalculation","Conciliation","GetCalculations","props","period","isOpen","find","calculation","status","sendError","error","calculationAccepted"],"mappings":";;;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,WAAtB,C,CAEA;;AACA,OAAOC,oBAAP,MAAiC,uBAAjC;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AAEA,OAAOC,WAAP,MAAwB,kCAAxB;;IAEqBC,kB;;;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACNC,MAAAA,YAAY,EAAE,EADR;AAENC,MAAAA,iBAAiB,EAAE,KAFb;AAGNC,MAAAA,eAAe,EAAE;AAHX,K;;UAqCRC,qB,GAAwB,UAAAC,EAAE;AAAA,aAAI,YAAM;AAClC,cAAKC,QAAL,CAAc;AACZH,UAAAA,eAAe,EAAEE,EAAE,KAAK,MAAKL,KAAL,CAAWG,eAAlB,GAAoC,EAApC,GAAyCE;AAD9C,SAAd;AAGD,OAJyB;AAAA,K;;;;;;;wCA/BL;AACnB,WAAKE,cAAL;AACD,K,CAED;;;;;;;;;;;;;;;AAGI,qBAAKD,QAAL,CAAc;AAAEJ,kBAAAA,iBAAiB,EAAE;AAArB,iBAAd;;uBAC+BL,GAAG,CAACW,YAAJ,CAAiBC,eAAjB,CAC7B,KAAKC,KAAL,CAAWC,MAAX,CAAkBN,EADW,C;;;;AAAvBJ,gBAAAA,Y,QAAAA,Y;AAGFE,gBAAAA,e,GAAoB,KAAKH,K,CAAzBG,e;AACES,gBAAAA,M,GAAW,KAAKF,K,CAAhBE,M;;AAER,oBAAIA,MAAJ,EAAY;AACVT,kBAAAA,eAAe,GAAGF,YAAY,CAACY,IAAb,CAChB,UAAAC,WAAW;AAAA,2BAAIA,WAAW,CAACC,MAAZ,KAAuB,UAA3B;AAAA,mBADK,EAEhBV,EAFF;AAGD;;AAED,qBAAKC,QAAL,CAAc;AACZL,kBAAAA,YAAY,EAAZA,YADY;AAEZC,kBAAAA,iBAAiB,EAAE,KAFP;AAGZC,kBAAAA,eAAe,EAAEA;AAHL,iBAAd;;;;;;;AAMAT,gBAAAA,SAAS,CAACsB,SAAV;AACArB,gBAAAA,oBAAoB,CAACsB,KAArB,CAA2B,4CAA3B;AACA,qBAAKX,QAAL,CAAc;AAAEJ,kBAAAA,iBAAiB,EAAE;AAArB,iBAAd;;;;;;;;;;;;;;;;;;6BASM;AAAA,wBACkC,KAAKF,KADvC;AAAA,UACAC,YADA,eACAA,YADA;AAAA,UACcE,eADd,eACcA,eADd;AAAA,UAEAQ,MAFA,GAEW,KAAKD,KAFhB,CAEAC,MAFA;AAGR,UAAMO,mBAAmB,GAAGjB,YAAY,CAACY,IAAb,CAC1B,UAAAC,WAAW;AAAA,eAAIA,WAAW,CAACC,MAAZ,KAAuB,UAA3B;AAAA,OADe,CAA5B;AAGA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGG,mBAAmB,GAClB,oBAAC,WAAD;AACE,QAAA,WAAW,EAAEA,mBADf;AAEE,QAAA,MAAM,EAAEP,MAFV;AAGE,QAAA,GAAG,EAAEO,mBAAmB,CAACb,EAH3B;AAIE,QAAA,MAAM,EAAEF,eAAe,KAAKe,mBAAmB,CAACb,EAJlD;AAKE,QAAA,qBAAqB,EAAE,KAAKD,qBAL9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADkB,GASlB,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVJ,CADF;AAeD;;;;EAjE6CX,S;;SAA3BM,kB","sourcesContent":["// Libraries\nimport React, { Component } from 'react'\nimport AppSignal from 'appsignal'\n\n// Components\nimport NotificationsActions from 'actions/notifications'\nimport Loading from 'shared/loading'\nimport API from 'api'\n\nimport Calculation from '../review/components/calculation'\n\nexport default class accountingAccepted extends Component {\n  state = {\n    calculations: [],\n    requestInProgress: false,\n    openCalculation: ''\n  }\n\n  componentDidMount () {\n    this.getCalculation()\n  }\n\n  // Get calculation from api\n  async getCalculation () {\n    try {\n      this.setState({ requestInProgress: true })\n      const { calculations } = await API.Conciliation.GetCalculations(\n        this.props.period.id\n      )\n      let { openCalculation } = this.state\n      const { isOpen } = this.props\n\n      if (isOpen) {\n        openCalculation = calculations.find(\n          calculation => calculation.status === 'accepted'\n        ).id\n      }\n\n      this.setState({\n        calculations,\n        requestInProgress: false,\n        openCalculation: openCalculation\n      })\n    } catch (error) {\n      AppSignal.sendError(error)\n      NotificationsActions.error('Ha ocurrido un error cargando los cálculos')\n      this.setState({ requestInProgress: false })\n    }\n  }\n  toggleOpenCalculation = id => () => {\n    this.setState({\n      openCalculation: id === this.state.openCalculation ? '' : id\n    })\n  }\n\n  render () {\n    const { calculations, openCalculation } = this.state\n    const { period } = this.props\n    const calculationAccepted = calculations.find(\n      calculation => calculation.status === 'accepted'\n    )\n    return (\n      <div>\n        {calculationAccepted ? (\n          <Calculation\n            calculation={calculationAccepted}\n            period={period}\n            key={calculationAccepted.id}\n            isOpen={openCalculation === calculationAccepted.id}\n            toggleOpenCalculation={this.toggleOpenCalculation}\n          />\n        ) : (\n          <Loading />\n        )}\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}