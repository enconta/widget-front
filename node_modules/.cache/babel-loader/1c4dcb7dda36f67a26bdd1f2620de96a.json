{"ast":null,"code":"import _toConsumableArray from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/shared/AddClientModal/index.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'shared/modal';\nimport TextField from 'shared/textField';\nimport EditClientActions from 'actions/editClient';\nimport NotificationActions from 'actions/notifications';\nvar requiredFields = new Set();\n\nvar AddClientModal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddClientModal, _Component);\n\n  function AddClientModal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddClientModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddClientModal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      requestInProgress: false\n    };\n\n    _this.onChangeField = function (field) {\n      return function (e) {\n        _this.setState(_defineProperty({}, field, e.target.value));\n      };\n    };\n\n    _this.sendData =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var data, _ref2, client;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!(_this.validateAll() && !_this.state.requestInProgress)) {\n                  _context.next = 18;\n                  break;\n                }\n\n                data = {\n                  client: {\n                    rfc: _this.state.clientRfc,\n                    legal_name: _this.state.clientLegalName,\n                    email: _this.state.clientEmail,\n                    nickname: _this.state.clientNickname,\n                    postal_code: _this.state.clientPostalCode,\n                    client_type: 'client'\n                  }\n                };\n\n                _this.setState({\n                  requestInProgress: true\n                });\n\n                _context.prev = 4;\n                _context.next = 7;\n                return EditClientActions.createClient(data);\n\n              case 7:\n                _ref2 = _context.sent;\n                client = _ref2.client;\n                NotificationActions.success('El cliente ha sido creado correctamente');\n\n                _this.setState({\n                  requestInProgress: false\n                });\n\n                _this.props.getClient(client);\n\n                _context.next = 18;\n                break;\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](4);\n                NotificationActions.error(_context.t0.toString());\n\n                _this.setState({\n                  requestInProgress: false\n                });\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[4, 14]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(AddClientModal, [{\n    key: \"validateAll\",\n    value: function validateAll() {\n      return _toConsumableArray(requiredFields) // Converts the Set() into an array\n      .filter(Boolean) // Filters the array from any falsy value\n      .map(function (form) {\n        return form.validate();\n      }) // Calls the validate() method on each form\n      .every(function (e) {\n        return e;\n      }); // Checks if all validations suceeded\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      requiredFields.clear();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          toggleModal = _this$props.toggleModal,\n          isActive = _this$props.isActive,\n          primaryButton = _this$props.primaryButton;\n      var requestInProgress = this.state.requestInProgress;\n      return React.createElement(Modal, {\n        title: \"Agregar cliente\",\n        isActive: isActive,\n        toggleModal: toggleModal,\n        onSubmit: this.sendData,\n        loading: requestInProgress,\n        primaryButton: primaryButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Raz\\xF3n Social\",\n        value: this.state.clientLegalName,\n        onChange: this.onChangeField('clientLegalName'),\n        required: true,\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"column is-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"RFC\",\n        value: this.state.clientRfc,\n        onChange: this.onChangeField('clientRfc'),\n        required: true,\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Email\",\n        value: this.state.clientEmail,\n        onChange: this.onChangeField('clientEmail'),\n        type: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Alias\",\n        value: this.state.clientNickname,\n        onChange: this.onChangeField('clientNickname'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-one-quarter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"C\\xF3digo Postal\",\n        value: this.state.clientPostalCode,\n        onChange: this.onChangeField('clientPostalCode'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"caption required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"* Campos obligatorios\")));\n    }\n  }]);\n\n  return AddClientModal;\n}(Component);\n\nAddClientModal.propTypes = {\n  getClient: PropTypes.func.isRequired,\n  toggleModal: PropTypes.func.isRequired,\n  isActive: PropTypes.bool.isRequired,\n  primaryButton: PropTypes.string\n};\nAddClientModal.defaultProps = {\n  primaryButton: 'Aceptar'\n};\nexport { AddClientModal as default };","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/shared/AddClientModal/index.js"],"names":["React","Component","PropTypes","Modal","TextField","EditClientActions","NotificationActions","requiredFields","Set","AddClientModal","state","requestInProgress","onChangeField","field","e","setState","target","value","sendData","preventDefault","validateAll","data","client","rfc","clientRfc","legal_name","clientLegalName","email","clientEmail","nickname","clientNickname","postal_code","clientPostalCode","client_type","createClient","success","props","getClient","error","toString","filter","Boolean","map","form","validate","every","clear","toggleModal","isActive","primaryButton","r","add","propTypes","func","isRequired","bool","string","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Modal from 'shared/modal'\n\nimport TextField from 'shared/textField'\nimport EditClientActions from 'actions/editClient'\nimport NotificationActions from 'actions/notifications'\n\nconst requiredFields = new Set()\n\nexport default class AddClientModal extends Component {\n  static propTypes = {\n    getClient: PropTypes.func.isRequired,\n    toggleModal: PropTypes.func.isRequired,\n    isActive: PropTypes.bool.isRequired,\n    primaryButton: PropTypes.string\n  }\n\n  static defaultProps = {\n    primaryButton: 'Aceptar'\n  }\n\n  state = {\n    requestInProgress: false\n  }\n\n  onChangeField = field => e => {\n    this.setState({ [field]: e.target.value })\n  }\n\n  validateAll () {\n    return [...requiredFields] // Converts the Set() into an array\n      .filter(Boolean) // Filters the array from any falsy value\n      .map(form => form.validate()) // Calls the validate() method on each form\n      .every(e => e) // Checks if all validations suceeded\n  }\n\n  sendData = async e => {\n    e.preventDefault()\n    if (this.validateAll() && !this.state.requestInProgress) {\n      let data = {\n        client: {\n          rfc: this.state.clientRfc,\n          legal_name: this.state.clientLegalName,\n          email: this.state.clientEmail,\n          nickname: this.state.clientNickname,\n          postal_code: this.state.clientPostalCode,\n          client_type: 'client'\n        }\n      }\n\n      this.setState({ requestInProgress: true })\n      try {\n        const { client } = await EditClientActions.createClient(data)\n        NotificationActions.success('El cliente ha sido creado correctamente')\n        this.setState({ requestInProgress: false })\n        this.props.getClient(client)\n      } catch (error) {\n        NotificationActions.error(error.toString())\n        this.setState({ requestInProgress: false })\n      }\n    }\n  }\n\n  componentWillUnmount () {\n    requiredFields.clear()\n  }\n\n  render () {\n    const { toggleModal, isActive, primaryButton } = this.props\n    const { requestInProgress } = this.state\n    return (\n      <Modal\n        title='Agregar cliente'\n        isActive={isActive}\n        toggleModal={toggleModal}\n        onSubmit={this.sendData}\n        loading={requestInProgress}\n        primaryButton={primaryButton}\n      >\n        <form>\n          <div className='columns'>\n            <div className='column'>\n              <TextField\n                label='Razón Social'\n                value={this.state.clientLegalName}\n                onChange={this.onChangeField('clientLegalName')}\n                required\n                ref={r => requiredFields.add(r)}\n              />\n            </div>\n            <div className='column is-4'>\n              <TextField\n                label='RFC'\n                value={this.state.clientRfc}\n                onChange={this.onChangeField('clientRfc')}\n                required\n                ref={r => requiredFields.add(r)}\n              />\n            </div>\n          </div>\n          <div className='columns'>\n            <div className='column'>\n              <TextField\n                label='Email'\n                value={this.state.clientEmail}\n                onChange={this.onChangeField('clientEmail')}\n                type='email'\n              />\n            </div>\n            <div className='column'>\n              <TextField\n                label='Alias'\n                value={this.state.clientNickname}\n                onChange={this.onChangeField('clientNickname')}\n              />\n            </div>\n          </div>\n          <div className='columns'>\n            <div className='column is-one-quarter'>\n              <TextField\n                label='Código Postal'\n                value={this.state.clientPostalCode}\n                onChange={this.onChangeField('clientPostalCode')}\n              />\n            </div>\n          </div>\n          <br />\n          <div className='caption required'>* Campos obligatorios</div>\n        </form>\n      </Modal>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}