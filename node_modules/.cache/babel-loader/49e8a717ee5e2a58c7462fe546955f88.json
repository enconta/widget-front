{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\nimport { Environment } from \"./environment\";\nimport { urlEncode } from \"./utils/url\";\nimport { XDomainTransport } from \"./transports/xdomain\";\nimport { XHRTransport } from \"./transports/xhr\";\nimport { FetchTransport } from \"./transports/fetch\";\n\nvar PushApi = function () {\n  function PushApi(options) {\n    this._uri = options.uri || \"https://appsignal-endpoint.net/collect\";\n    this._apiKey = options.key;\n    this._clientVersion = options.version;\n    this._transport = this._createTransport();\n  }\n\n  PushApi.prototype.push = function (span) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4, this._transport.send(span.toJSON())];\n\n          case 1:\n            _a.sent();\n\n            return [2, span];\n        }\n      });\n    });\n  };\n\n  PushApi.prototype._createTransport = function () {\n    var url = this._url();\n\n    switch (Environment.transport()) {\n      case \"XDomainRequest\":\n        return new XDomainTransport(url);\n\n      case \"XMLHttpRequest\":\n        return new XHRTransport(url);\n\n      default:\n        return new FetchTransport(url);\n    }\n  };\n\n  PushApi.prototype._url = function () {\n    var auth = this._authorization();\n\n    return this._uri + \"?\" + urlEncode(auth);\n  };\n\n  PushApi.prototype._authorization = function () {\n    return {\n      api_key: this._apiKey,\n      version: this._clientVersion\n    };\n  };\n\n  return PushApi;\n}();\n\nexport { PushApi };","map":null,"metadata":{},"sourceType":"module"}