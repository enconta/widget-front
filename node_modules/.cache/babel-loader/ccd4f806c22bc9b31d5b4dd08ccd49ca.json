{"ast":null,"code":"import _defineProperty from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/shared/payrollCharges/disabilities/index.js\";\n// Libraries\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport accounting from 'accounting';\nimport validator from 'validator';\nimport uuid from 'uuid';\nimport Button from 'shared/button';\nimport SelectField from 'shared/selectField';\nimport IconButton from 'shared/iconButton';\nimport TextField from 'shared/textField';\nimport { amountToCents, absolutify } from 'utils'; // Catalogs\n\nimport { DEDUCTION_TYPE, PERCEPTION_TYPE, DISABILITY_TYPE } from 'shared/catalogs';\nvar DEDUCTION_DISABILITY_ID = '006'; // expense\n\nvar PERCEPTION_DISABILITY_ID = '014'; // income\n\nvar DISABILITIES_LIMIT = 1;\nvar requiredFields = new Set();\n\nvar Disabilities =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Disabilities, _Component);\n\n  function Disabilities() {\n    var _this;\n\n    _classCallCheck(this, Disabilities);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Disabilities).call(this));\n    _this.data = {\n      charges: [],\n      isValid: [],\n      chargesSubtotal: 0\n    };\n    _this.state = Object.assign({}, _this.data);\n    return _this;\n  }\n\n  _createClass(Disabilities, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // Clears the stored requiredFields\n      requiredFields.clear();\n    }\n  }, {\n    key: \"exportDisabilities\",\n    value: function exportDisabilities() {\n      return this.state.charges.map(function (charge) {\n        return Object.assign({}, {\n          income_or_expense: charge.kind === '006' ? 'expense' : 'income',\n          total_days: Number(charge.days),\n          type: charge.type,\n          amount_cents: amountToCents(charge.amount),\n          discount_cents: amountToCents(charge.discount)\n        });\n      });\n    } // Iterates over required fields and validates every one of them\n    // Then it returns true if all validations succeedeed, else false.\n\n  }, {\n    key: \"validateRequiredFields\",\n    value: function validateRequiredFields() {\n      var _this2 = this;\n\n      return this.state.charges.every(this.isValidKind.bind(this)) && _toConsumableArray(requiredFields) // Converts the Set() into an array\n      .filter(Boolean) // Filters the array from any falsy value\n      .map(function (form) {\n        return form.validate.call(_this2);\n      }) // Calls the validate() method on each form\n      .every(function (e) {\n        return e;\n      }) // Checks if all validations suceeded\n      ;\n    } // Adds one disability to this.state.charges, if there's less than 1 disability in this.state.charges\n\n  }, {\n    key: \"addItem\",\n    value: function addItem() {\n      var charges = this.state.charges;\n\n      if (charges.length < DISABILITIES_LIMIT) {\n        this.setState({\n          charges: [].concat(_toConsumableArray(charges), [{\n            id: uuid(),\n            kind: '',\n            type: '',\n            days: '',\n            amount: 0,\n            discount: 0,\n            isValidKind: true\n          }])\n        });\n      }\n    }\n  }, {\n    key: \"setCharges\",\n    value: function setCharges(chargeId, field, value) {\n      var _this3 = this;\n\n      this.setState(function (prevState) {\n        return {\n          charges: prevState.charges.map(function (charge) {\n            return charge.id === chargeId ? Object.assign({}, charge, _defineProperty({}, field, value)) : charge;\n          })\n        };\n      }, function () {\n        if (field === 'amount') _this3.updateSubtotals();\n      });\n    } // Persist fields to charge\n\n  }, {\n    key: \"onChange\",\n    value: function onChange(chargeId, field, e) {\n      var value = e.target.value;\n      this.setCharges(chargeId, field, value);\n    } // Format price as $ 1,234.56\n\n  }, {\n    key: \"formatPrice\",\n    value: function formatPrice(chargeId, field) {\n      var charge = this.state.charges.find(function (charge) {\n        return charge.id === chargeId;\n      });\n      var formatted = accounting.formatMoney(absolutify(charge[field]), '$ ');\n      this.setCharges(chargeId, field, formatted);\n    } // Parse formatted price\n\n  }, {\n    key: \"unformatPrice\",\n    value: function unformatPrice(chargeId, field) {\n      var charge = this.state.charges.find(function (charge) {\n        return charge.id === chargeId;\n      });\n      var unformatted = absolutify(charge[field]);\n      this.setCharges(chargeId, field, unformatted);\n    } // Check if kind is valid in charge\n    // Validate: is not empty\n\n  }, {\n    key: \"isValidKind\",\n    value: function isValidKind(charge) {\n      var isValid = !validator.isEmpty(charge.kind);\n      this.setCharges(charge.id, 'isValidKind', isValid); // Send ga notification if empty\n\n      if (!isValid) {\n        this.props.onValidationError('Tipo de incapacidad - Este campo es requerido');\n      }\n\n      return isValid;\n    } // Update subtotal\n\n  }, {\n    key: \"updateSubtotals\",\n    value: function updateSubtotals() {\n      var charges = this.state.charges; // Iterates over every charge and acumulativamente adds it and assigns the result to subtotal\n\n      var chargesSubtotal = charges.reduce(function (acc, charge) {\n        return acc + absolutify(charge.amount);\n      }, 0);\n      var isSubstraction = charges.length > 0 && charges[0].kind === '006'; // Update parent totals and subtotals\n\n      this.props.updatePayrollTotals(this.props.keyId, chargesSubtotal, isSubstraction);\n      this.setState({\n        chargesSubtotal: chargesSubtotal.toFixed(2)\n      });\n    } // Delete an otherPerception from this.state.charges\n\n  }, {\n    key: \"deleteItem\",\n    value: function deleteItem(chargeId) {\n      requiredFields.clear();\n      this.setState({\n        charges: this.state.charges.filter(function (charge) {\n          return charge.id !== chargeId;\n        })\n      }, this.updateSubtotals);\n    } // Render Item Types options\n\n  }, {\n    key: \"renderItemTypes\",\n    value: function renderItemTypes(charge) {\n      var deductionChargeTypes = DEDUCTION_TYPE.filter(function (type) {\n        return type.id === DEDUCTION_DISABILITY_ID;\n      }).reduce(function (acc, type) {\n        return React.createElement(\"option\", {\n          key: type.id,\n          value: type.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, type.label);\n      }, null);\n      var perceptionChargeTypes = PERCEPTION_TYPE.filter(function (type) {\n        return type.id === PERCEPTION_DISABILITY_ID;\n      }).reduce(function (acc, type) {\n        return React.createElement(\"option\", {\n          key: type.id,\n          value: type.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, type.label);\n      }, null);\n      return React.createElement(\"select\", {\n        value: charge.kind,\n        onChange: this.onChange.bind(this, charge.id, 'kind'),\n        onBlur: this.isValidKind.bind(this, charge),\n        className: classNames({\n          'is-danger': !charge.isValidKind\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Selecciona una opci\\xF3n\"), React.createElement(\"option\", {\n        value: \"deductions\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Deducci\\xF3n:\"), deductionChargeTypes, React.createElement(\"option\", {\n        value: \"perceptions\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Percepci\\xF3n:\"), perceptionChargeTypes);\n    } // Items\n\n  }, {\n    key: \"renderItemList\",\n    value: function renderItemList() {\n      var _this4 = this;\n\n      var chargeList = null;\n\n      if (this.state.charges.length > 0) {\n        chargeList = this.state.charges.map(function (charge) {\n          return React.createElement(\"tr\", {\n            key: charge.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 224\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            className: \"is-one-quarter\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 225\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"control\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 226\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: classNames('select', 'is-fullwidth', {\n              'is-danger': !charge.isValidKind\n            }),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 227\n            },\n            __self: this\n          }, _this4.renderItemTypes(charge))), React.createElement(\"span\", {\n            className: classNames('help', 'is-danger', {\n              'is-hidden': charge.isValidKind\n            }),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235\n            },\n            __self: this\n          }, \"* Requerido\")), React.createElement(\"td\", {\n            className: \"is-one-quarter\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 243\n            },\n            __self: this\n          }, React.createElement(SelectField, {\n            placeholder: \"Selecciona una opci\\xF3n\",\n            value: charge.type,\n            onChange: _this4.onChange.bind(_this4, charge.id, 'type'),\n            options: DISABILITY_TYPE,\n            showId: true,\n            required: true,\n            onValidationError: _this4.props.onValidationError,\n            name: \"Tipo de incapacidad de incapacidad\",\n            ref: function ref(r) {\n              return requiredFields.add(r);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 244\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 256\n            },\n            __self: this\n          }, React.createElement(TextField, {\n            type: \"number\",\n            value: charge.days,\n            onChange: _this4.onChange.bind(_this4, charge.id, 'days'),\n            required: true,\n            onValidationError: _this4.props.onValidationError,\n            name: \"D\\xEDas de incapacidad\",\n            ref: function ref(r) {\n              return requiredFields.add(r);\n            },\n            selectAllOnFocus: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 257\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 268\n            },\n            __self: this\n          }, React.createElement(TextField, {\n            value: charge.amount,\n            onChange: _this4.onChange.bind(_this4, charge.id, 'amount'),\n            onBlur: _this4.formatPrice.bind(_this4, charge.id, 'amount'),\n            onFocus: _this4.unformatPrice.bind(_this4, charge.id, 'amount'),\n            selectAllOnFocus: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 269\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 277\n            },\n            __self: this\n          }, React.createElement(TextField, {\n            value: charge.discount,\n            onChange: _this4.onChange.bind(_this4, charge.id, 'discount'),\n            onBlur: _this4.formatPrice.bind(_this4, charge.id, 'discount'),\n            onFocus: _this4.unformatPrice.bind(_this4, charge.id, 'discount'),\n            selectAllOnFocus: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 278\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 286\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            className: \"table--actions\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 287\n            },\n            __self: this\n          }, React.createElement(IconButton, {\n            icon: \"delete\",\n            onClick: _this4.deleteItem.bind(_this4, charge.id),\n            tooltip: \"Borrar\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 288\n            },\n            __self: this\n          }))));\n        });\n      }\n\n      return chargeList;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"subheader-green\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"Incapacidades\"), React.createElement(Button, {\n        buttonStyle: \"primaryLink\",\n        icon: \"plus\",\n        className: classNames({\n          'is-hidden': this.state.charges.length >= 1\n        }),\n        onClick: this.addItem.bind(this),\n        style: {\n          marginBottom: '1.5rem'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, \"Agregar Incapacidad\"), React.createElement(\"table\", {\n        className: classNames('table', {\n          'is-hidden': this.state.charges.length < 1\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, \"Tipo\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, \"Tipo de Incapacidad\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, \"D\\xEDas\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, \"Importe\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, \"Descuento\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, \"Acciones\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, this.renderItemList()), React.createElement(Button, {\n        buttonStyle: \"primaryLink\",\n        icon: \"plus\",\n        className: classNames({\n          'is-hidden': this.state.charges.length < 1 || this.state.charges.length >= DISABILITIES_LIMIT\n        }),\n        onClick: this.addItem.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, \"Agregar Incapacidad\"), React.createElement(\"tfoot\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        colSpan: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, \"Subtotal:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, accounting.formatMoney(this.state.chargesSubtotal, '$ ')), React.createElement(\"td\", {\n        colSpan: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Disabilities;\n}(Component);\n\nDisabilities.propTypes = {\n  onValidationError: PropTypes.func,\n  updatePayrollTotals: PropTypes.func,\n  keyId: PropTypes.string\n};\nDisabilities.defaultProps = {\n  onValidationError: function onValidationError() {}\n};\nexport default Disabilities;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/shared/payrollCharges/disabilities/index.js"],"names":["React","Component","PropTypes","classNames","accounting","validator","uuid","Button","SelectField","IconButton","TextField","amountToCents","absolutify","DEDUCTION_TYPE","PERCEPTION_TYPE","DISABILITY_TYPE","DEDUCTION_DISABILITY_ID","PERCEPTION_DISABILITY_ID","DISABILITIES_LIMIT","requiredFields","Set","Disabilities","data","charges","isValid","chargesSubtotal","state","Object","assign","clear","map","charge","income_or_expense","kind","total_days","Number","days","type","amount_cents","amount","discount_cents","discount","every","isValidKind","bind","filter","Boolean","form","validate","call","e","length","setState","id","chargeId","field","value","prevState","updateSubtotals","target","setCharges","find","formatted","formatMoney","unformatted","isEmpty","props","onValidationError","reduce","acc","isSubstraction","updatePayrollTotals","keyId","toFixed","deductionChargeTypes","label","perceptionChargeTypes","onChange","chargeList","renderItemTypes","r","add","formatPrice","unformatPrice","deleteItem","addItem","marginBottom","renderItemList","propTypes","func","string","defaultProps"],"mappings":"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","sourcesContent":["// Libraries\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport accounting from 'accounting'\nimport validator from 'validator'\nimport uuid from 'uuid'\n\nimport Button from 'shared/button'\nimport SelectField from 'shared/selectField'\nimport IconButton from 'shared/iconButton'\nimport TextField from 'shared/textField'\nimport { amountToCents, absolutify } from 'utils'\n\n// Catalogs\nimport {\n  DEDUCTION_TYPE,\n  PERCEPTION_TYPE,\n  DISABILITY_TYPE\n} from 'shared/catalogs'\n\nconst DEDUCTION_DISABILITY_ID = '006' // expense\nconst PERCEPTION_DISABILITY_ID = '014' // income\nconst DISABILITIES_LIMIT = 1\n\nconst requiredFields = new Set()\n\nclass Disabilities extends Component {\n  constructor () {\n    super()\n    this.data = {\n      charges: [],\n      isValid: [],\n      chargesSubtotal: 0\n    }\n    this.state = Object.assign({}, this.data)\n  }\n\n  componentWillUnmount () {\n    // Clears the stored requiredFields\n    requiredFields.clear()\n  }\n\n  exportDisabilities () {\n    return this.state.charges.map(charge =>\n      Object.assign(\n        {},\n        {\n          income_or_expense: charge.kind === '006' ? 'expense' : 'income',\n          total_days: Number(charge.days),\n          type: charge.type,\n          amount_cents: amountToCents(charge.amount),\n          discount_cents: amountToCents(charge.discount)\n        }\n      )\n    )\n  }\n\n  // Iterates over required fields and validates every one of them\n  // Then it returns true if all validations succeedeed, else false.\n  validateRequiredFields () {\n    return (\n      this.state.charges.every(this.isValidKind.bind(this)) &&\n      [...requiredFields] // Converts the Set() into an array\n        .filter(Boolean) // Filters the array from any falsy value\n        .map(form => form.validate.call(this)) // Calls the validate() method on each form\n        .every(e => e) // Checks if all validations suceeded\n    )\n  }\n\n  // Adds one disability to this.state.charges, if there's less than 1 disability in this.state.charges\n  addItem () {\n    const { charges } = this.state\n    if (charges.length < DISABILITIES_LIMIT) {\n      this.setState({\n        charges: [\n          ...charges,\n          {\n            id: uuid(),\n            kind: '',\n            type: '',\n            days: '',\n            amount: 0,\n            discount: 0,\n            isValidKind: true\n          }\n        ]\n      })\n    }\n  }\n\n  setCharges (chargeId, field, value) {\n    this.setState(\n      prevState => ({\n        charges: prevState.charges.map(\n          charge =>\n            charge.id === chargeId\n              ? Object.assign({}, charge, { [field]: value })\n              : charge\n        )\n      }),\n      () => {\n        if (field === 'amount') this.updateSubtotals()\n      }\n    )\n  }\n\n  // Persist fields to charge\n  onChange (chargeId, field, e) {\n    const value = e.target.value\n    this.setCharges(chargeId, field, value)\n  }\n\n  // Format price as $ 1,234.56\n  formatPrice (chargeId, field) {\n    const charge = this.state.charges.find(charge => charge.id === chargeId)\n    const formatted = accounting.formatMoney(absolutify(charge[field]), '$ ')\n    this.setCharges(chargeId, field, formatted)\n  }\n\n  // Parse formatted price\n  unformatPrice (chargeId, field) {\n    const charge = this.state.charges.find(charge => charge.id === chargeId)\n    const unformatted = absolutify(charge[field])\n    this.setCharges(chargeId, field, unformatted)\n  }\n\n  // Check if kind is valid in charge\n  // Validate: is not empty\n  isValidKind (charge) {\n    const isValid = !validator.isEmpty(charge.kind)\n    this.setCharges(charge.id, 'isValidKind', isValid)\n    // Send ga notification if empty\n    if (!isValid) {\n      this.props.onValidationError(\n        'Tipo de incapacidad - Este campo es requerido'\n      )\n    }\n    return isValid\n  }\n\n  // Update subtotal\n  updateSubtotals () {\n    const { charges } = this.state\n    // Iterates over every charge and acumulativamente adds it and assigns the result to subtotal\n    const chargesSubtotal = charges.reduce((acc, charge) => {\n      return acc + absolutify(charge.amount)\n    }, 0)\n    const isSubstraction = charges.length > 0 && charges[0].kind === '006'\n    // Update parent totals and subtotals\n    this.props.updatePayrollTotals(\n      this.props.keyId,\n      chargesSubtotal,\n      isSubstraction\n    )\n    this.setState({\n      chargesSubtotal: chargesSubtotal.toFixed(2)\n    })\n  }\n\n  // Delete an otherPerception from this.state.charges\n  deleteItem (chargeId) {\n    requiredFields.clear()\n    this.setState(\n      {\n        charges: this.state.charges.filter(charge => charge.id !== chargeId)\n      },\n      this.updateSubtotals\n    )\n  }\n\n  // Render Item Types options\n  renderItemTypes (charge) {\n    const deductionChargeTypes = DEDUCTION_TYPE.filter(\n      type => type.id === DEDUCTION_DISABILITY_ID\n    ).reduce(\n      (acc, type) => (\n        <option key={type.id} value={type.id}>\n          {type.label}\n        </option>\n      ),\n      null\n    )\n\n    const perceptionChargeTypes = PERCEPTION_TYPE.filter(\n      type => type.id === PERCEPTION_DISABILITY_ID\n    ).reduce(\n      (acc, type) => (\n        <option key={type.id} value={type.id}>\n          {type.label}\n        </option>\n      ),\n      null\n    )\n\n    return (\n      <select\n        value={charge.kind}\n        onChange={this.onChange.bind(this, charge.id, 'kind')}\n        onBlur={this.isValidKind.bind(this, charge)}\n        className={classNames({ 'is-danger': !charge.isValidKind })}\n      >\n        <option value='' disabled>\n          Selecciona una opción\n        </option>\n        <option value='deductions' disabled>\n          Deducción:\n        </option>\n        {deductionChargeTypes}\n        <option value='perceptions' disabled>\n          Percepción:\n        </option>\n        {perceptionChargeTypes}\n      </select>\n    )\n  }\n\n  // Items\n  renderItemList () {\n    let chargeList = null\n    if (this.state.charges.length > 0) {\n      chargeList = this.state.charges.map(charge => {\n        return (\n          <tr key={charge.id}>\n            <td className='is-one-quarter'>\n              <span className='control'>\n                <span\n                  className={classNames('select', 'is-fullwidth', {\n                    'is-danger': !charge.isValidKind\n                  })}\n                >\n                  {this.renderItemTypes(charge)}\n                </span>\n              </span>\n              <span\n                className={classNames('help', 'is-danger', {\n                  'is-hidden': charge.isValidKind\n                })}\n              >\n                * Requerido\n              </span>\n            </td>\n            <td className='is-one-quarter'>\n              <SelectField\n                placeholder='Selecciona una opción'\n                value={charge.type}\n                onChange={this.onChange.bind(this, charge.id, 'type')}\n                options={DISABILITY_TYPE}\n                showId\n                required\n                onValidationError={this.props.onValidationError}\n                name='Tipo de incapacidad de incapacidad'\n                ref={r => requiredFields.add(r)}\n              />\n            </td>\n            <td>\n              <TextField\n                type='number'\n                value={charge.days}\n                onChange={this.onChange.bind(this, charge.id, 'days')}\n                required\n                onValidationError={this.props.onValidationError}\n                name='Días de incapacidad'\n                ref={r => requiredFields.add(r)}\n                selectAllOnFocus\n              />\n            </td>\n            <td>\n              <TextField\n                value={charge.amount}\n                onChange={this.onChange.bind(this, charge.id, 'amount')}\n                onBlur={this.formatPrice.bind(this, charge.id, 'amount')}\n                onFocus={this.unformatPrice.bind(this, charge.id, 'amount')}\n                selectAllOnFocus\n              />\n            </td>\n            <td>\n              <TextField\n                value={charge.discount}\n                onChange={this.onChange.bind(this, charge.id, 'discount')}\n                onBlur={this.formatPrice.bind(this, charge.id, 'discount')}\n                onFocus={this.unformatPrice.bind(this, charge.id, 'discount')}\n                selectAllOnFocus\n              />\n            </td>\n            <td>\n              <p className='table--actions'>\n                <IconButton\n                  icon='delete'\n                  onClick={this.deleteItem.bind(this, charge.id)}\n                  tooltip='Borrar'\n                />\n              </p>\n            </td>\n          </tr>\n        )\n      })\n    }\n    return chargeList\n  }\n\n  render () {\n    return (\n      <div>\n        <h3 className='subheader-green'>Incapacidades</h3>\n        <Button\n          buttonStyle='primaryLink'\n          icon='plus'\n          className={classNames({\n            'is-hidden': this.state.charges.length >= 1\n          })}\n          onClick={this.addItem.bind(this)}\n          style={{ marginBottom: '1.5rem' }}\n        >\n          Agregar Incapacidad\n        </Button>\n        <table\n          className={classNames('table', {\n            'is-hidden': this.state.charges.length < 1\n          })}\n        >\n          <thead>\n            <tr>\n              <th>Tipo</th>\n              <th>Tipo de Incapacidad</th>\n              <th>Días</th>\n              <th>Importe</th>\n              <th>Descuento</th>\n              <th>Acciones</th>\n            </tr>\n          </thead>\n          <tbody>{this.renderItemList()}</tbody>\n          <Button\n            buttonStyle='primaryLink'\n            icon='plus'\n            className={classNames({\n              'is-hidden':\n                this.state.charges.length < 1 ||\n                this.state.charges.length >= DISABILITIES_LIMIT\n            })}\n            onClick={this.addItem.bind(this)}\n          >\n            Agregar Incapacidad\n          </Button>\n          <tfoot>\n            <tr>\n              <td colSpan={3} />\n              <td>Subtotal:</td>\n              <td>\n                {accounting.formatMoney(this.state.chargesSubtotal, '$ ')}\n              </td>\n              <td colSpan={2} />\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    )\n  }\n}\n\nDisabilities.propTypes = {\n  onValidationError: PropTypes.func,\n  updatePayrollTotals: PropTypes.func,\n  keyId: PropTypes.string\n}\n\nDisabilities.defaultProps = {\n  onValidationError: () => {}\n}\n\nexport default Disabilities\n"]},"metadata":{},"sourceType":"module"}