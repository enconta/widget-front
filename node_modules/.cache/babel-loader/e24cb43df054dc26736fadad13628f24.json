{"ast":null,"code":"import _defineProperty from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/complementos/localTaxes/tax/index.js\";\n// Libraries\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport accounting from 'accounting'; // Components\n\nimport Button from 'shared/button';\nimport TextField from 'shared/textField';\nimport { formatCents } from 'utils'; // Keys\n\nvar TAX_NAME_KEY = 'tax_name';\nvar RATE_KEY = 'rate';\nvar AMOUNT_KEY = 'amount_cents';\nvar BASE_KEY = 'base';\nvar SUBTOTAL_CENTS_KEY = 'subtotal_cents';\n\nvar Tax =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Tax, _Component);\n\n  function Tax(props) {\n    var _this$data;\n\n    var _this;\n\n    _classCallCheck(this, Tax);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Tax).call(this, props));\n    _this.data = (_this$data = {}, _defineProperty(_this$data, BASE_KEY, _this.props.totals[SUBTOTAL_CENTS_KEY] || 0), _defineProperty(_this$data, TAX_NAME_KEY, ''), _defineProperty(_this$data, RATE_KEY, 0), _defineProperty(_this$data, AMOUNT_KEY, 0), _this$data);\n    _this.state = Object.assign({}, _this.data);\n    return _this;\n  } // Set target value to this.state[field]\n\n\n  _createClass(Tax, [{\n    key: \"onChange\",\n    value: function onChange(field, e) {\n      var _this2 = this;\n\n      this.setState(_defineProperty({}, field, update(this.state[field], {\n        $set: e.target.value\n      })), function () {\n        if (field === RATE_KEY) _this2.updateTotal();\n      });\n    } // Update totals after RATE_KEY or BASE_KEY changes\n\n  }, {\n    key: \"updateTotal\",\n    value: function updateTotal() {\n      this.setState(function (state) {\n        return _defineProperty({}, AMOUNT_KEY, accounting.unformat(state[RATE_KEY]) * (state[BASE_KEY] / 100));\n      });\n    } // Handle base updates, then call update totals\n\n  }, {\n    key: \"updateBase\",\n    value: function updateBase(base) {\n      var _this3 = this;\n\n      this.setState(_defineProperty({}, BASE_KEY, base), function () {\n        _this3.updateTotal();\n      });\n    } // Handle export\n\n  }, {\n    key: \"export\",\n    value: function _export() {\n      var _ref2;\n\n      return _ref2 = {}, _defineProperty(_ref2, TAX_NAME_KEY, this.state[TAX_NAME_KEY]), _defineProperty(_ref2, RATE_KEY, accounting.unformat(this.state[RATE_KEY])), _defineProperty(_ref2, AMOUNT_KEY, formatCents(this.state[AMOUNT_KEY])), _ref2;\n    } // Main render\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        key: this.props.uuid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Nombre del impuesto\",\n        value: this.state[TAX_NAME_KEY],\n        onChange: this.onChange.bind(this, TAX_NAME_KEY),\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Tasa (%)\",\n        value: this.state[RATE_KEY],\n        onChange: this.onChange.bind(this, RATE_KEY),\n        type: \"number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Monto\",\n        className: \"is-money\",\n        value: accounting.formatMoney(this.state[AMOUNT_KEY], '$ ', 2),\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }))), React.createElement(Button, {\n        buttonStyle: \"dangerLink\",\n        icon: \"delete\",\n        onClick: function onClick() {\n          _this4.props.delete(_this4, _this4.props.uuid);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Eliminar impuesto\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Tax;\n}(Component);\n\nTax.propTypes = {\n  delete: PropTypes.func,\n  totals: PropTypes.object,\n  uuid: PropTypes.string\n};\nexport default Tax;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/complementos/localTaxes/tax/index.js"],"names":["React","Component","PropTypes","update","accounting","Button","TextField","formatCents","TAX_NAME_KEY","RATE_KEY","AMOUNT_KEY","BASE_KEY","SUBTOTAL_CENTS_KEY","Tax","props","data","totals","state","Object","assign","field","e","setState","$set","target","value","updateTotal","unformat","base","uuid","onChange","bind","formatMoney","delete","propTypes","func","object","string"],"mappings":";;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,UAAP,MAAuB,YAAvB,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,SAASC,WAAT,QAA4B,OAA5B,C,CAEA;;AACA,IAAMC,YAAY,GAAG,UAArB;AACA,IAAMC,QAAQ,GAAG,MAAjB;AACA,IAAMC,UAAU,GAAG,cAAnB;AACA,IAAMC,QAAQ,GAAG,MAAjB;AACA,IAAMC,kBAAkB,GAAG,gBAA3B;;IAEMC,G;;;;;AACJ,eAAaC,KAAb,EAAoB;AAAA;;AAAA;;AAAA;;AAClB,6EAAMA,KAAN;AACA,UAAKC,IAAL,iDACGJ,QADH,EACc,MAAKG,KAAL,CAAWE,MAAX,CAAkBJ,kBAAlB,KAAyC,CADvD,+BAEGJ,YAFH,EAEkB,EAFlB,+BAGGC,QAHH,EAGc,CAHd,+BAIGC,UAJH,EAIgB,CAJhB;AAMA,UAAKO,KAAL,GAAaC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,MAAKJ,IAAvB,CAAb;AARkB;AASnB,G,CAED;;;;;6BACUK,K,EAAOC,C,EAAG;AAAA;;AAClB,WAAKC,QAAL,qBACKF,KADL,EACajB,MAAM,CAAC,KAAKc,KAAL,CAAWG,KAAX,CAAD,EAAoB;AAAEG,QAAAA,IAAI,EAAEF,CAAC,CAACG,MAAF,CAASC;AAAjB,OAApB,CADnB,GAEE,YAAM;AACJ,YAAIL,KAAK,KAAKX,QAAd,EAAwB,MAAI,CAACiB,WAAL;AACzB,OAJH;AAMD,K,CAED;;;;kCACe;AACb,WAAKJ,QAAL,CAAc,UAAAL,KAAK;AAAA,mCAChBP,UADgB,EAEfN,UAAU,CAACuB,QAAX,CAAoBV,KAAK,CAACR,QAAD,CAAzB,KAAwCQ,KAAK,CAACN,QAAD,CAAL,GAAkB,GAA1D,CAFe;AAAA,OAAnB;AAID,K,CAED;;;;+BACYiB,I,EAAM;AAAA;;AAChB,WAAKN,QAAL,qBAAiBX,QAAjB,EAA4BiB,IAA5B,GAAoC,YAAM;AACxC,QAAA,MAAI,CAACF,WAAL;AACD,OAFD;AAGD,K,CAED;;;;8BACU;AAAA;;AACR,gDACGlB,YADH,EACkB,KAAKS,KAAL,CAAWT,YAAX,CADlB,0BAEGC,QAFH,EAEcL,UAAU,CAACuB,QAAX,CAAoB,KAAKV,KAAL,CAAWR,QAAX,CAApB,CAFd,0BAGGC,UAHH,EAGgBH,WAAW,CAAC,KAAKU,KAAL,CAAWP,UAAX,CAAD,CAH3B;AAKD,K,CAED;;;;6BACU;AAAA;;AACR,aACE;AAAK,QAAA,GAAG,EAAE,KAAKI,KAAL,CAAWe,IAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AACE,QAAA,KAAK,EAAC,qBADR;AAEE,QAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWT,YAAX,CAFT;AAGE,QAAA,QAAQ,EAAE,KAAKsB,QAAL,CAAcC,IAAd,CAAmB,IAAnB,EAAyBvB,YAAzB,CAHZ;AAIE,QAAA,IAAI,EAAC,MAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EASE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AACE,QAAA,KAAK,EAAC,UADR;AAEE,QAAA,KAAK,EAAE,KAAKS,KAAL,CAAWR,QAAX,CAFT;AAGE,QAAA,QAAQ,EAAE,KAAKqB,QAAL,CAAcC,IAAd,CAAmB,IAAnB,EAAyBtB,QAAzB,CAHZ;AAIE,QAAA,IAAI,EAAC,QAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CATF,EAiBE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AACE,QAAA,KAAK,EAAC,OADR;AAEE,QAAA,SAAS,EAAC,UAFZ;AAGE,QAAA,KAAK,EAAEL,UAAU,CAAC4B,WAAX,CAAuB,KAAKf,KAAL,CAAWP,UAAX,CAAvB,EAA+C,IAA/C,EAAqD,CAArD,CAHT;AAIE,QAAA,QAAQ,MAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAjBF,CADF,EA2BE,oBAAC,MAAD;AACE,QAAA,WAAW,EAAC,YADd;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,OAAO,EAAE,mBAAM;AACb,UAAA,MAAI,CAACI,KAAL,CAAWmB,MAAX,CAAkB,MAAlB,EAAwB,MAAI,CAACnB,KAAL,CAAWe,IAAnC;AACD,SALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BA3BF,EAoCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QApCF,CADF;AAwCD;;;;EAxFe5B,S;;AA2FlBY,GAAG,CAACqB,SAAJ,GAAgB;AACdD,EAAAA,MAAM,EAAE/B,SAAS,CAACiC,IADJ;AAEdnB,EAAAA,MAAM,EAAEd,SAAS,CAACkC,MAFJ;AAGdP,EAAAA,IAAI,EAAE3B,SAAS,CAACmC;AAHF,CAAhB;AAMA,eAAexB,GAAf","sourcesContent":["// Libraries\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport update from 'immutability-helper'\nimport accounting from 'accounting'\n\n// Components\nimport Button from 'shared/button'\nimport TextField from 'shared/textField'\nimport { formatCents } from 'utils'\n\n// Keys\nconst TAX_NAME_KEY = 'tax_name'\nconst RATE_KEY = 'rate'\nconst AMOUNT_KEY = 'amount_cents'\nconst BASE_KEY = 'base'\nconst SUBTOTAL_CENTS_KEY = 'subtotal_cents'\n\nclass Tax extends Component {\n  constructor (props) {\n    super(props)\n    this.data = {\n      [BASE_KEY]: this.props.totals[SUBTOTAL_CENTS_KEY] || 0,\n      [TAX_NAME_KEY]: '',\n      [RATE_KEY]: 0,\n      [AMOUNT_KEY]: 0\n    }\n    this.state = Object.assign({}, this.data)\n  }\n\n  // Set target value to this.state[field]\n  onChange (field, e) {\n    this.setState(\n      { [field]: update(this.state[field], { $set: e.target.value }) },\n      () => {\n        if (field === RATE_KEY) this.updateTotal()\n      }\n    )\n  }\n\n  // Update totals after RATE_KEY or BASE_KEY changes\n  updateTotal () {\n    this.setState(state => ({\n      [AMOUNT_KEY]:\n        accounting.unformat(state[RATE_KEY]) * (state[BASE_KEY] / 100)\n    }))\n  }\n\n  // Handle base updates, then call update totals\n  updateBase (base) {\n    this.setState({ [BASE_KEY]: base }, () => {\n      this.updateTotal()\n    })\n  }\n\n  // Handle export\n  export () {\n    return {\n      [TAX_NAME_KEY]: this.state[TAX_NAME_KEY],\n      [RATE_KEY]: accounting.unformat(this.state[RATE_KEY]),\n      [AMOUNT_KEY]: formatCents(this.state[AMOUNT_KEY])\n    }\n  }\n\n  // Main render\n  render () {\n    return (\n      <div key={this.props.uuid}>\n        <div className='columns'>\n          <div className='column'>\n            <TextField\n              label='Nombre del impuesto'\n              value={this.state[TAX_NAME_KEY]}\n              onChange={this.onChange.bind(this, TAX_NAME_KEY)}\n              type='text'\n            />\n          </div>\n          <div className='column'>\n            <TextField\n              label='Tasa (%)'\n              value={this.state[RATE_KEY]}\n              onChange={this.onChange.bind(this, RATE_KEY)}\n              type='number'\n            />\n          </div>\n          <div className='column'>\n            <TextField\n              label='Monto'\n              className='is-money'\n              value={accounting.formatMoney(this.state[AMOUNT_KEY], '$ ', 2)}\n              disabled\n            />\n          </div>\n        </div>\n        <Button\n          buttonStyle='dangerLink'\n          icon='delete'\n          onClick={() => {\n            this.props.delete(this, this.props.uuid)\n          }}\n        >\n          Eliminar impuesto\n        </Button>\n        <hr />\n      </div>\n    )\n  }\n}\n\nTax.propTypes = {\n  delete: PropTypes.func,\n  totals: PropTypes.object,\n  uuid: PropTypes.string\n}\n\nexport default Tax\n"]},"metadata":{},"sourceType":"module"}