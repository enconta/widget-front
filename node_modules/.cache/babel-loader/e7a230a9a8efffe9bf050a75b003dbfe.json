{"ast":null,"code":"import _toConsumableArray from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/complementos/ine/campaign/index.js\";\n// Libraries\nimport React, { Component } from 'react';\nimport uuid from 'uuid'; // Components\n\nimport Button from 'shared/button';\nimport { removeEmpty } from 'utils'; // Children\n\nimport CampaignState from './state';\nvar CAMPAIGN_STATES_MAX = 64;\nvar CAMPAIGN_STATES_MIN = 1; // Campaign Keys\n\nvar STATES_KEY = 'campaignStates';\n\nvar Campaign =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Campaign, _Component);\n\n  function Campaign(props) {\n    var _this;\n\n    _classCallCheck(this, Campaign);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Campaign).call(this, props));\n    _this.data = _defineProperty({}, STATES_KEY, []);\n    _this.state = Object.assign({}, _this.data);\n    return _this;\n  } // Add first state on mount\n\n\n  _createClass(Campaign, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.addState();\n    } // Add new state to STATES\n\n  }, {\n    key: \"addState\",\n    value: function addState() {\n      this.setState(_defineProperty({}, STATES_KEY, [].concat(_toConsumableArray(this.state[STATES_KEY]), [{\n        uuid: uuid()\n      }])));\n    } // Remove state from STATES\n\n  }, {\n    key: \"deleteState\",\n    value: function deleteState(uuid) {\n      this.setState(_defineProperty({}, STATES_KEY, this.state[STATES_KEY].filter(function (c) {\n        return c.uuid !== uuid;\n      })));\n    } // Make inner data available to parent\n\n  }, {\n    key: \"exportData\",\n    value: function exportData() {\n      var _this2 = this;\n\n      var stateData = this.state[STATES_KEY].map(function (state) {\n        return _this2.refs[state.uuid].exportData();\n      });\n\n      if (stateData.every(function (e) {\n        return e;\n      })) {\n        var data = {\n          lowData: stateData\n        };\n        var cleanData = Object.assign({}, data);\n        cleanData = removeEmpty(cleanData);\n        return cleanData;\n      } else {\n        return {\n          topData: null,\n          lowData: null\n        };\n      }\n    } // Render add button for STATES\n\n  }, {\n    key: \"renderAddButton\",\n    value: function renderAddButton() {\n      return React.createElement(\"div\", {\n        className: \"block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Button, {\n        buttonStyle: \"primaryLink\",\n        icon: \"plus\",\n        onClick: this.addState.bind(this),\n        disabled: this.state[STATES_KEY].length >= CAMPAIGN_STATES_MAX,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Agregar Estado\"));\n    } // Render single state from STATES\n\n  }, {\n    key: \"renderState\",\n    value: function renderState(uuid) {\n      return React.createElement(CampaignState, {\n        key: uuid,\n        ref: uuid,\n        uuid: uuid,\n        deleteState: this.deleteState.bind(this),\n        deletable: this.state[STATES_KEY].length > CAMPAIGN_STATES_MIN,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      });\n    } // Main render\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var states = this.state[STATES_KEY];\n      var campaignStates = states.length > 0 ? states.map(function (_ref) {\n        var uuid = _ref.uuid;\n        return _this3.renderState(uuid);\n      }) : null;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, campaignStates, this.renderAddButton());\n    }\n  }]);\n\n  return Campaign;\n}(Component);\n\nexport default Campaign;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/complementos/ine/campaign/index.js"],"names":["React","Component","uuid","Button","removeEmpty","CampaignState","CAMPAIGN_STATES_MAX","CAMPAIGN_STATES_MIN","STATES_KEY","Campaign","props","data","state","Object","assign","addState","setState","filter","c","stateData","map","refs","exportData","every","e","lowData","cleanData","topData","bind","length","deleteState","states","campaignStates","renderState","renderAddButton"],"mappings":"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","sourcesContent":["// Libraries\nimport React, { Component } from 'react'\nimport uuid from 'uuid'\n\n// Components\nimport Button from 'shared/button'\nimport { removeEmpty } from 'utils'\n\n// Children\nimport CampaignState from './state'\n\nconst CAMPAIGN_STATES_MAX = 64\nconst CAMPAIGN_STATES_MIN = 1\n\n// Campaign Keys\nconst STATES_KEY = 'campaignStates'\n\nclass Campaign extends Component {\n  constructor (props) {\n    super(props)\n    this.data = {\n      [STATES_KEY]: []\n    }\n    this.state = Object.assign({}, this.data)\n  }\n\n  // Add first state on mount\n  componentDidMount () {\n    this.addState()\n  }\n\n  // Add new state to STATES\n  addState () {\n    this.setState({\n      [STATES_KEY]: [...this.state[STATES_KEY], { uuid: uuid() }]\n    })\n  }\n\n  // Remove state from STATES\n  deleteState (uuid) {\n    this.setState({\n      [STATES_KEY]: this.state[STATES_KEY].filter(c => c.uuid !== uuid)\n    })\n  }\n\n  // Make inner data available to parent\n  exportData () {\n    let stateData = this.state[STATES_KEY].map(state =>\n      this.refs[state.uuid].exportData()\n    )\n    if (stateData.every(e => e)) {\n      let data = {\n        lowData: stateData\n      }\n      let cleanData = Object.assign({}, data)\n      cleanData = removeEmpty(cleanData)\n      return cleanData\n    } else {\n      return { topData: null, lowData: null }\n    }\n  }\n\n  // Render add button for STATES\n  renderAddButton () {\n    return (\n      <div className='block'>\n        <Button\n          buttonStyle='primaryLink'\n          icon='plus'\n          onClick={this.addState.bind(this)}\n          disabled={this.state[STATES_KEY].length >= CAMPAIGN_STATES_MAX}\n        >\n          Agregar Estado\n        </Button>\n      </div>\n    )\n  }\n\n  // Render single state from STATES\n  renderState (uuid) {\n    return (\n      <CampaignState\n        key={uuid}\n        ref={uuid}\n        uuid={uuid}\n        deleteState={this.deleteState.bind(this)}\n        deletable={this.state[STATES_KEY].length > CAMPAIGN_STATES_MIN}\n      />\n    )\n  }\n\n  // Main render\n  render () {\n    let states = this.state[STATES_KEY]\n    let campaignStates =\n      states.length > 0\n        ? states.map(({ uuid }) => this.renderState(uuid))\n        : null\n    return (\n      <div>\n        {campaignStates}\n        {this.renderAddButton()}\n      </div>\n    )\n  }\n}\n\nexport default Campaign\n"]},"metadata":{},"sourceType":"module"}