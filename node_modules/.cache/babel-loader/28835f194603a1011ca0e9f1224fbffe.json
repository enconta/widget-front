{"ast":null,"code":"import _toConsumableArray from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/payPremium/cancelService.js\";\nimport React, { Component, Fragment } from 'react';\nimport Freemium from 'shared/freemium';\nimport API from 'api';\nimport CheckBoxNormal from 'shared/checkboxNormal';\nimport Button from 'shared/button';\nimport { handleBack, getPlanName } from 'utils';\nimport SuscriptionActions from 'actions/suscription';\nimport NotificationsActions from 'actions/notifications';\nimport { toggleBannerModal } from '../viewInvoice/utilsRestrictions';\nimport Premium from 'shared/premium';\nexport var CancelService =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CancelService, _Component);\n\n  function CancelService() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CancelService);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CancelService)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      reasons: [],\n      comments: ''\n    };\n\n    _this.handleCheckElement = function () {\n      return function (event) {\n        var reasons = _this.state.reasons;\n        reasons.forEach(function (element) {\n          if (element.name === event.target.value) {\n            element.isChecked = event.target.checked;\n          }\n        });\n\n        _this.setState({\n          reasons: reasons\n        });\n      };\n    };\n\n    _this.onChangeComments = function (e) {\n      _this.setState({\n        comments: e.target.value\n      });\n    };\n\n    _this.filterYearsSelected = function () {\n      var reasons = _toConsumableArray(_this.state.reasons);\n\n      var comments = _this.state.comments;\n      reasons = reasons.filter(function (account) {\n        return account.isChecked;\n      }).map(function (account) {\n        return account.id;\n      });\n      return {\n        cancellation_request: {\n          cancellation_reasons: reasons,\n          comments: comments,\n          service: '2'\n        }\n      };\n    };\n\n    _this.sendCancelService = function () {\n      SuscriptionActions.cancelPlan(_this.filterYearsSelected()).then(function () {\n        NotificationsActions.success('Solicitud de cancelación enviada, en breve un asesor se pondrá en contacto contigo');\n      }).catch(function (error) {\n        NotificationsActions.error(error);\n      });\n    };\n\n    _this.selectPlan = function () {\n      var planName = getPlanName();\n      var pathname = _this.props.location.pathname;\n      var premium = pathname.includes('contratar-premium');\n      var plan = '';\n\n      switch (planName) {\n        case 'Premium':\n          plan = React.createElement(Freemium, {\n            reasons: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 80\n            },\n            __self: this\n          });\n          break;\n\n        case 'Servicio integral':\n          plan = React.createElement(Premium, {\n            controlPlans: function controlPlans() {\n              return toggleBannerModal(_assertThisInitialized(_assertThisInitialized(_this)), '', true);\n            },\n            premium: premium,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84\n            },\n            __self: this\n          });\n          break;\n      }\n\n      return plan;\n    };\n\n    return _this;\n  }\n\n  _createClass(CancelService, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getCancellationReasons();\n    }\n  }, {\n    key: \"getCancellationReasons\",\n    value: function getCancellationReasons() {\n      var _this2 = this;\n\n      API.User.CancellationReasons().then(function (response) {\n        _this2.setState({\n          reasons: response.cancellation_reasons\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          reasons = _this$state.reasons,\n          comments = _this$state.comments;\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"premium\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"premium__card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"premium__payment-successful-subtitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"\\xBFPorque no quieres seguir con tu plan?\"), React.createElement(\"div\", {\n        className: \"cancel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, reasons.map(function (_ref) {\n        var name = _ref.name,\n            id = _ref.id;\n        return React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(CheckBoxNormal, {\n          key: id,\n          value: name,\n          handleCheckElement: _this3.handleCheckElement(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }));\n      })), React.createElement(\"p\", {\n        className: \"cancel__comments\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Tu opini\\xF3n es importante para nosotros\"), React.createElement(\"textarea\", {\n        className: \"textarea\",\n        style: {\n          margin: '1em 0'\n        },\n        value: comments,\n        onChange: this.onChangeComments,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(Button, {\n        icon: \"cancel\",\n        onClick: handleBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Cancelar\"), React.createElement(Button, {\n        type: \"submit\",\n        buttonStyle: \"primary\",\n        icon: \"telegram\",\n        loading: this.state.requestInProgress,\n        onClick: function onClick() {\n          return _this3.sendCancelService();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Enviar\")), React.createElement(\"div\", {\n        className: \"premium__card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, this.selectPlan())));\n    }\n  }]);\n\n  return CancelService;\n}(Component);\nexport default CancelService;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/payPremium/cancelService.js"],"names":["React","Component","Fragment","Freemium","API","CheckBoxNormal","Button","handleBack","getPlanName","SuscriptionActions","NotificationsActions","toggleBannerModal","Premium","CancelService","state","reasons","comments","handleCheckElement","event","forEach","element","name","target","value","isChecked","checked","setState","onChangeComments","e","filterYearsSelected","filter","account","map","id","cancellation_request","cancellation_reasons","service","sendCancelService","cancelPlan","then","success","catch","error","selectPlan","planName","pathname","props","location","premium","includes","plan","getCancellationReasons","User","CancellationReasons","response","margin","requestInProgress"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\nimport Freemium from 'shared/freemium'\nimport API from 'api'\nimport CheckBoxNormal from 'shared/checkboxNormal'\nimport Button from 'shared/button'\nimport { handleBack, getPlanName } from 'utils'\n\nimport SuscriptionActions from 'actions/suscription'\nimport NotificationsActions from 'actions/notifications'\nimport { toggleBannerModal } from '../viewInvoice/utilsRestrictions'\nimport Premium from 'shared/premium'\n\nexport class CancelService extends Component {\n  state = {\n    reasons: [],\n    comments: ''\n  }\n  componentDidMount () {\n    this.getCancellationReasons()\n  }\n\n  getCancellationReasons () {\n    API.User.CancellationReasons().then(response => {\n      this.setState({ reasons: response.cancellation_reasons })\n    })\n  }\n\n  handleCheckElement = () => event => {\n    let { reasons } = this.state\n    reasons.forEach(element => {\n      if (element.name === event.target.value) {\n        element.isChecked = event.target.checked\n      }\n    })\n    this.setState({ reasons: reasons })\n  }\n\n  onChangeComments = e => {\n    this.setState({\n      comments: e.target.value\n    })\n  }\n\n  filterYearsSelected = () => {\n    let reasons = [...this.state.reasons]\n    const { comments } = this.state\n    reasons = reasons\n      .filter(account => account.isChecked)\n      .map(account => account.id)\n\n    return {\n      cancellation_request: {\n        cancellation_reasons: reasons,\n        comments: comments,\n        service: '2'\n      }\n    }\n  }\n\n  sendCancelService = () => {\n    SuscriptionActions.cancelPlan(this.filterYearsSelected())\n      .then(() => {\n        NotificationsActions.success(\n          'Solicitud de cancelación enviada, en breve un asesor se pondrá en contacto contigo'\n        )\n      })\n      .catch(error => {\n        NotificationsActions.error(error)\n      })\n  }\n\n  selectPlan = () => {\n    const planName = getPlanName()\n    const { pathname } = this.props.location\n    const premium = pathname.includes('contratar-premium')\n\n    let plan = ''\n    switch (planName) {\n      case 'Premium':\n        plan = <Freemium reasons />\n        break\n      case 'Servicio integral':\n        plan = (\n          <Premium\n            controlPlans={() => toggleBannerModal(this, '', true)}\n            premium={premium}\n          />\n        )\n        break\n    }\n    return plan\n  }\n\n  render () {\n    const { reasons, comments } = this.state\n    return (\n      <Fragment>\n        <div className='premium'>\n          <div className='premium__card'>\n            <p className='premium__payment-successful-subtitle'>\n              ¿Porque no quieres seguir con tu plan?\n            </p>\n            <div className='cancel'>\n              {reasons.map(({ name, id }) => {\n                return (\n                  <Fragment>\n                    <CheckBoxNormal\n                      key={id}\n                      value={name}\n                      handleCheckElement={this.handleCheckElement()}\n                    />\n                  </Fragment>\n                )\n              })}\n            </div>\n            <p className='cancel__comments'>\n              Tu opinión es importante para nosotros\n            </p>\n            <textarea\n              className='textarea'\n              style={{ margin: '1em 0' }}\n              value={comments}\n              onChange={this.onChangeComments}\n            />\n            <Button icon='cancel' onClick={handleBack}>\n              Cancelar\n            </Button>\n\n            <Button\n              type='submit'\n              buttonStyle='primary'\n              icon='telegram'\n              loading={this.state.requestInProgress}\n              onClick={() => this.sendCancelService()}\n            >\n              Enviar\n            </Button>\n          </div>\n          <div className='premium__card'>{this.selectPlan()}</div>\n        </div>\n      </Fragment>\n    )\n  }\n}\n\nexport default CancelService\n"]},"metadata":{},"sourceType":"module"}