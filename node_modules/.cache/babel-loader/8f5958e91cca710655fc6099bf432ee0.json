{"ast":null,"code":"import _toConsumableArray from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/accountDisabled/paymentDone/index.js\";\n// Libraries\nimport React, { Component, Fragment } from 'react';\nimport { browserHistory } from 'react-router';\nimport { formatCurrency } from 'utils'; // Components\n\nimport Loading from 'shared/loading';\nimport IconButton from 'shared/iconButton';\nimport Button from 'shared/button'; // Actions\n\nimport SuscriptionActions from 'actions/suscription'; // Stores\n\nimport SuscriptionStore from 'stores/suscription';\n\nfunction getCurrentState() {\n  return {\n    paymentLog: SuscriptionStore.getPaymentsLog(),\n    totalAmount: SuscriptionStore.getSumServices()\n  };\n}\n\nvar PaymentDone =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PaymentDone, _Component);\n\n  function PaymentDone(props) {\n    var _this;\n\n    _classCallCheck(this, PaymentDone);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PaymentDone).call(this, props));\n\n    _this._onChange = function () {\n      _this.setState(getCurrentState());\n\n      _this.filterStatusPayment();\n    };\n\n    _this.returnToListing = function () {\n      browserHistory.push('/ingresar/plataforma-bloqueada');\n    };\n\n    _this.goPlatform = function () {\n      browserHistory.push('/dashboard');\n    };\n\n    _this.filterStatusPayment = function () {\n      var paymentLog = _this.state.paymentLog;\n      var paidService = paymentLog.filter(function (service) {\n        return service['status'] === 'paid';\n      });\n      var declinedService = paymentLog.filter(function (service) {\n        return service['status'] === 'declined';\n      });\n\n      _this.setState(function (state) {\n        return {\n          paidService: paidService,\n          declinedService: declinedService,\n          requestInProgress: false\n        };\n      });\n    };\n\n    _this.state = _objectSpread({}, getCurrentState(), {\n      paidService: [],\n      declinedService: [],\n      requestInProgress: false\n    });\n    return _this;\n  }\n\n  _createClass(PaymentDone, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // Adds listener, when the Store changes, trigger the _onChange callback func\n      SuscriptionStore.addChangeListener(this._onChange);\n      SuscriptionActions.getPaymentLogs();\n    } // When the store changes, the state goes to it and pulls the updated data\n    // then sets it so the component renders\n\n  }, {\n    key: \"renderPaidServicesRows\",\n    // body table\n    value: function renderPaidServicesRows() {\n      var status = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'paid';\n      var servicesPaid = [];\n\n      if (status === 'paid') {\n        servicesPaid = _toConsumableArray(this.state.paidService);\n      }\n\n      if (servicesPaid.length > 0) {\n        var rows = servicesPaid.map(function (service) {\n          return React.createElement(\"tr\", {\n            key: service.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            },\n            __self: this\n          }, React.createElement(IconButton, {\n            icon: \"clock\",\n            tooltip: \"Pago est\\xE1 en proceso\",\n            className: \"aligned--icon\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86\n            },\n            __self: this\n          }), service.description), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            },\n            __self: this\n          }, service.period), React.createElement(\"td\", {\n            className: \"has-text-right\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            },\n            __self: this\n          }, formatCurrency(service.total)));\n        });\n        return React.createElement(\"tbody\", {\n          className: \"rows--gray\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, rows);\n      }\n    } // render the complete table\n\n  }, {\n    key: \"renderTablePaymentInProcess\",\n    value: function renderTablePaymentInProcess() {\n      var servicesPaid = _toConsumableArray(this.state.paidService);\n\n      var totalAmount = 0;\n      totalAmount = servicesPaid.reduce(function (accumulator, service) {\n        return Number(accumulator) + Number(service.total);\n      }, 0);\n      var table = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"columns is-centered is-vcentered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"paytable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Servicios\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Periodo\"), React.createElement(\"th\", {\n        className: \"has-text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Monto\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }))), this.renderPaidServicesRows()))), React.createElement(\"hr\", {\n        className: \"line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \" has-text-right line text-style--gray\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, formatCurrency(totalAmount), React.createElement(\"p\", {\n        className: \"has-text-right paragraph-info--iva\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"IVA incluido\")));\n      return table;\n    } // body table\n\n  }, {\n    key: \"renderUnpaidServiceRows\",\n    value: function renderUnpaidServiceRows() {\n      var status = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'declined';\n      var servicesDeclined = [];\n\n      if (status === 'declined') {\n        servicesDeclined = _toConsumableArray(this.state.declinedService);\n      }\n\n      if (servicesDeclined.length > 0) {\n        var rows = servicesDeclined.map(function (service) {\n          return React.createElement(\"tr\", {\n            key: service.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 149\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150\n            },\n            __self: this\n          }, React.createElement(IconButton, {\n            icon: \"clock\",\n            tooltip: \"Pago no efectuado\",\n            className: \"aligned--icon tooltip--iva\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 151\n            },\n            __self: this\n          }), service.description), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }, service.period), React.createElement(\"td\", {\n            className: \"has-text-right \",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159\n            },\n            __self: this\n          }, formatCurrency(service.total)));\n        });\n        return React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, rows);\n      }\n    } // render the complete table\n\n  }, {\n    key: \"renderTablePaymentUnpaid\",\n    value: function renderTablePaymentUnpaid() {\n      var servicesDeclined = _toConsumableArray(this.state.declinedService);\n\n      var totalAmount = 0;\n      totalAmount = servicesDeclined.reduce(function (accumulator, service) {\n        return Number(accumulator) + Number(service.total);\n      }, 0);\n      var table = React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"columns is-centered is-vcentered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"paytable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Servicios\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Periodo\"), React.createElement(\"th\", {\n        className: \"has-text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Monto\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }))), this.renderUnpaidServiceRows()))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \" has-text-right text-style\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, formatCurrency(totalAmount), React.createElement(\"p\", {\n        className: \"has-text-right paragraph-info--iva\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"IVA incluido\")));\n      return table;\n    } // Renders the main view\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var requestInProgress = this.state.requestInProgress;\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, requestInProgress ? React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"columns is-centered is-multiline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"headline--style is-uppercase has-text-centered \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"\\xA1Gracias por tu pago!\"), React.createElement(\"p\", {\n        className: \"has-text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Aqu\\xED tienes el detalle de tus pagos, te mandaremos un correo en caso de reactivaci\\xF3n de plataforma.\"), React.createElement(\"p\", {\n        className: \"subtitle-blocked\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"Servicios sin pagar\"), this.renderTablePaymentUnpaid()), React.createElement(\"div\", {\n        className: \"column is-6 column-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(Button, {\n        buttonStyle: \"primary-invert\",\n        type: \"submit\",\n        onClick: this.goPlatform,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"Ir a plataforma\"), React.createElement(\"p\", {\n        className: \"caption caption-margin has-text-centered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, ' ', \"Para dudas o aclaraciones comun\\xEDcate con nosotros al 800 9531 299.\"))));\n    }\n  }]);\n\n  return PaymentDone;\n}(Component);\n\nexport default PaymentDone;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/accountDisabled/paymentDone/index.js"],"names":["React","Component","Fragment","browserHistory","formatCurrency","Loading","IconButton","Button","SuscriptionActions","SuscriptionStore","getCurrentState","paymentLog","getPaymentsLog","totalAmount","getSumServices","PaymentDone","props","_onChange","setState","filterStatusPayment","returnToListing","push","goPlatform","state","paidService","filter","service","declinedService","requestInProgress","addChangeListener","getPaymentLogs","status","servicesPaid","length","rows","map","id","description","period","total","reduce","accumulator","Number","table","renderPaidServicesRows","servicesDeclined","renderUnpaidServiceRows","renderTablePaymentUnpaid"],"mappings":"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","sourcesContent":["// Libraries\nimport React, { Component, Fragment } from 'react'\nimport { browserHistory } from 'react-router'\nimport { formatCurrency } from 'utils'\n\n// Components\nimport Loading from 'shared/loading'\nimport IconButton from 'shared/iconButton'\nimport Button from 'shared/button'\n\n// Actions\nimport SuscriptionActions from 'actions/suscription'\n// Stores\nimport SuscriptionStore from 'stores/suscription'\n\nfunction getCurrentState () {\n  return {\n    paymentLog: SuscriptionStore.getPaymentsLog(),\n    totalAmount: SuscriptionStore.getSumServices()\n  }\n}\n\nclass PaymentDone extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      ...getCurrentState(),\n      paidService: [],\n      declinedService: [],\n      requestInProgress: false\n    }\n  }\n\n  componentDidMount () {\n    // Adds listener, when the Store changes, trigger the _onChange callback func\n    SuscriptionStore.addChangeListener(this._onChange)\n    SuscriptionActions.getPaymentLogs()\n  }\n\n  // When the store changes, the state goes to it and pulls the updated data\n  // then sets it so the component renders\n  _onChange = () => {\n    this.setState(getCurrentState())\n    this.filterStatusPayment()\n  }\n\n  // cancel the actual action and come back to platform blocked\n  returnToListing = () => {\n    browserHistory.push('/ingresar/plataforma-bloqueada')\n  }\n\n  goPlatform = () => {\n    browserHistory.push('/dashboard')\n  }\n\n  // filter payment status in paid or declined\n  filterStatusPayment = () => {\n    const { paymentLog } = this.state\n\n    const paidService = paymentLog.filter(\n      service => service['status'] === 'paid'\n    )\n    const declinedService = paymentLog.filter(\n      service => service['status'] === 'declined'\n    )\n    this.setState(state => ({\n      paidService: paidService,\n      declinedService: declinedService,\n      requestInProgress: false\n    }))\n  }\n\n  // body table\n  renderPaidServicesRows (status = 'paid') {\n    let servicesPaid = []\n\n    if (status === 'paid') {\n      servicesPaid = [...this.state.paidService]\n    }\n\n    if (servicesPaid.length > 0) {\n      const rows = servicesPaid.map(service => {\n        return (\n          <tr key={service.id}>\n            <td>\n              <IconButton\n                icon='clock'\n                tooltip='Pago está en proceso'\n                className='aligned--icon'\n              />\n              {service.description}\n            </td>\n            <td>{service.period}</td>\n            <td className='has-text-right'>{formatCurrency(service.total)}</td>\n          </tr>\n        )\n      })\n      return <tbody className='rows--gray'>{rows}</tbody>\n    }\n  }\n\n  // render the complete table\n  renderTablePaymentInProcess () {\n    let servicesPaid = [...this.state.paidService]\n    let totalAmount = 0\n\n    totalAmount = servicesPaid.reduce((accumulator, service) => {\n      return Number(accumulator) + Number(service.total)\n    }, 0)\n\n    const table = (\n      <div>\n        <div className='columns is-centered is-vcentered'>\n          <div className='column is-9'>\n            <table className='paytable'>\n              <thead>\n                <tr>\n                  <th>Servicios</th>\n                  <th>Periodo</th>\n                  <th className='has-text-right'>Monto</th>\n                  <th />\n                </tr>\n              </thead>\n              {this.renderPaidServicesRows()}\n            </table>\n          </div>\n        </div>\n        <hr className='line' />\n        <div className=' has-text-right line text-style--gray'>\n          {formatCurrency(totalAmount)}\n          <p className='has-text-right paragraph-info--iva'>IVA incluido</p>\n        </div>\n      </div>\n    )\n    return table\n  }\n\n  // body table\n  renderUnpaidServiceRows (status = 'declined') {\n    let servicesDeclined = []\n\n    if (status === 'declined') {\n      servicesDeclined = [...this.state.declinedService]\n    }\n\n    if (servicesDeclined.length > 0) {\n      const rows = servicesDeclined.map(service => {\n        return (\n          <tr key={service.id}>\n            <td>\n              <IconButton\n                icon='clock'\n                tooltip='Pago no efectuado'\n                className='aligned--icon tooltip--iva'\n              />\n              {service.description}\n            </td>\n            <td>{service.period}</td>\n            <td className='has-text-right '>{formatCurrency(service.total)}</td>\n          </tr>\n        )\n      })\n      return <tbody>{rows}</tbody>\n    }\n  }\n\n  // render the complete table\n  renderTablePaymentUnpaid () {\n    let servicesDeclined = [...this.state.declinedService]\n    let totalAmount = 0\n\n    totalAmount = servicesDeclined.reduce((accumulator, service) => {\n      return Number(accumulator) + Number(service.total)\n    }, 0)\n\n    const table = (\n      <Fragment>\n        <div className='columns is-centered is-vcentered'>\n          <div className='column is-12'>\n            <table className='paytable'>\n              <thead>\n                <tr>\n                  <th>Servicios</th>\n                  <th>Periodo</th>\n                  <th className='has-text-right'>Monto</th>\n                  <th />\n                </tr>\n              </thead>\n              {this.renderUnpaidServiceRows()}\n            </table>\n          </div>\n        </div>\n        <hr />\n        <div className=' has-text-right text-style'>\n          {formatCurrency(totalAmount)}\n          <p className='has-text-right paragraph-info--iva'>IVA incluido</p>\n        </div>\n      </Fragment>\n    )\n    return table\n  }\n\n  // Renders the main view\n  render () {\n    const { requestInProgress } = this.state\n    return (\n      <Fragment>\n        {requestInProgress ? (\n          <Loading />\n        ) : (\n          <div className='columns is-centered is-multiline'>\n            <div className='column is-9'>\n              <h1 className='headline--style is-uppercase has-text-centered '>\n                ¡Gracias por tu pago!\n              </h1>\n              <p className='has-text-left'>\n                Aquí tienes el detalle de tus pagos, te mandaremos un correo en\n                caso de reactivación de plataforma.\n              </p>\n              <p className='subtitle-blocked'>Servicios sin pagar</p>\n\n              {this.renderTablePaymentUnpaid()}\n            </div>\n            <div className='column is-6 column-center'>\n              <Button\n                buttonStyle='primary-invert'\n                type='submit'\n                onClick={this.goPlatform}\n              >\n                Ir a plataforma\n              </Button>\n\n              <p className='caption caption-margin has-text-centered'>\n                {' '}\n                Para dudas o aclaraciones comunícate con nosotros al 800 9531\n                299.\n              </p>\n            </div>\n          </div>\n        )}\n      </Fragment>\n    )\n  }\n}\n\nexport default PaymentDone\n"]},"metadata":{},"sourceType":"module"}