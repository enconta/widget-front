{"ast":null,"code":"import _defineProperty from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/shared/payrollCharges/overtimes/index.js\";\n// Libraries\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport accounting from 'accounting';\nimport classNames from 'classnames'; // Catalogs\n\nimport { OVERTIME_TYPE } from 'shared/catalogs';\nimport SelectField from 'shared/selectField';\nimport IconButton from 'shared/iconButton';\nimport TextField from 'shared/textField';\nimport Button from 'shared/button';\nimport { amountToCents, absolutify } from 'utils';\nvar requiredFields = new Set();\n\nvar Overtimes =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Overtimes, _Component);\n\n  function Overtimes() {\n    var _this;\n\n    _classCallCheck(this, Overtimes);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Overtimes).call(this));\n    _this.data = {\n      charges: [],\n      chargesSubtotal: 0\n    };\n    _this.state = Object.assign({}, _this.data);\n    return _this;\n  }\n\n  _createClass(Overtimes, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // Clears the stored requiredFields\n      requiredFields.clear();\n    }\n  }, {\n    key: \"exportOvertimes\",\n    value: function exportOvertimes() {\n      return this.state.charges.map(function (charge) {\n        return Object.assign({}, charge, {\n          taxed_amount_cents: amountToCents(charge.taxed_amount_cents),\n          exempt_amount_cents: amountToCents(charge.exempt_amount_cents)\n        });\n      });\n    } // Iterates over required fields and validates every one of them\n    // Then it returns true if all validations succeedeed, else false.\n\n  }, {\n    key: \"validateRequiredFields\",\n    value: function validateRequiredFields() {\n      var _this2 = this;\n\n      return _toConsumableArray(requiredFields) // Converts the Set() into an array\n      .filter(Boolean) // Filters the array from any falsy value\n      .map(function (form) {\n        return form.validate.call(_this2);\n      }) // Calls the validate() method on each form\n      .every(function (e) {\n        return e;\n      }); // Checks if all validations suceeded\n    } // Adds one overtime to this.state.charges\n\n  }, {\n    key: \"addItem\",\n    value: function addItem() {\n      var charges = this.state.charges;\n      charges.push({\n        kind: '',\n        category: '',\n        concept: '',\n        days: 0,\n        hours: 0,\n        taxed_amount_cents: 0,\n        exempt_amount_cents: 0,\n        total: 0\n      });\n      this.setState({\n        charges: charges\n      });\n    } // Persist category to charge @ index\n\n  }, {\n    key: \"onChangeKind\",\n    value: function onChangeKind(index, e) {\n      this.setState({\n        charges: update(this.state.charges, _defineProperty({}, index, {\n          kind: {\n            $set: e.target.value\n          }\n        }))\n      });\n    } // Persist category to charge @ index\n\n  }, {\n    key: \"onChangeCategory\",\n    value: function onChangeCategory(index, e) {\n      this.setState({\n        charges: update(this.state.charges, _defineProperty({}, index, {\n          category: {\n            $set: e.target.value\n          }\n        }))\n      });\n    } // Persist category to charge @ index\n\n  }, {\n    key: \"onChangeConcept\",\n    value: function onChangeConcept(index, e) {\n      this.setState({\n        charges: update(this.state.charges, _defineProperty({}, index, {\n          concept: {\n            $set: e.target.value\n          }\n        }))\n      });\n    } // Persist category to charge @ index\n\n  }, {\n    key: \"onChangeDays\",\n    value: function onChangeDays(index, e) {\n      this.setState({\n        charges: update(this.state.charges, _defineProperty({}, index, {\n          days: {\n            $set: e.target.value\n          }\n        }))\n      });\n    } // Persist category to charge @ index\n\n  }, {\n    key: \"onChangeHours\",\n    value: function onChangeHours(index, e) {\n      this.setState({\n        charges: update(this.state.charges, _defineProperty({}, index, {\n          hours: {\n            $set: e.target.value\n          }\n        }))\n      });\n    } // Persist category to charge @ index\n\n  }, {\n    key: \"onChangeTaxedAmount\",\n    value: function onChangeTaxedAmount(index, e) {\n      // Trigger updateSubtotals after state is set\n      this.setState({\n        charges: update(this.state.charges, _defineProperty({}, index, {\n          taxed_amount_cents: {\n            $set: e.target.value\n          }\n        }))\n      }, this.updateSubtotals);\n    } // Persist category to charge @ index\n\n  }, {\n    key: \"onChangeExemptAmount\",\n    value: function onChangeExemptAmount(index, e) {\n      // Trigger updateSubtotals after state is set\n      this.setState({\n        charges: update(this.state.charges, _defineProperty({}, index, {\n          exempt_amount_cents: {\n            $set: e.target.value\n          }\n        }))\n      }, this.updateSubtotals);\n    } // Format price as $ 1,234.56\n\n  }, {\n    key: \"formatPrice\",\n    value: function formatPrice(index, field) {\n      var formatted = accounting.formatMoney(absolutify(this.state.charges[index][field]), '$ ');\n      this.setState({\n        charges: update(this.state.charges, _defineProperty({}, index, _defineProperty({}, field, {\n          $set: formatted\n        })))\n      });\n    } // Parse formatted price\n\n  }, {\n    key: \"unformatPrice\",\n    value: function unformatPrice(index, field) {\n      var unformatted = absolutify(this.state.charges[index][field]);\n      this.setState({\n        charges: update(this.state.charges, _defineProperty({}, index, _defineProperty({}, field, {\n          $set: unformatted\n        })))\n      });\n    } // Update subtotal\n\n  }, {\n    key: \"updateSubtotals\",\n    value: function updateSubtotals() {\n      // Iterates over every charge and acumulativamente adds it and assigns the result to subtotal\n      var chargesSubtotal = this.state.charges.reduce(function (acc, charge) {\n        return acc + absolutify(charge.taxed_amount_cents) + absolutify(charge.exempt_amount_cents);\n      }, 0); // Update parent totals and subtotals\n\n      this.props.updatePayrollTotals(this.props.keyId, chargesSubtotal);\n      this.setState({\n        chargesSubtotal: chargesSubtotal.toFixed(2)\n      });\n    } // Delete an overtime from this.state.charges\n\n  }, {\n    key: \"deleteItem\",\n    value: function deleteItem(index) {\n      requiredFields.clear();\n      var charges = this.state.charges;\n      charges.splice(index, 1);\n      this.setState({\n        charges: charges\n      }, this.updateSubtotals);\n    } // Items\n\n  }, {\n    key: \"renderItemList\",\n    value: function renderItemList() {\n      var _this3 = this;\n\n      var chargeList = null;\n      var charges = this.state.charges;\n\n      if (charges.length > 0) {\n        chargeList = charges.map(function (charge, index) {\n          return React.createElement(\"tr\", {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 193\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            className: \"is-one-quarter\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194\n            },\n            __self: this\n          }, React.createElement(SelectField, {\n            placeholder: \"Selecciona una opci\\xF3n\",\n            options: OVERTIME_TYPE,\n            value: charge.kind,\n            onChange: _this3.onChangeKind.bind(_this3, index),\n            required: true,\n            onValidationError: _this3.props.onValidationError,\n            name: \"Tipo de tiempo extra\",\n            ref: function ref(r) {\n              return requiredFields.add(r);\n            },\n            showId: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 207\n            },\n            __self: this\n          }, React.createElement(TextField, {\n            value: charge.category,\n            onChange: _this3.onChangeCategory.bind(_this3, index),\n            required: true,\n            onValidationError: _this3.props.onValidationError,\n            name: \"Categor\\xEDa personalizada de tiempo extra\",\n            ref: function ref(r) {\n              return requiredFields.add(r);\n            },\n            selectAllOnFocus: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 208\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 218\n            },\n            __self: this\n          }, React.createElement(TextField, {\n            value: charge.concept,\n            onChange: _this3.onChangeConcept.bind(_this3, index),\n            required: true,\n            onValidationError: _this3.props.onValidationError,\n            name: \"Concepto de tiempo extra\",\n            ref: function ref(r) {\n              return requiredFields.add(r);\n            },\n            selectAllOnFocus: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 219\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 229\n            },\n            __self: this\n          }, React.createElement(TextField, {\n            type: \"number\",\n            value: charge.days,\n            onChange: _this3.onChangeDays.bind(_this3, index),\n            required: true,\n            onValidationError: _this3.props.onValidationError,\n            name: \"D\\xEDas de tiempo extra\",\n            ref: function ref(r) {\n              return requiredFields.add(r);\n            },\n            selectAllOnFocus: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 230\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 241\n            },\n            __self: this\n          }, React.createElement(TextField, {\n            type: \"number\",\n            value: charge.hours,\n            onChange: _this3.onChangeHours.bind(_this3, index),\n            required: true,\n            onValidationError: _this3.props.onValidationError,\n            name: \"Horas de tiempo extra\",\n            ref: function ref(r) {\n              return requiredFields.add(r);\n            },\n            selectAllOnFocus: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 242\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 253\n            },\n            __self: this\n          }, React.createElement(TextField, {\n            value: charge.taxed_amount_cents,\n            onChange: _this3.onChangeTaxedAmount.bind(_this3, index),\n            onBlur: _this3.formatPrice.bind(_this3, index, 'taxed_amount_cents'),\n            onFocus: _this3.unformatPrice.bind(_this3, index, 'taxed_amount_cents'),\n            required: true,\n            onValidationError: _this3.props.onValidationError,\n            name: \"Importe gravado de tiempo extra\",\n            ref: function ref(r) {\n              return requiredFields.add(r);\n            },\n            selectAllOnFocus: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 254\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 274\n            },\n            __self: this\n          }, React.createElement(TextField, {\n            value: charge.exempt_amount_cents,\n            onChange: _this3.onChangeExemptAmount.bind(_this3, index),\n            onBlur: _this3.formatPrice.bind(_this3, index, 'exempt_amount_cents'),\n            onFocus: _this3.unformatPrice.bind(_this3, index, 'exempt_amount_cents'),\n            required: true,\n            onValidationError: _this3.props.onValidationError,\n            name: \"Importe exento de tiempo extra\",\n            ref: function ref(r) {\n              return requiredFields.add(r);\n            },\n            selectAllOnFocus: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 275\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 295\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            className: \"table--actions\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 296\n            },\n            __self: this\n          }, React.createElement(IconButton, {\n            icon: \"delete\",\n            onClick: _this3.deleteItem.bind(_this3, index),\n            tooltip: \"Borrar\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 297\n            },\n            __self: this\n          }))));\n        });\n      }\n\n      return chargeList;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"subheader-green\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, \"Tiempo Extra\"), React.createElement(Button, {\n        buttonStyle: \"primaryLink\",\n        icon: \"plus\",\n        className: classNames({\n          'is-hidden': this.state.charges.length >= 1\n        }),\n        onClick: this.addItem.bind(this),\n        style: {\n          marginBottom: '1.5rem'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"Agregar Tiempo Extra\"), React.createElement(\"table\", {\n        className: classNames('table', {\n          'is-hidden': this.state.charges.length < 1\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, \"Tipo\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, \"Categor\\xEDa personalizada (Min 4 d\\xEDgitos)\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, \"Concepto\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, \"D\\xEDas\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, \"Horas\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, \"Importe Gravado\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, \"Importe Exento\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, \"Acciones\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, this.renderItemList()), React.createElement(Button, {\n        buttonStyle: \"primaryLink\",\n        icon: \"plus\",\n        className: classNames({\n          'is-hidden': this.state.charges.length < 1\n        }),\n        onClick: this.addItem.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, \"Agregar Tiempo Extra\"), React.createElement(\"tfoot\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        colSpan: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, \"Subtotal:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, accounting.formatMoney(this.state.chargesSubtotal, '$ ')), React.createElement(\"td\", {\n        colSpan: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Overtimes;\n}(Component);\n\nOvertimes.propTypes = {\n  onValidationError: PropTypes.func,\n  updatePayrollTotals: PropTypes.func,\n  keyId: PropTypes.string\n};\nOvertimes.defaultProps = {\n  onValidationError: function onValidationError() {}\n};\nexport default Overtimes;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/newInvoice/shared/payrollCharges/overtimes/index.js"],"names":["React","Component","PropTypes","update","accounting","classNames","OVERTIME_TYPE","SelectField","IconButton","TextField","Button","amountToCents","absolutify","requiredFields","Set","Overtimes","data","charges","chargesSubtotal","state","Object","assign","clear","map","charge","taxed_amount_cents","exempt_amount_cents","filter","Boolean","form","validate","call","every","e","push","kind","category","concept","days","hours","total","setState","index","$set","target","value","updateSubtotals","field","formatted","formatMoney","unformatted","reduce","acc","props","updatePayrollTotals","keyId","toFixed","splice","chargeList","length","onChangeKind","bind","onValidationError","r","add","onChangeCategory","onChangeConcept","onChangeDays","onChangeHours","onChangeTaxedAmount","formatPrice","unformatPrice","onChangeExemptAmount","deleteItem","addItem","marginBottom","renderItemList","propTypes","func","string","defaultProps"],"mappings":"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","sourcesContent":["// Libraries\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport update from 'immutability-helper'\nimport accounting from 'accounting'\nimport classNames from 'classnames'\n\n// Catalogs\nimport { OVERTIME_TYPE } from 'shared/catalogs'\nimport SelectField from 'shared/selectField'\nimport IconButton from 'shared/iconButton'\nimport TextField from 'shared/textField'\nimport Button from 'shared/button'\nimport { amountToCents, absolutify } from 'utils'\n\nconst requiredFields = new Set()\n\nclass Overtimes extends Component {\n  constructor () {\n    super()\n    this.data = {\n      charges: [],\n      chargesSubtotal: 0\n    }\n    this.state = Object.assign({}, this.data)\n  }\n\n  componentWillUnmount () {\n    // Clears the stored requiredFields\n    requiredFields.clear()\n  }\n\n  exportOvertimes () {\n    return this.state.charges.map(charge =>\n      Object.assign({}, charge, {\n        taxed_amount_cents: amountToCents(charge.taxed_amount_cents),\n        exempt_amount_cents: amountToCents(charge.exempt_amount_cents)\n      })\n    )\n  }\n\n  // Iterates over required fields and validates every one of them\n  // Then it returns true if all validations succeedeed, else false.\n  validateRequiredFields () {\n    return [...requiredFields] // Converts the Set() into an array\n      .filter(Boolean) // Filters the array from any falsy value\n      .map(form => form.validate.call(this)) // Calls the validate() method on each form\n      .every(e => e) // Checks if all validations suceeded\n  }\n\n  // Adds one overtime to this.state.charges\n  addItem () {\n    let { charges } = this.state\n    charges.push({\n      kind: '',\n      category: '',\n      concept: '',\n      days: 0,\n      hours: 0,\n      taxed_amount_cents: 0,\n      exempt_amount_cents: 0,\n      total: 0\n    })\n    this.setState({ charges })\n  }\n\n  // Persist category to charge @ index\n  onChangeKind (index, e) {\n    this.setState({\n      charges: update(this.state.charges, {\n        [index]: { kind: { $set: e.target.value } }\n      })\n    })\n  }\n\n  // Persist category to charge @ index\n  onChangeCategory (index, e) {\n    this.setState({\n      charges: update(this.state.charges, {\n        [index]: { category: { $set: e.target.value } }\n      })\n    })\n  }\n\n  // Persist category to charge @ index\n  onChangeConcept (index, e) {\n    this.setState({\n      charges: update(this.state.charges, {\n        [index]: { concept: { $set: e.target.value } }\n      })\n    })\n  }\n\n  // Persist category to charge @ index\n  onChangeDays (index, e) {\n    this.setState({\n      charges: update(this.state.charges, {\n        [index]: { days: { $set: e.target.value } }\n      })\n    })\n  }\n\n  // Persist category to charge @ index\n  onChangeHours (index, e) {\n    this.setState({\n      charges: update(this.state.charges, {\n        [index]: { hours: { $set: e.target.value } }\n      })\n    })\n  }\n\n  // Persist category to charge @ index\n  onChangeTaxedAmount (index, e) {\n    // Trigger updateSubtotals after state is set\n    this.setState(\n      {\n        charges: update(this.state.charges, {\n          [index]: { taxed_amount_cents: { $set: e.target.value } }\n        })\n      },\n      this.updateSubtotals\n    )\n  }\n\n  // Persist category to charge @ index\n  onChangeExemptAmount (index, e) {\n    // Trigger updateSubtotals after state is set\n    this.setState(\n      {\n        charges: update(this.state.charges, {\n          [index]: { exempt_amount_cents: { $set: e.target.value } }\n        })\n      },\n      this.updateSubtotals\n    )\n  }\n\n  // Format price as $ 1,234.56\n  formatPrice (index, field) {\n    let formatted = accounting.formatMoney(\n      absolutify(this.state.charges[index][field]),\n      '$ '\n    )\n    this.setState({\n      charges: update(this.state.charges, {\n        [index]: { [field]: { $set: formatted } }\n      })\n    })\n  }\n\n  // Parse formatted price\n  unformatPrice (index, field) {\n    let unformatted = absolutify(this.state.charges[index][field])\n    this.setState({\n      charges: update(this.state.charges, {\n        [index]: { [field]: { $set: unformatted } }\n      })\n    })\n  }\n\n  // Update subtotal\n  updateSubtotals () {\n    // Iterates over every charge and acumulativamente adds it and assigns the result to subtotal\n    let chargesSubtotal = this.state.charges.reduce((acc, charge) => {\n      return (\n        acc +\n        absolutify(charge.taxed_amount_cents) +\n        absolutify(charge.exempt_amount_cents)\n      )\n    }, 0)\n    // Update parent totals and subtotals\n    this.props.updatePayrollTotals(this.props.keyId, chargesSubtotal)\n    this.setState({\n      chargesSubtotal: chargesSubtotal.toFixed(2)\n    })\n  }\n\n  // Delete an overtime from this.state.charges\n  deleteItem (index) {\n    requiredFields.clear()\n    let { charges } = this.state\n    charges.splice(index, 1)\n    this.setState({ charges }, this.updateSubtotals)\n  }\n\n  // Items\n  renderItemList () {\n    let chargeList = null\n    let { charges } = this.state\n    if (charges.length > 0) {\n      chargeList = charges.map((charge, index) => {\n        return (\n          <tr key={index}>\n            <td className='is-one-quarter'>\n              <SelectField\n                placeholder='Selecciona una opción'\n                options={OVERTIME_TYPE}\n                value={charge.kind}\n                onChange={this.onChangeKind.bind(this, index)}\n                required\n                onValidationError={this.props.onValidationError}\n                name='Tipo de tiempo extra'\n                ref={r => requiredFields.add(r)}\n                showId\n              />\n            </td>\n            <td>\n              <TextField\n                value={charge.category}\n                onChange={this.onChangeCategory.bind(this, index)}\n                required\n                onValidationError={this.props.onValidationError}\n                name='Categoría personalizada de tiempo extra'\n                ref={r => requiredFields.add(r)}\n                selectAllOnFocus\n              />\n            </td>\n            <td>\n              <TextField\n                value={charge.concept}\n                onChange={this.onChangeConcept.bind(this, index)}\n                required\n                onValidationError={this.props.onValidationError}\n                name='Concepto de tiempo extra'\n                ref={r => requiredFields.add(r)}\n                selectAllOnFocus\n              />\n            </td>\n            <td>\n              <TextField\n                type='number'\n                value={charge.days}\n                onChange={this.onChangeDays.bind(this, index)}\n                required\n                onValidationError={this.props.onValidationError}\n                name='Días de tiempo extra'\n                ref={r => requiredFields.add(r)}\n                selectAllOnFocus\n              />\n            </td>\n            <td>\n              <TextField\n                type='number'\n                value={charge.hours}\n                onChange={this.onChangeHours.bind(this, index)}\n                required\n                onValidationError={this.props.onValidationError}\n                name='Horas de tiempo extra'\n                ref={r => requiredFields.add(r)}\n                selectAllOnFocus\n              />\n            </td>\n            <td>\n              <TextField\n                value={charge.taxed_amount_cents}\n                onChange={this.onChangeTaxedAmount.bind(this, index)}\n                onBlur={this.formatPrice.bind(\n                  this,\n                  index,\n                  'taxed_amount_cents'\n                )}\n                onFocus={this.unformatPrice.bind(\n                  this,\n                  index,\n                  'taxed_amount_cents'\n                )}\n                required\n                onValidationError={this.props.onValidationError}\n                name='Importe gravado de tiempo extra'\n                ref={r => requiredFields.add(r)}\n                selectAllOnFocus\n              />\n            </td>\n            <td>\n              <TextField\n                value={charge.exempt_amount_cents}\n                onChange={this.onChangeExemptAmount.bind(this, index)}\n                onBlur={this.formatPrice.bind(\n                  this,\n                  index,\n                  'exempt_amount_cents'\n                )}\n                onFocus={this.unformatPrice.bind(\n                  this,\n                  index,\n                  'exempt_amount_cents'\n                )}\n                required\n                onValidationError={this.props.onValidationError}\n                name='Importe exento de tiempo extra'\n                ref={r => requiredFields.add(r)}\n                selectAllOnFocus\n              />\n            </td>\n            <td>\n              <p className='table--actions'>\n                <IconButton\n                  icon='delete'\n                  onClick={this.deleteItem.bind(this, index)}\n                  tooltip='Borrar'\n                />\n              </p>\n            </td>\n          </tr>\n        )\n      })\n    }\n    return chargeList\n  }\n\n  render () {\n    return (\n      <div>\n        <h3 className='subheader-green'>Tiempo Extra</h3>\n        <Button\n          buttonStyle='primaryLink'\n          icon='plus'\n          className={classNames({\n            'is-hidden': this.state.charges.length >= 1\n          })}\n          onClick={this.addItem.bind(this)}\n          style={{ marginBottom: '1.5rem' }}\n        >\n          Agregar Tiempo Extra\n        </Button>\n        <table\n          className={classNames('table', {\n            'is-hidden': this.state.charges.length < 1\n          })}\n        >\n          <thead>\n            <tr>\n              <th>Tipo</th>\n              <th>Categoría personalizada (Min 4 dígitos)</th>\n              <th>Concepto</th>\n              <th>Días</th>\n              <th>Horas</th>\n              <th>Importe Gravado</th>\n              <th>Importe Exento</th>\n              <th>Acciones</th>\n            </tr>\n          </thead>\n          <tbody>{this.renderItemList()}</tbody>\n          <Button\n            buttonStyle='primaryLink'\n            icon='plus'\n            className={classNames({\n              'is-hidden': this.state.charges.length < 1\n            })}\n            onClick={this.addItem.bind(this)}\n          >\n            Agregar Tiempo Extra\n          </Button>\n          <tfoot>\n            <tr>\n              <td colSpan={5} />\n              <td>Subtotal:</td>\n              <td>\n                {accounting.formatMoney(this.state.chargesSubtotal, '$ ')}\n              </td>\n              <td colSpan={2} />\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    )\n  }\n}\n\nOvertimes.propTypes = {\n  onValidationError: PropTypes.func,\n  updatePayrollTotals: PropTypes.func,\n  keyId: PropTypes.string\n}\n\nOvertimes.defaultProps = {\n  onValidationError: () => {}\n}\n\nexport default Overtimes\n"]},"metadata":{},"sourceType":"module"}