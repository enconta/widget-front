{"ast":null,"code":"import _defineProperty from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/inventories/products/index.js\";\n// Libraries\nimport React, { Component, Fragment } from 'react';\nimport { parseProducts, parseUnits, handleInputs } from 'utils';\nimport moment from 'moment';\nimport { Async } from 'react-select';\nimport classNames from 'classnames'; // Components\n\nimport Filter from 'shared/filter';\nimport RadioOptions from 'shared/filter/radioOptions.js';\nimport SelectOption from 'shared/filter/selectOption.js';\nimport RangeOption from 'shared/filter/rangeOption.js';\nimport Paginator from 'shared/paginator';\nimport InventoryCard from 'shared/inventoryCard';\nimport Button from 'shared/button';\nimport TextField from 'shared/textField';\nimport SwitchButton from 'shared/switchButton'; // Actions\n\nimport InvoicesActions from 'actions/invoices';\nimport NotificationsActions from 'actions/notifications';\nimport InventoriesActions from 'actions/inventories'; // Stores\n\nimport InvoicesStore from 'stores/invoices';\nimport InventoriesStore from 'stores/inventories'; // Constants\n\nvar requiredFields = new Set();\n\nvar _updateProduct = function updateProduct(_ref) {\n  var name = _ref.name,\n      description = _ref.description,\n      sku = _ref.sku,\n      unitCode = _ref.unit_code,\n      productCode = _ref.prod_serv_code,\n      active = _ref.active;\n  return {\n    product: {\n      name: name,\n      description: description,\n      sku: sku,\n      unit_code: !unitCode ? '' : unitCode.value,\n      prod_serv_code: !productCode ? '' : productCode.value,\n      active: active\n    }\n  };\n};\n\nexport { _updateProduct as updateProduct };\n\nfunction getCurrentState() {\n  return {\n    products: InventoriesStore.getProducts(),\n    totalItems: InventoriesStore.getTotalItems(),\n    totalPages: InventoriesStore.getTotalPages(),\n    firstId: InventoriesStore.getFirstId()\n  };\n}\n\nvar Products =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Products, _Component);\n\n  function Products() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Products);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Products)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = _objectSpread({\n      displayFilters: false,\n      radioOptions: [],\n      configProductSelectOptions: {},\n      configUnitSelectOptions: {},\n      startRange: '',\n      endRange: '',\n      searchInfo: '',\n      name: '',\n      description: '',\n      id: '',\n      active: true,\n      prod_serv_code: '',\n      sku: '',\n      unit_code: '',\n      isSelected: true,\n      stock: ''\n    }, getCurrentState());\n\n    _this._onChange = function () {\n      var state = getCurrentState();\n\n      _this.setState(state);\n    };\n\n    _this.initFilteroptions = function () {\n      var radioOptions = [{\n        value: 'active',\n        handleRadio: _this.handleRadio,\n        checked: false,\n        label: 'Activo'\n      }, {\n        value: 'inactive',\n        handleRadio: _this.handleRadio,\n        checked: false,\n        label: 'Inactivo'\n      }, {\n        value: 'all',\n        handleRadio: _this.handleRadio,\n        checked: true,\n        label: 'Todos'\n      }];\n\n      _this.setState({\n        radioOptions: radioOptions\n      });\n    };\n\n    _this.initProductSelectOptions = function () {\n      var configProductSelectOptions = {\n        placeholder: 'Código de producto',\n        loadingPlaceholder: 'Buscando',\n        searchText: 'Teclear el nombre del producto',\n        noResultsText: 'No encontrado',\n        options: _this.getProducts,\n        value: '',\n        handleSelect: _this.onChangeProductType\n      };\n\n      _this.setState({\n        configProductSelectOptions: configProductSelectOptions\n      });\n    };\n\n    _this.initUnitSelectOptions = function () {\n      var configUnitSelectOptions = {\n        placeholder: 'Código de unidad',\n        loadingPlaceholder: 'Buscando',\n        searchText: 'Teclear el nombre de la unidad',\n        noResultsText: 'No encontrado',\n        options: _this.getUnits,\n        value: '',\n        handleSelect: _this.onChangeUnitType\n      };\n\n      _this.setState({\n        configUnitSelectOptions: configUnitSelectOptions\n      });\n    };\n\n    _this.handleDisplayFilters = function () {\n      _this.setState(function (state) {\n        return {\n          displayFilters: !state.displayFilters\n        };\n      });\n    };\n\n    _this.handleRadio = function (event) {\n      var value = event.target.value;\n\n      _this.setState(function (state) {\n        var radioOptions = _toConsumableArray(state.radioOptions);\n\n        radioOptions.map(function (option) {\n          return option.value === value ? option.checked = true : option.checked = false;\n        });\n        return {\n          radioOptions: radioOptions\n        };\n      });\n    };\n\n    _this.onChangeProductType = function (product) {\n      _this.setState(function (state) {\n        return {\n          configProductSelectOptions: _objectSpread({}, state.configProductSelectOptions, {\n            value: product\n          })\n        };\n      });\n    };\n\n    _this.onChangeProductCode = function (product) {\n      _this.setState({\n        prod_serv_code: product\n      });\n    };\n\n    _this.onChangeUnitCode = function (product) {\n      _this.setState({\n        unit_code: product\n      });\n    };\n\n    _this.onChangeUnitType = function (unitCode) {\n      _this.setState(function (state) {\n        return {\n          configUnitSelectOptions: _objectSpread({}, state.configUnitSelectOptions, {\n            value: unitCode\n          })\n        };\n      });\n    };\n\n    _this.handleRanges = function (range) {\n      return function (event) {\n        var value = typeof event === 'object' && event instanceof moment ? event : event.target.value;\n\n        _this.setState(_defineProperty({}, range, value));\n      };\n    };\n\n    _this.handleSearchbar = function (event) {\n      var value = event.target.value;\n\n      _this.setState({\n        searchInfo: value\n      });\n    };\n\n    _this.getProducts = function (value) {\n      if (typeof value !== 'undefined' && value.length === 0) {\n        return Promise.resolve(InvoicesStore.getProducts()).then(function (products) {\n          return {\n            options: parseProducts(products)\n          };\n        });\n      }\n\n      return InvoicesActions.setProductsCode({\n        full_text: value\n      }).then(function (data) {\n        return {\n          options: parseProducts(data)\n        };\n      }).catch(function (error) {\n        NotificationsActions.error(error);\n      });\n    };\n\n    _this.getUnits = function (value) {\n      if (typeof value !== 'undefined' && value.length === 0) {\n        return Promise.resolve(InvoicesStore.getUnits()).then(function (units) {\n          return {\n            options: parseUnits(units)\n          };\n        });\n      }\n\n      return InvoicesActions.setUnitsCode({\n        full_text: value\n      }).then(function (data) {\n        return {\n          options: parseUnits(data)\n        };\n      }).catch(function (error) {\n        NotificationsActions.error(error);\n      });\n    };\n\n    _this.clearRadioOptions = function () {\n      _this.initFilteroptions();\n    };\n\n    _this.clearProductSelectOptions = function () {\n      _this.initProductSelectOptions();\n    };\n\n    _this.clearUnitSelectOptions = function () {\n      _this.initUnitSelectOptions();\n    };\n\n    _this.clearRanges = function () {\n      _this.setState({\n        startRange: '',\n        endRange: ''\n      });\n    };\n\n    _this.clearAllFilters = function () {\n      _this.clearRadioOptions();\n\n      _this.clearProductSelectOptions();\n\n      _this.clearUnitSelectOptions();\n\n      _this.clearRanges();\n    };\n\n    _this.submitSearch = function () {\n      var _this$state = _this.state,\n          startRange = _this$state.startRange,\n          endRange = _this$state.endRange,\n          searchInfo = _this$state.searchInfo;\n      var value = _this.state.prod_serv_code.value;\n      var active = _this.state.radioOptions[0].checked === true ? true : _this.state.radioOptions[1].checked === true ? false : '';\n      var filters = {\n        prod_serv_code: value,\n        name_or_sku: searchInfo,\n        'stock_range[from]': startRange,\n        'stock_range[to]': endRange,\n        active: active\n      };\n      var params = Object.assign({}, _this.props.location.query, filters);\n      InventoriesActions.setProducts(params);\n\n      _this.setState(function (prevState) {\n        return {\n          filters: Object.assign({}, prevState.filters, params)\n        };\n      });\n\n      _this.handleDisplayFilters();\n    };\n\n    _this.setCodes = function () {\n      var prodServCode = _this.state.prod_serv_code;\n      var unitCode = _this.state.unit_code;\n\n      if (prodServCode) {\n        _this.setState({\n          prod_serv_code: {\n            label: prodServCode\n          }\n        });\n\n        _this.setState({\n          unit_code: {\n            label: unitCode\n          }\n        });\n      }\n    };\n\n    _this.selectCard = function (id) {\n      var product = _toConsumableArray(_this.state.products);\n\n      var selectedProduct = product.find(function (item) {\n        return item.id === id;\n      });\n      var productId = selectedProduct.id,\n          active = selectedProduct.active,\n          description = selectedProduct.description,\n          name = selectedProduct.name,\n          prodServCode = selectedProduct.prod_serv_code,\n          sku = selectedProduct.sku,\n          unitCode = selectedProduct.unit_code,\n          stock = selectedProduct.stock;\n\n      _this.setState({\n        name: name,\n        id: productId,\n        active: active,\n        description: description,\n        prod_serv_code: prodServCode,\n        sku: sku,\n        unit_code: unitCode,\n        stock: stock\n      });\n\n      product.forEach(function (item, index) {\n        if (item.id === id) {\n          product[index].isSelected = true;\n        } else {\n          product[index].isSelected = false;\n        }\n      });\n\n      _this.setState({\n        products: product\n      });\n\n      _this.setCodes();\n    };\n\n    _this.deleteProduct = function (id) {\n      InventoriesActions.deleteProduct(id).then(function () {\n        var firstId = InventoriesStore.getFirstId();\n        NotificationsActions.success('Producto eliminado correctamente');\n\n        _this.selectCard(firstId);\n      }).catch(function (error) {\n        NotificationsActions.error(error);\n      });\n    };\n\n    _this.handleActiveProduct = function () {\n      _this.setState(function (state) {\n        return {\n          active: !state.active\n        };\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Products, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      InventoriesStore.addChangeListener(this._onChange);\n      this.initFilteroptions();\n      this.initProductSelectOptions();\n      this.initUnitSelectOptions();\n      InventoriesActions.setProducts().then(function () {\n        var firstId = _this2.state.firstId;\n        if (!firstId) return;\n\n        _this2.selectCard(firstId);\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var params = Object.assign({}, this.props.location.query);\n\n      if (this.props.location.search !== prevProps.location.search) {\n        InventoriesActions.setProducts(params);\n      }\n    } // Removes the listener to avoid memory leaks\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      InventoriesStore.removeChangeListener(this._onChange);\n      InvoicesStore.removeChangeListener(this._onChange);\n      requiredFields.clear();\n    } // Iterates over required fields and validates every one of them\n    // Then it returns true if all validations succeed, else false.\n    // Converts the Set() into an array\n    // Filters the array from any falsy value\n    // Calls the validate() method on each form\n    // Checks if all validations suceeded\n\n  }, {\n    key: \"validateAll\",\n    value: function validateAll() {\n      return _toConsumableArray(requiredFields).filter(Boolean).map(function (form) {\n        return form.validate();\n      }).every(function (e) {\n        return e;\n      });\n    }\n  }, {\n    key: \"updateProduct\",\n    // Updates a product\n    value: function updateProduct(id) {\n      if (this.validateAll()) {\n        InventoriesActions.updateProduct(id, _updateProduct(this.state)).then(function () {\n          NotificationsActions.success('Producto guardado correctamente');\n        }).catch(function (error) {\n          NotificationsActions.error(error);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n\n    /* TODO: In the property unit_code, back has to return the name of the unit,\n    instead of the code */\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          displayFilters = _this$state2.displayFilters,\n          radioOptions = _this$state2.radioOptions,\n          configProductSelectOptions = _this$state2.configProductSelectOptions,\n          configUnitSelectOptions = _this$state2.configUnitSelectOptions,\n          startRange = _this$state2.startRange,\n          endRange = _this$state2.endRange,\n          searchInfo = _this$state2.searchInfo,\n          products = _this$state2.products,\n          totalItems = _this$state2.totalItems,\n          totalPages = _this$state2.totalPages,\n          name = _this$state2.name,\n          description = _this$state2.description,\n          unitCode = _this$state2.unit_code,\n          productCode = _this$state2.prod_serv_code,\n          sku = _this$state2.sku,\n          active = _this$state2.active,\n          id = _this$state2.id,\n          stock = _this$state2.stock;\n      var filters = [React.createElement(RadioOptions, {\n        options: radioOptions,\n        mainLabel: \"Estatus\",\n        clear: this.clearRadioOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422\n        },\n        __self: this\n      }), React.createElement(SelectOption, {\n        regularSelect: false,\n        configAutoComplete: configProductSelectOptions,\n        mainLabel: \"C\\xF3digo de producto\",\n        clear: this.clearProductSelectOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }), React.createElement(SelectOption, {\n        regularSelect: false,\n        configAutoComplete: configUnitSelectOptions,\n        mainLabel: \"C\\xF3digo de unidad\",\n        clear: this.clearUnitSelectOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }), React.createElement(RangeOption, {\n        mainLabel: \"Existencias\",\n        handleRanges: this.handleRanges,\n        startRange: startRange,\n        endRange: endRange,\n        clear: this.clearRanges,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      })];\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448\n        },\n        __self: this\n      }, React.createElement(Filter, {\n        displayFilters: displayFilters,\n        handleDisplayFilters: this.handleDisplayFilters,\n        filters: filters,\n        clearAll: this.clearAllFilters,\n        handleSearch: this.handleSearchbar,\n        searchValue: searchInfo,\n        totalRecords: totalItems,\n        submitSearch: this.submitSearch,\n        searchBarPlaceHolder: 'Buscar por Nombre o SKU',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"products-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461\n        },\n        __self: this\n      }, products.length === 0 ? React.createElement(\"p\", {\n        className: \"filter__no-elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463\n        },\n        __self: this\n      }, \"No se encontraron elementos\") : React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-5 products--padding products--border-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466\n        },\n        __self: this\n      }, React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467\n        },\n        __self: this\n      }, products.map(function (_ref2, index) {\n        var isSelected = _ref2.isSelected,\n            stock = _ref2.stock,\n            name = _ref2.name,\n            sku = _ref2.sku,\n            unitCode = _ref2.unit_code,\n            id = _ref2.id,\n            active = _ref2.active;\n        return React.createElement(InventoryCard, {\n          key: index,\n          outline: isSelected,\n          selectCard: function selectCard() {\n            return _this3.selectCard(id);\n          },\n          unit: active && stock,\n          text: name,\n          body: sku,\n          type: unitCode === 'H87' && active ? 'Piezas' : !active && 'Inactivo',\n          inactive: !active,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 481\n          },\n          __self: this\n        });\n      })), React.createElement(Paginator, {\n        totalPages: totalPages,\n        location: this.props.location,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"column is-7 products--margin-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"products--text-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 506\n        },\n        __self: this\n      }, \"Detalle del producto\")), React.createElement(\"div\", {\n        className: \"column flex-end\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      }, React.createElement(SwitchButton, {\n        handleSwitch: this.handleActiveProduct,\n        checked: active,\n        text: active ? 'Activo' : 'Inactivo',\n        active: active,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: 'Nombre del Producto',\n        value: name,\n        onChange: handleInputs(this, 'name'),\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: 'Descripción',\n        value: description,\n        onChange: handleInputs(this, 'description'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"caption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545\n        },\n        __self: this\n      }, 'Código de producto', \" *\"), React.createElement(\"div\", {\n        className: classNames('control', {\n          'select-required': productCode === null || productCode === ''\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546\n        },\n        __self: this\n      }, React.createElement(Async, {\n        value: productCode,\n        placeholder: 'Código de producto',\n        loadingPlaceholder: \"Buscando\",\n        searchPromptText: \"Teclear el nombre del producto\",\n        noResultsText: \"No encontrado\",\n        loadOptions: this.getProducts,\n        onChange: this.onChangeProductCode,\n        ignoreAccents: false,\n        clearable: true,\n        filterOptions: function filterOptions(options) {\n          return options;\n        },\n        cache: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: classNames('help is-danger', {\n          'is-hidden': productCode !== null\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 565\n        },\n        __self: this\n      }, \"Este campo es requerido\"))), React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 575\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 576\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"caption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577\n        },\n        __self: this\n      }, 'Código de Unidad  - SAT', \" *\"), React.createElement(\"div\", {\n        className: classNames('control', {\n          'select-required': unitCode === null || unitCode === ''\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 580\n        },\n        __self: this\n      }, React.createElement(Async, {\n        placeholder: 'Código de Unidad  - SAT',\n        loadingPlaceholder: \"Buscando\",\n        searchPromptText: \"Teclear el nombre de la unidad\",\n        noResultsText: \"No encontrado\",\n        loadOptions: this.getUnits,\n        value: unitCode,\n        onChange: this.onChangeUnitCode,\n        ignoreAccents: false,\n        clearable: true,\n        filterOptions: function filterOptions(options) {\n          return options;\n        },\n        autoload: true,\n        cache: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 586\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: classNames('help is-danger', {\n          'is-hidden': unitCode !== null\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 600\n        },\n        __self: this\n      }, \"Este campo es requerido\"))))), React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 612\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 613\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: 'SKU',\n        value: sku,\n        onChange: handleInputs(this, 'sku'),\n        required: true,\n        ref: function ref(r) {\n          return requiredFields.add(r);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 623\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: 'Existencias',\n        disabled: true,\n        value: stock,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 624\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 628\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 629\n        },\n        __self: this\n      }, React.createElement(Button, {\n        buttonStyle: \"link--dark\",\n        icon: \"delete\",\n        type: \"submit\",\n        onClick: function onClick() {\n          return _this3.deleteProduct(id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 630\n        },\n        __self: this\n      }, \"Eliminar producto\")), React.createElement(\"div\", {\n        className: \"column flex-end\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 640\n        },\n        __self: this\n      }, React.createElement(Button, {\n        buttonStyle: \"primary\",\n        icon: \"content-save\",\n        type: \"submit\",\n        onClick: function onClick() {\n          return _this3.updateProduct(id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641\n        },\n        __self: this\n      }, \"Guardar\")))))));\n    }\n  }]);\n\n  return Products;\n}(Component);\n\nexport { Products as default };","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/inventories/products/index.js"],"names":["React","Component","Fragment","parseProducts","parseUnits","handleInputs","moment","Async","classNames","Filter","RadioOptions","SelectOption","RangeOption","Paginator","InventoryCard","Button","TextField","SwitchButton","InvoicesActions","NotificationsActions","InventoriesActions","InvoicesStore","InventoriesStore","requiredFields","Set","updateProduct","name","description","sku","unitCode","unit_code","productCode","prod_serv_code","active","product","value","getCurrentState","products","getProducts","totalItems","getTotalItems","totalPages","getTotalPages","firstId","getFirstId","Products","state","displayFilters","radioOptions","configProductSelectOptions","configUnitSelectOptions","startRange","endRange","searchInfo","id","isSelected","stock","_onChange","setState","initFilteroptions","handleRadio","checked","label","initProductSelectOptions","placeholder","loadingPlaceholder","searchText","noResultsText","options","handleSelect","onChangeProductType","initUnitSelectOptions","getUnits","onChangeUnitType","handleDisplayFilters","event","target","map","option","onChangeProductCode","onChangeUnitCode","handleRanges","range","handleSearchbar","length","Promise","resolve","then","setProductsCode","full_text","data","catch","error","units","setUnitsCode","clearRadioOptions","clearProductSelectOptions","clearUnitSelectOptions","clearRanges","clearAllFilters","submitSearch","filters","name_or_sku","params","Object","assign","props","location","query","setProducts","prevState","setCodes","prodServCode","selectCard","selectedProduct","find","item","productId","forEach","index","deleteProduct","success","handleActiveProduct","addChangeListener","prevProps","search","removeChangeListener","clear","filter","Boolean","form","validate","every","e","validateAll","r","add"],"mappings":"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","sourcesContent":["// Libraries\nimport React, { Component, Fragment } from 'react'\nimport { parseProducts, parseUnits, handleInputs } from 'utils'\nimport moment from 'moment'\nimport { Async } from 'react-select'\nimport classNames from 'classnames'\n\n// Components\nimport Filter from 'shared/filter'\nimport RadioOptions from 'shared/filter/radioOptions.js'\nimport SelectOption from 'shared/filter/selectOption.js'\nimport RangeOption from 'shared/filter/rangeOption.js'\nimport Paginator from 'shared/paginator'\nimport InventoryCard from 'shared/inventoryCard'\nimport Button from 'shared/button'\nimport TextField from 'shared/textField'\nimport SwitchButton from 'shared/switchButton'\n\n// Actions\nimport InvoicesActions from 'actions/invoices'\nimport NotificationsActions from 'actions/notifications'\nimport InventoriesActions from 'actions/inventories'\n\n// Stores\nimport InvoicesStore from 'stores/invoices'\nimport InventoriesStore from 'stores/inventories'\n\n// Constants\nconst requiredFields = new Set()\n\nexport const updateProduct = ({\n  name,\n  description,\n  sku,\n  unit_code: unitCode,\n  prod_serv_code: productCode,\n  active\n}) => ({\n  product: {\n    name: name,\n    description: description,\n    sku: sku,\n    unit_code: !unitCode ? '' : unitCode.value,\n    prod_serv_code: !productCode ? '' : productCode.value,\n    active\n  }\n})\n\nfunction getCurrentState () {\n  return {\n    products: InventoriesStore.getProducts(),\n    totalItems: InventoriesStore.getTotalItems(),\n    totalPages: InventoriesStore.getTotalPages(),\n    firstId: InventoriesStore.getFirstId()\n  }\n}\n\nexport default class Products extends Component {\n  state = {\n    displayFilters: false,\n    radioOptions: [],\n    configProductSelectOptions: {},\n    configUnitSelectOptions: {},\n    startRange: '',\n    endRange: '',\n    searchInfo: '',\n    name: '',\n    description: '',\n    id: '',\n    active: true,\n    prod_serv_code: '',\n    sku: '',\n    unit_code: '',\n    isSelected: true,\n    stock: '',\n    ...getCurrentState()\n  }\n\n  componentDidMount () {\n    InventoriesStore.addChangeListener(this._onChange)\n    this.initFilteroptions()\n    this.initProductSelectOptions()\n    this.initUnitSelectOptions()\n    InventoriesActions.setProducts().then(() => {\n      const { firstId } = this.state\n      if (!firstId) return\n      this.selectCard(firstId)\n    })\n  }\n\n  componentDidUpdate (prevProps) {\n    const params = Object.assign({}, this.props.location.query)\n\n    if (this.props.location.search !== prevProps.location.search) {\n      InventoriesActions.setProducts(params)\n    }\n  }\n\n  // Removes the listener to avoid memory leaks\n  componentWillUnmount () {\n    InventoriesStore.removeChangeListener(this._onChange)\n    InvoicesStore.removeChangeListener(this._onChange)\n    requiredFields.clear()\n  }\n\n  // Iterates over required fields and validates every one of them\n  // Then it returns true if all validations succeed, else false.\n  // Converts the Set() into an array\n  // Filters the array from any falsy value\n  // Calls the validate() method on each form\n  // Checks if all validations suceeded\n  validateAll () {\n    return [...requiredFields]\n      .filter(Boolean)\n      .map(form => form.validate())\n      .every(e => e)\n  }\n\n  _onChange = () => {\n    const state = getCurrentState()\n    this.setState(state)\n  }\n\n  initFilteroptions = () => {\n    const radioOptions = [\n      {\n        value: 'active',\n        handleRadio: this.handleRadio,\n        checked: false,\n        label: 'Activo'\n      },\n      {\n        value: 'inactive',\n        handleRadio: this.handleRadio,\n        checked: false,\n        label: 'Inactivo'\n      },\n      {\n        value: 'all',\n        handleRadio: this.handleRadio,\n        checked: true,\n        label: 'Todos'\n      }\n    ]\n    this.setState({ radioOptions: radioOptions })\n  }\n\n  initProductSelectOptions = () => {\n    const configProductSelectOptions = {\n      placeholder: 'Código de producto',\n      loadingPlaceholder: 'Buscando',\n      searchText: 'Teclear el nombre del producto',\n      noResultsText: 'No encontrado',\n      options: this.getProducts,\n      value: '',\n      handleSelect: this.onChangeProductType\n    }\n    this.setState({ configProductSelectOptions: configProductSelectOptions })\n  }\n\n  initUnitSelectOptions = () => {\n    const configUnitSelectOptions = {\n      placeholder: 'Código de unidad',\n      loadingPlaceholder: 'Buscando',\n      searchText: 'Teclear el nombre de la unidad',\n      noResultsText: 'No encontrado',\n      options: this.getUnits,\n      value: '',\n      handleSelect: this.onChangeUnitType\n    }\n    this.setState({ configUnitSelectOptions: configUnitSelectOptions })\n  }\n\n  handleDisplayFilters = () => {\n    this.setState(state => ({ displayFilters: !state.displayFilters }))\n  }\n\n  handleRadio = event => {\n    const { value } = event.target\n    this.setState(state => {\n      const radioOptions = [...state.radioOptions]\n      radioOptions.map(option => {\n        return option.value === value\n          ? (option.checked = true)\n          : (option.checked = false)\n      })\n      return {\n        radioOptions: radioOptions\n      }\n    })\n  }\n\n  onChangeProductType = product => {\n    this.setState(state => ({\n      configProductSelectOptions: {\n        ...state.configProductSelectOptions,\n        value: product\n      }\n    }))\n  }\n\n  onChangeProductCode = product => {\n    this.setState({ prod_serv_code: product })\n  }\n\n  onChangeUnitCode = product => {\n    this.setState({ unit_code: product })\n  }\n\n  onChangeUnitType = unitCode => {\n    this.setState(state => ({\n      configUnitSelectOptions: {\n        ...state.configUnitSelectOptions,\n        value: unitCode\n      }\n    }))\n  }\n\n  handleRanges = range => event => {\n    const value =\n      typeof event === 'object' && event instanceof moment\n        ? event\n        : event.target.value\n    this.setState({ [range]: value })\n  }\n\n  handleSearchbar = event => {\n    const { value } = event.target\n    this.setState({ searchInfo: value })\n  }\n\n  getProducts = value => {\n    if (typeof value !== 'undefined' && value.length === 0) {\n      return Promise.resolve(InvoicesStore.getProducts()).then(products => ({\n        options: parseProducts(products)\n      }))\n    }\n\n    return InvoicesActions.setProductsCode({ full_text: value })\n      .then(data => {\n        return { options: parseProducts(data) }\n      })\n      .catch(error => {\n        NotificationsActions.error(error)\n      })\n  }\n\n  getUnits = value => {\n    if (typeof value !== 'undefined' && value.length === 0) {\n      return Promise.resolve(InvoicesStore.getUnits()).then(units => ({\n        options: parseUnits(units)\n      }))\n    }\n\n    return InvoicesActions.setUnitsCode({ full_text: value })\n      .then(data => {\n        return { options: parseUnits(data) }\n      })\n      .catch(error => {\n        NotificationsActions.error(error)\n      })\n  }\n\n  clearRadioOptions = () => {\n    this.initFilteroptions()\n  }\n\n  clearProductSelectOptions = () => {\n    this.initProductSelectOptions()\n  }\n  clearUnitSelectOptions = () => {\n    this.initUnitSelectOptions()\n  }\n\n  clearRanges = () => {\n    this.setState({ startRange: '', endRange: '' })\n  }\n\n  clearAllFilters = () => {\n    this.clearRadioOptions()\n    this.clearProductSelectOptions()\n    this.clearUnitSelectOptions()\n    this.clearRanges()\n  }\n\n  submitSearch = () => {\n    const { startRange, endRange, searchInfo } = this.state\n    const value = this.state.prod_serv_code.value\n    const active =\n      this.state.radioOptions[0].checked === true\n        ? true\n        : this.state.radioOptions[1].checked === true\n          ? false\n          : ''\n    const filters = {\n      prod_serv_code: value,\n      name_or_sku: searchInfo,\n      'stock_range[from]': startRange,\n      'stock_range[to]': endRange,\n      active: active\n    }\n\n    const params = Object.assign({}, this.props.location.query, filters)\n    InventoriesActions.setProducts(params)\n    this.setState(prevState => ({\n      filters: Object.assign({}, prevState.filters, params)\n    }))\n    this.handleDisplayFilters()\n  }\n\n  setCodes = () => {\n    const { prod_serv_code: prodServCode } = this.state\n    const { unit_code: unitCode } = this.state\n\n    if (prodServCode) {\n      this.setState({\n        prod_serv_code: {\n          label: prodServCode\n        }\n      })\n      this.setState({\n        unit_code: {\n          label: unitCode\n        }\n      })\n    }\n  }\n\n  // It handles when user wants to change from one card to another\n  selectCard = id => {\n    const product = [...this.state.products]\n    const selectedProduct = product.find(item => item.id === id)\n    const {\n      id: productId,\n      active,\n      description,\n      name,\n      prod_serv_code: prodServCode,\n      sku,\n      unit_code: unitCode,\n      stock\n    } = selectedProduct\n\n    this.setState({\n      name: name,\n      id: productId,\n      active: active,\n      description: description,\n      prod_serv_code: prodServCode,\n      sku: sku,\n      unit_code: unitCode,\n      stock: stock\n    })\n\n    product.forEach((item, index) => {\n      if (item.id === id) {\n        product[index].isSelected = true\n      } else {\n        product[index].isSelected = false\n      }\n    })\n    this.setState({ products: product })\n\n    this.setCodes()\n  }\n\n  // Deletes a product\n  deleteProduct = id => {\n    InventoriesActions.deleteProduct(id)\n      .then(() => {\n        const firstId = InventoriesStore.getFirstId()\n        NotificationsActions.success('Producto eliminado correctamente')\n        this.selectCard(firstId)\n      })\n      .catch(error => {\n        NotificationsActions.error(error)\n      })\n  }\n\n  // Updates a product\n  updateProduct (id) {\n    if (this.validateAll()) {\n      InventoriesActions.updateProduct(id, updateProduct(this.state))\n        .then(() => {\n          NotificationsActions.success('Producto guardado correctamente')\n        })\n        .catch(error => {\n          NotificationsActions.error(error)\n        })\n    }\n  }\n\n  handleActiveProduct = () => {\n    this.setState(state => ({ active: !state.active }))\n  }\n\n  /* TODO: In the property unit_code, back has to return the name of the unit,\n  instead of the code */\n  render () {\n    const {\n      displayFilters,\n      radioOptions,\n      configProductSelectOptions,\n      configUnitSelectOptions,\n      startRange,\n      endRange,\n      searchInfo,\n      products,\n      totalItems,\n      totalPages,\n      name,\n      description,\n      unit_code: unitCode,\n      prod_serv_code: productCode,\n      sku,\n      active,\n      id,\n      stock\n    } = this.state\n\n    const filters = [\n      <RadioOptions\n        options={radioOptions}\n        mainLabel='Estatus'\n        clear={this.clearRadioOptions}\n      />,\n      <SelectOption\n        regularSelect={false}\n        configAutoComplete={configProductSelectOptions}\n        mainLabel='Código de producto'\n        clear={this.clearProductSelectOptions}\n      />,\n      <SelectOption\n        regularSelect={false}\n        configAutoComplete={configUnitSelectOptions}\n        mainLabel='Código de unidad'\n        clear={this.clearUnitSelectOptions}\n      />,\n      <RangeOption\n        mainLabel='Existencias'\n        handleRanges={this.handleRanges}\n        startRange={startRange}\n        endRange={endRange}\n        clear={this.clearRanges}\n      />\n    ]\n    return (\n      <Fragment>\n        <Filter\n          displayFilters={displayFilters}\n          handleDisplayFilters={this.handleDisplayFilters}\n          filters={filters}\n          clearAll={this.clearAllFilters}\n          handleSearch={this.handleSearchbar}\n          searchValue={searchInfo}\n          totalRecords={totalItems}\n          submitSearch={this.submitSearch}\n          searchBarPlaceHolder={'Buscar por Nombre o SKU'}\n        />\n\n        <div className='products-container'>\n          {products.length === 0 ? (\n            <p className='filter__no-elements'>No se encontraron elementos</p>\n          ) : (\n            <div className='columns'>\n              <div className='column is-5 products--padding products--border-right'>\n                <Fragment>\n                  {products.map(\n                    (\n                      {\n                        isSelected,\n                        stock,\n                        name,\n                        sku,\n                        unit_code: unitCode,\n                        id,\n                        active\n                      },\n                      index\n                    ) => (\n                      <InventoryCard\n                        key={index}\n                        outline={isSelected}\n                        selectCard={() => this.selectCard(id)}\n                        unit={active && stock}\n                        text={name}\n                        body={sku}\n                        type={\n                          unitCode === 'H87' && active\n                            ? 'Piezas'\n                            : !active && 'Inactivo'\n                        }\n                        inactive={!active}\n                      />\n                    )\n                  )}\n                </Fragment>\n                <Paginator\n                  totalPages={totalPages}\n                  location={this.props.location}\n                />\n              </div>\n              <div className='column is-7 products--margin-left'>\n                <div className='columns'>\n                  <div className='column is-8'>\n                    <span className='products--text-detail'>\n                      Detalle del producto\n                    </span>\n                  </div>\n\n                  <div className='column flex-end'>\n                    <SwitchButton\n                      handleSwitch={this.handleActiveProduct}\n                      checked={active}\n                      text={active ? 'Activo' : 'Inactivo'}\n                      active={active}\n                    />\n                  </div>\n                </div>\n\n                <div className='columns'>\n                  <div className='column'>\n                    <TextField\n                      label={'Nombre del Producto'}\n                      value={name}\n                      onChange={handleInputs(this, 'name')}\n                      ref={r => requiredFields.add(r)}\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div className='columns'>\n                  <div className='column'>\n                    <TextField\n                      label={'Descripción'}\n                      value={description}\n                      onChange={handleInputs(this, 'description')}\n                    />\n                  </div>\n                </div>\n\n                <div className='columns'>\n                  <div className='column is-6'>\n                    <label className='caption'>{'Código de producto'} *</label>\n                    <div\n                      className={classNames('control', {\n                        'select-required':\n                          productCode === null || productCode === ''\n                      })}\n                    >\n                      <Async\n                        value={productCode}\n                        placeholder={'Código de producto'}\n                        loadingPlaceholder='Buscando'\n                        searchPromptText='Teclear el nombre del producto'\n                        noResultsText='No encontrado'\n                        loadOptions={this.getProducts}\n                        onChange={this.onChangeProductCode}\n                        ignoreAccents={false}\n                        clearable\n                        filterOptions={options => options}\n                        cache={false}\n                      />\n                      <span\n                        className={classNames('help is-danger', {\n                          'is-hidden': productCode !== null\n                        })}\n                      >\n                        Este campo es requerido\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className='column'>\n                    <div className='control'>\n                      <label className='caption'>\n                        {'Código de Unidad  - SAT'} *\n                      </label>\n                      <div\n                        className={classNames('control', {\n                          'select-required':\n                            unitCode === null || unitCode === ''\n                        })}\n                      >\n                        <Async\n                          placeholder={'Código de Unidad  - SAT'}\n                          loadingPlaceholder='Buscando'\n                          searchPromptText='Teclear el nombre de la unidad'\n                          noResultsText='No encontrado'\n                          loadOptions={this.getUnits}\n                          value={unitCode}\n                          onChange={this.onChangeUnitCode}\n                          ignoreAccents={false}\n                          clearable\n                          filterOptions={options => options}\n                          autoload\n                          cache={false}\n                        />\n                        <span\n                          className={classNames('help is-danger', {\n                            'is-hidden': unitCode !== null\n                          })}\n                        >\n                          Este campo es requerido\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className='columns'>\n                  <div className='column'>\n                    <TextField\n                      label={'SKU'}\n                      value={sku}\n                      onChange={handleInputs(this, 'sku')}\n                      required\n                      ref={r => requiredFields.add(r)}\n                    />\n                  </div>\n\n                  <div className='column'>\n                    <TextField label={'Existencias'} disabled value={stock} />\n                  </div>\n                </div>\n\n                <div className='columns'>\n                  <div className='column'>\n                    <Button\n                      buttonStyle='link--dark'\n                      icon='delete'\n                      type='submit'\n                      onClick={() => this.deleteProduct(id)}\n                    >\n                      Eliminar producto\n                    </Button>\n                  </div>\n\n                  <div className='column flex-end'>\n                    <Button\n                      buttonStyle='primary'\n                      icon='content-save'\n                      type='submit'\n                      onClick={() => this.updateProduct(id)}\n                    >\n                      Guardar\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </Fragment>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}