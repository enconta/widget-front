{"ast":null,"code":"import _objectSpread from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/shared/topbar/index.js\";\nimport React, { PureComponent } from 'react';\nimport { browserHistory, Link } from 'react-router';\nimport BrowserDetection from 'react-browser-detection';\nimport ReactGa from 'react-ga';\nimport LogRocket from 'logrocket';\nimport { createGaEvent, getCurrentServer, getClientsPlan } from 'utils';\nimport { CSSTransition } from 'react-transition-group';\nimport classNames from 'classnames';\nimport Logo from '../logo';\nimport Sidebar from 'shared/mainMenu';\nimport Button from 'shared/button';\nimport ProgressBar from 'shared/progressbar';\nimport NotificationsActions from 'actions/notifications';\nimport SessionActions from 'actions/session';\nimport SessionStore from 'stores/session'; // Handle browser detection\n\nvar browserHandler = {\n  chrome: function chrome() {\n    return null;\n  },\n  firefox: function firefox() {\n    return null;\n  },\n  safari: function safari() {\n    return null;\n  },\n  default: function _default() {\n    return React.createElement(\"div\", {\n      id: \"productionWarning\",\n      className: \"discrete\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    }, \"Te recomendamos utilizar\", ' ', React.createElement(\"a\", {\n      href: \"https://www.google.com.mx/intl/es-419/chrome/browser/desktop/\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    }, \"Google Chrome\"), ' ', \"para tener una mejor experiencia.\");\n  }\n};\n/*\n * Topbar is the main menu of the app\n * Renders the Enconta logo as a separate component\n * Saves current entities to state and makes them available as submenus on the topbar\n * Highlights the current entity, displays it as the placeholder on the topbar\n */\n\nfunction getCurrentState() {\n  return {\n    currentEntity: SessionStore.getCurrentEntity(),\n    user: SessionStore.getUser(),\n    entities: SessionStore.getTaxableEntities(),\n    features: SessionStore.getFeatures()\n  };\n} // Items to be rendered on the main button\n\n\nvar INVOICES_MENU_ITEMS = [{\n  label: 'Regular',\n  link: '/facturas/nueva',\n  icon: 'mdi-file-plus',\n  availableFor: ['free_premium', 'free', 'premium', 'integral_service']\n}, // {\n//   label: 'Nota de crédito',\n//   link: '/notas_de_credito/nueva',\n//   icon: 'mdi-file-document'\n// },\n{\n  label: 'Nómina',\n  link: '/facturas_de_nomina/nueva',\n  icon: 'mdi-credit-card',\n  availableFor: ['free_premium', 'free', 'premium', 'integral_service']\n}, {\n  label: 'Facturación masiva',\n  link: '/facturacion_masiva',\n  icon: 'mdi-format-list-bulleted',\n  availableFor: ['free_premium', 'premium', 'integral_service']\n}]; // Return a notice if you are dev\n\nvar environmentWarning = function environmentWarning() {\n  var currentServer = getCurrentServer();\n  var warningText = currentServer === 'production' ? 'Estás conectado a producción' : 'Estás conectado al servidor de pruebas';\n  var validHostname = window.location.hostname === 'localhost' || window.location.hostname === '0.0.0.0' || window.location.hostname === 'app-test.enconta.com';\n  return validHostname && (currentServer === 'production' || currentServer === 'staging') && React.createElement(\"div\", {\n    className: \"topbar__production-warning\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, warningText);\n};\n\nvar handleMenuClick = function handleMenuClick(label) {\n  ReactGa.event(createGaEvent('inicio', 'click on button', 'nueva factura'));\n  ReactGa.event(createGaEvent('inicio', 'click on button', label));\n}; // Topbar menu\n\n\nvar Topbar =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(Topbar, _PureComponent);\n\n  function Topbar() {\n    var _this;\n\n    _classCallCheck(this, Topbar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Topbar).call(this));\n\n    _this.setEntity = function (entity) {\n      var id = _this.state.currentEntity.id;\n\n      if (id !== entity.id) {\n        SessionActions.changeCurrentEntity({\n          id: entity.id\n        }).then(function () {\n          NotificationsActions.success('Se ha cambiado la entidad fiscal');\n          browserHistory.push('/');\n        }).catch(function (e) {\n          return NotificationsActions.error(e);\n        });\n      }\n    };\n\n    _this.toggleOpen = function (value) {\n      _this.setState({\n        open: value\n      });\n    };\n\n    _this.handleScroll = function (event) {\n      var scrollYPosition = window.scrollY;\n      var isSticky = _this.state.isSticky;\n\n      if (scrollYPosition > 0 && !isSticky) {\n        _this.setState({\n          isSticky: true\n        });\n      }\n\n      if (scrollYPosition === 0 && isSticky) {\n        _this.setState({\n          isSticky: false\n        });\n      }\n    };\n\n    _this.data = {\n      logoSize: 'normal',\n      open: false\n    };\n    _this.state = _objectSpread({\n      isSticky: false\n    }, Object.assign(_this.data, getCurrentState()));\n    _this._onChange = _this._onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.changeLogoSize = _this.changeLogoSize.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Topbar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener('scroll', this.handleScroll);\n      SessionStore.addChangeListener(this._onChange);\n      window.addEventListener('optimizedResize', this.changeLogoSize);\n      this.changeLogoSize();\n      this.logRocket();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // Removes the listener to avoid memory leaks\n      SessionStore.removeChangeListener(this._onChange);\n      window.removeEventListener('optimizedResize', this.changeLogoSize);\n    }\n  }, {\n    key: \"logRocket\",\n    value: function logRocket() {\n      var user = SessionStore.getUser();\n      var userId = user.id.toString();\n      LogRocket.identify(userId, {\n        name: user.name,\n        email: user.email\n      });\n    }\n  }, {\n    key: \"changeLogoSize\",\n    value: function changeLogoSize() {\n      this.setState({\n        logoSize: window.innerWidth >= 1200 ? 'normal' : 'small'\n      });\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange() {\n      var state = getCurrentState();\n      this.setState(state);\n    } // Sets the current entity on the API\n\n  }, {\n    key: \"renderUserSubMenu\",\n    value: function renderUserSubMenu() {\n      return React.createElement(\"div\", {\n        className: \"topbar__user_menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"topbar__submenu-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-account topbar__icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"topbar__submenu-button__label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, this.state.user.name), React.createElement(\"i\", {\n        className: \"mdi mdi-chevron-down topbar__icon topbar__icon--is-after-word\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      })), React.createElement(\"nav\", {\n        className: \"topbar__submenu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"topbar__submenu-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: \"topbar__submenu-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/mi-cuenta/general\",\n        className: \"topbar__submenu-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-account-edit topbar__icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), \"Mi Cuenta\")), React.createElement(\"li\", {\n        className: \"topbar__submenu-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/entidades\",\n        className: \"topbar__submenu-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-briefcase-account topbar__icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), \"Mi Empresa\")), React.createElement(\"li\", {\n        className: \"topbar__submenu-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(Button, {\n        buttonStyle: \"encontaButton--topbar-menu-button\",\n        icon: \"logout\",\n        onClick: SessionActions.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Cerrar sesi\\xF3n\")))));\n    }\n  }, {\n    key: \"buildInvoiceButton\",\n    value: function buildInvoiceButton(button) {\n      var plan = getClientsPlan();\n      var disabled = !button.availableFor.includes(plan);\n      var option = React.createElement(\"li\", {\n        key: button.label,\n        className: classNames('topbar__submenu-option', {\n          'topbar__submenu-option--disabled': disabled\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, disabled ? React.createElement(\"p\", {\n        className: \"topbar__submenu-text-only\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi \".concat(button.icon, \" topbar__icon\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }), button.label) : React.createElement(Link, {\n        to: button.link,\n        onClick: function onClick() {\n          return handleMenuClick(button.label);\n        },\n        className: \"topbar__submenu-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi \".concat(button.icon, \" topbar__icon\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }), button.label));\n      return option;\n    }\n  }, {\n    key: \"renderInvoicesSubmenu\",\n    value: function renderInvoicesSubmenu() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"topbar__invoices\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"topbar__submenu-button topbar__submenu-button--primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-plus topbar__icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"topbar__submenu-button__label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, \"Nueva Factura\")), React.createElement(\"nav\", {\n        className: \"topbar__submenu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"topbar__submenu-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, INVOICES_MENU_ITEMS.map(function (button) {\n        return _this2.buildInvoiceButton(button);\n      }))));\n    }\n  }, {\n    key: \"renderEntitiesSubmenu\",\n    value: function renderEntitiesSubmenu() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          currentEntity = _this$state.currentEntity,\n          entities = _this$state.entities,\n          user = _this$state.user;\n      var isAdmin = user.role !== 'account_holder';\n      var hasManyEntities = entities.length > 1 && !isAdmin;\n      var legalName = currentEntity.legal_name;\n      return React.createElement(\"div\", {\n        className: \"topbar__taxable_entity \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: isAdmin ? '/admin/entidades_fiscales' : '',\n        className: \"topbar__submenu-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"topbar__legal_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, legalName || 'Entidades Fiscales', hasManyEntities && React.createElement(\"i\", {\n        className: \"mdi mdi-chevron-down icon-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }))), React.createElement(\"nav\", {\n        className: \"topbar__submenu topbar__submenu--menu-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"topbar__submenu-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, hasManyEntities && entities.filter(function (entity) {\n        return entity.id !== currentEntity.id;\n      }).map(function (entity) {\n        return React.createElement(\"li\", {\n          key: entity.rfc,\n          className: \"topbar__submenu-option\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304\n          },\n          __self: this\n        }, React.createElement(Button, {\n          buttonStyle: \"encontaButton--topbar-menu-button\",\n          onClick: function onClick() {\n            return _this3.setEntity(entity);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305\n          },\n          __self: this\n        }, entity.legal_name || ''));\n      }))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var pathname = this.props.pathname;\n      var _this$state2 = this.state,\n          logoSize = _this$state2.logoSize,\n          open = _this$state2.open,\n          isSticky = _this$state2.isSticky;\n      return React.createElement(\"header\", {\n        className: classNames('topbar', {\n          'topbar--sticky': isSticky\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, environmentWarning(), React.createElement(BrowserDetection, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, browserHandler), React.createElement(\"div\", {\n        className: \"topbar__brand\",\n        onClick: function onClick() {\n          return _this4.toggleOpen(!open);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, logoSize === 'normal' ? React.createElement(Link, {\n        to: '/dashboard',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, React.createElement(Logo, {\n        textColour: 'white',\n        logoSize: logoSize,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      })) : React.createElement(Logo, {\n        textColour: 'white',\n        logoSize: logoSize,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      })), this.renderEntitiesSubmenu(), this.renderUserSubMenu(), this.renderInvoicesSubmenu(), logoSize === 'normal' ? React.createElement(Sidebar, {\n        pathname: pathname,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }) : React.createElement(CSSTransition, {\n        in: open,\n        timeout: 300,\n        classNames: 'main-menu',\n        onEnter: function onEnter() {\n          return _this4.toggleOpen(true);\n        },\n        onExited: function onExited() {\n          return _this4.toggleOpen(false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, React.createElement(Sidebar, {\n        pathname: pathname,\n        toggleMenu: this.toggleOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      })), React.createElement(ProgressBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Topbar;\n}(PureComponent);\n\nexport default Topbar;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/shared/topbar/index.js"],"names":["React","PureComponent","browserHistory","Link","BrowserDetection","ReactGa","LogRocket","createGaEvent","getCurrentServer","getClientsPlan","CSSTransition","classNames","Logo","Sidebar","Button","ProgressBar","NotificationsActions","SessionActions","SessionStore","browserHandler","chrome","firefox","safari","default","getCurrentState","currentEntity","getCurrentEntity","user","getUser","entities","getTaxableEntities","features","getFeatures","INVOICES_MENU_ITEMS","label","link","icon","availableFor","environmentWarning","currentServer","warningText","validHostname","window","location","hostname","handleMenuClick","event","Topbar","setEntity","entity","id","state","changeCurrentEntity","then","success","push","catch","e","error","toggleOpen","value","setState","open","handleScroll","scrollYPosition","scrollY","isSticky","data","logoSize","Object","assign","_onChange","bind","changeLogoSize","addEventListener","addChangeListener","logRocket","removeChangeListener","removeEventListener","userId","toString","identify","name","email","innerWidth","logout","button","plan","disabled","includes","option","map","buildInvoiceButton","isAdmin","role","hasManyEntities","length","legalName","legal_name","filter","rfc","pathname","props","renderEntitiesSubmenu","renderUserSubMenu","renderInvoicesSubmenu"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\nimport { browserHistory, Link } from 'react-router'\nimport BrowserDetection from 'react-browser-detection'\nimport ReactGa from 'react-ga'\nimport LogRocket from 'logrocket'\nimport { createGaEvent, getCurrentServer, getClientsPlan } from 'utils'\nimport { CSSTransition } from 'react-transition-group'\nimport classNames from 'classnames'\n\nimport Logo from '../logo'\nimport Sidebar from 'shared/mainMenu'\nimport Button from 'shared/button'\nimport ProgressBar from 'shared/progressbar'\n\nimport NotificationsActions from 'actions/notifications'\nimport SessionActions from 'actions/session'\n\nimport SessionStore from 'stores/session'\n\n// Handle browser detection\nconst browserHandler = {\n  chrome: () => null,\n  firefox: () => null,\n  safari: () => null,\n  default: () => (\n    <div id='productionWarning' className='discrete'>\n      Te recomendamos utilizar{' '}\n      <a\n        href='https://www.google.com.mx/intl/es-419/chrome/browser/desktop/'\n        target='_blank'\n      >\n        Google Chrome\n      </a>{' '}\n      para tener una mejor experiencia.\n    </div>\n  )\n}\n\n/*\n * Topbar is the main menu of the app\n * Renders the Enconta logo as a separate component\n * Saves current entities to state and makes them available as submenus on the topbar\n * Highlights the current entity, displays it as the placeholder on the topbar\n */\n\nfunction getCurrentState () {\n  return {\n    currentEntity: SessionStore.getCurrentEntity(),\n    user: SessionStore.getUser(),\n    entities: SessionStore.getTaxableEntities(),\n    features: SessionStore.getFeatures()\n  }\n}\n\n// Items to be rendered on the main button\nconst INVOICES_MENU_ITEMS = [\n  {\n    label: 'Regular',\n    link: '/facturas/nueva',\n    icon: 'mdi-file-plus',\n    availableFor: ['free_premium', 'free', 'premium', 'integral_service']\n  },\n  // {\n  //   label: 'Nota de crédito',\n  //   link: '/notas_de_credito/nueva',\n  //   icon: 'mdi-file-document'\n  // },\n  {\n    label: 'Nómina',\n    link: '/facturas_de_nomina/nueva',\n    icon: 'mdi-credit-card',\n    availableFor: ['free_premium', 'free', 'premium', 'integral_service']\n  },\n  {\n    label: 'Facturación masiva',\n    link: '/facturacion_masiva',\n    icon: 'mdi-format-list-bulleted',\n    availableFor: ['free_premium', 'premium', 'integral_service']\n  }\n]\n\n// Return a notice if you are dev\nconst environmentWarning = () => {\n  const currentServer = getCurrentServer()\n  const warningText =\n    currentServer === 'production'\n      ? 'Estás conectado a producción'\n      : 'Estás conectado al servidor de pruebas'\n  const validHostname =\n    window.location.hostname === 'localhost' ||\n    window.location.hostname === '0.0.0.0' ||\n    window.location.hostname === 'app-test.enconta.com'\n\n  return (\n    validHostname &&\n    (currentServer === 'production' || currentServer === 'staging') && (\n      <div className='topbar__production-warning'>{warningText}</div>\n    )\n  )\n}\n\nconst handleMenuClick = label => {\n  ReactGa.event(createGaEvent('inicio', 'click on button', 'nueva factura'))\n  ReactGa.event(createGaEvent('inicio', 'click on button', label))\n}\n\n// Topbar menu\nclass Topbar extends PureComponent {\n  constructor () {\n    super()\n    this.data = {\n      logoSize: 'normal',\n      open: false\n    }\n    this.state = {\n      isSticky: false,\n      ...Object.assign(this.data, getCurrentState())\n    }\n    this._onChange = this._onChange.bind(this)\n    this.changeLogoSize = this.changeLogoSize.bind(this)\n  }\n\n  componentDidMount () {\n    window.addEventListener('scroll', this.handleScroll)\n    SessionStore.addChangeListener(this._onChange)\n    window.addEventListener('optimizedResize', this.changeLogoSize)\n    this.changeLogoSize()\n    this.logRocket()\n  }\n\n  componentWillUnmount () {\n    // Removes the listener to avoid memory leaks\n    SessionStore.removeChangeListener(this._onChange)\n    window.removeEventListener('optimizedResize', this.changeLogoSize)\n  }\n\n  logRocket () {\n    const user = SessionStore.getUser()\n    const userId = user.id.toString()\n    LogRocket.identify(userId, {\n      name: user.name,\n      email: user.email\n    })\n  }\n\n  changeLogoSize () {\n    this.setState({\n      logoSize: window.innerWidth >= 1200 ? 'normal' : 'small'\n    })\n  }\n\n  _onChange () {\n    const state = getCurrentState()\n    this.setState(state)\n  }\n\n  // Sets the current entity on the API\n  setEntity = entity => {\n    const { id } = this.state.currentEntity\n    if (id !== entity.id) {\n      SessionActions.changeCurrentEntity({ id: entity.id })\n        .then(() => {\n          NotificationsActions.success('Se ha cambiado la entidad fiscal')\n          browserHistory.push('/')\n        })\n        .catch(e => NotificationsActions.error(e))\n    }\n  }\n\n  toggleOpen = value => {\n    this.setState({ open: value })\n  }\n\n  handleScroll = event => {\n    let scrollYPosition = window.scrollY\n    const { isSticky } = this.state\n\n    if (scrollYPosition > 0 && !isSticky) {\n      this.setState({\n        isSticky: true\n      })\n    }\n\n    if (scrollYPosition === 0 && isSticky) {\n      this.setState({\n        isSticky: false\n      })\n    }\n  }\n\n  renderUserSubMenu () {\n    return (\n      <div className='topbar__user_menu'>\n        <div className='topbar__submenu-button'>\n          <i className='mdi mdi-account topbar__icon' />\n          <p className='topbar__submenu-button__label'>\n            {this.state.user.name}\n          </p>\n          <i className='mdi mdi-chevron-down topbar__icon topbar__icon--is-after-word' />\n        </div>\n        <nav className='topbar__submenu'>\n          <ul className='topbar__submenu-container'>\n            <li className='topbar__submenu-option'>\n              <Link to='/mi-cuenta/general' className='topbar__submenu-link'>\n                <i className='mdi mdi-account-edit topbar__icon' />\n                Mi Cuenta\n              </Link>\n            </li>\n            <li className='topbar__submenu-option'>\n              <Link to='/entidades' className='topbar__submenu-link'>\n                <i className='mdi mdi-briefcase-account topbar__icon' />\n                Mi Empresa\n              </Link>\n            </li>\n            <li className='topbar__submenu-option'>\n              <Button\n                buttonStyle='encontaButton--topbar-menu-button'\n                icon='logout'\n                onClick={SessionActions.logout}\n              >\n                Cerrar sesión\n              </Button>\n            </li>\n          </ul>\n        </nav>\n      </div>\n    )\n  }\n\n  buildInvoiceButton (button) {\n    const plan = getClientsPlan()\n    const disabled = !button.availableFor.includes(plan)\n\n    let option = (\n      <li\n        key={button.label}\n        className={classNames('topbar__submenu-option', {\n          'topbar__submenu-option--disabled': disabled\n        })}\n      >\n        {disabled ? (\n          <p className='topbar__submenu-text-only'>\n            <i className={`mdi ${button.icon} topbar__icon`} />\n            {button.label}\n          </p>\n        ) : (\n          <Link\n            to={button.link}\n            onClick={() => handleMenuClick(button.label)}\n            className='topbar__submenu-link'\n          >\n            <i className={`mdi ${button.icon} topbar__icon`} />\n            {button.label}\n          </Link>\n        )}\n      </li>\n    )\n    return option\n  }\n  renderInvoicesSubmenu () {\n    return (\n      <div className='topbar__invoices'>\n        <div className='topbar__submenu-button topbar__submenu-button--primary'>\n          <i className='mdi mdi-plus topbar__icon' />\n          <p className='topbar__submenu-button__label'>Nueva Factura</p>\n        </div>\n        <nav className='topbar__submenu'>\n          <ul className='topbar__submenu-container'>\n            {INVOICES_MENU_ITEMS.map(button => {\n              return this.buildInvoiceButton(button)\n            })}\n          </ul>\n        </nav>\n      </div>\n    )\n  }\n\n  renderEntitiesSubmenu () {\n    const { currentEntity, entities, user } = this.state\n    const isAdmin = user.role !== 'account_holder'\n    const hasManyEntities = entities.length > 1 && !isAdmin\n    const { legal_name: legalName } = currentEntity\n\n    return (\n      <div className='topbar__taxable_entity '>\n        <Link\n          to={isAdmin ? '/admin/entidades_fiscales' : ''}\n          className='topbar__submenu-button'\n        >\n          <p className='topbar__legal_name'>\n            {legalName || 'Entidades Fiscales'}\n            {hasManyEntities && (\n              <i className='mdi mdi-chevron-down icon-right' />\n            )}\n          </p>\n        </Link>\n        <nav className='topbar__submenu topbar__submenu--menu-left'>\n          <ul className='topbar__submenu-container'>\n            {hasManyEntities &&\n              entities\n                .filter(entity => entity.id !== currentEntity.id)\n                .map(entity => {\n                  return (\n                    <li key={entity.rfc} className='topbar__submenu-option'>\n                      <Button\n                        buttonStyle='encontaButton--topbar-menu-button'\n                        onClick={() => this.setEntity(entity)}\n                      >\n                        {entity.legal_name || ''}\n                      </Button>\n                    </li>\n                  )\n                })}\n          </ul>\n        </nav>\n      </div>\n    )\n  }\n\n  render () {\n    const { pathname } = this.props\n    const { logoSize, open, isSticky } = this.state\n    return (\n      <header\n        className={classNames('topbar', {\n          'topbar--sticky': isSticky\n        })}\n      >\n        {environmentWarning()}\n        <BrowserDetection>{browserHandler}</BrowserDetection>\n        <div className='topbar__brand' onClick={() => this.toggleOpen(!open)}>\n          {logoSize === 'normal' ? (\n            <Link to={'/dashboard'}>\n              <Logo textColour={'white'} logoSize={logoSize} />\n            </Link>\n          ) : (\n            <Logo textColour={'white'} logoSize={logoSize} />\n          )}\n        </div>\n        {this.renderEntitiesSubmenu()}\n        {this.renderUserSubMenu()}\n        {this.renderInvoicesSubmenu()}\n\n        {logoSize === 'normal' ? (\n          <Sidebar pathname={pathname} />\n        ) : (\n          <CSSTransition\n            in={open}\n            timeout={300}\n            classNames={'main-menu'}\n            onEnter={() => this.toggleOpen(true)}\n            onExited={() => this.toggleOpen(false)}\n          >\n            <Sidebar pathname={pathname} toggleMenu={this.toggleOpen} />\n          </CSSTransition>\n        )}\n\n        <ProgressBar />\n      </header>\n    )\n  }\n}\n\nexport default Topbar\n"]},"metadata":{},"sourceType":"module"}