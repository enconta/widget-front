{"ast":null,"code":"import _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/accountingPeriods/uploadStatements/AssignmentCard.js\";\nimport React, { PureComponent, Fragment } from 'react';\nimport moment from 'moment';\nimport classNames from 'classnames'; // Components\n\nimport DropZoneFile from 'shared/credentials/components/DropzoneFile';\nimport Modal from 'shared/modal';\nimport Button from 'shared/button';\nimport IconButton from 'shared/iconButton';\nvar REASONS = {\n  modified_document: 'Documento modificado',\n  different_period: 'Pertenece a un periodo diferente',\n  different_bank: 'Pertenece a un banco diferente',\n  incorrect_format: 'El formato del archivo es diferente',\n  incomplete_information: 'Información incompleta',\n  password_required: 'Necesita contraseña',\n  other: 'Otro'\n};\n\nvar Status = function Status(_ref) {\n  var status = _ref.status,\n      uploadStatus = _ref.uploadStatus;\n\n  switch (status) {\n    case true:\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"accounting-period-card__content__status-message has-text-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-check icon-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }), \"Aprobado\"), uploadStatus === 'no_movements' && React.createElement(\"p\", {\n        className: \"accounting-period-card__content__no-movements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }, \"Cuenta sin movimientos.\"), uploadStatus === 'synchronized' && React.createElement(\"p\", {\n        className: \"accounting-period-card__content__no-movements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, \"Sincronizaci\\xF3n exitosa\"), uploadStatus === 'sync_no_movements' && React.createElement(\"p\", {\n        className: \"accounting-period-card__content__no-movements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, \"Sincronizaci\\xF3n sin movimientos\"));\n\n    case false:\n      return React.createElement(\"p\", {\n        className: \"accounting-period-card__content__status-message has-text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-close icon-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }), \"Rechazado\");\n\n    default:\n      return React.createElement(\"p\", {\n        className: \"accounting-period-card__content__status-message has-text-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-clock icon-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), \"En espera de aprobaci\\xF3n\");\n  }\n};\n/**\n * @typedef {(index: number) => void} Toggle\n * @typedef {(index: number, files: File[]) => any} DropFiles\n * @typedef {import('api').Assignment} Assignment\n * @typedef {{index:number, onDropFile: DropFiles, toggleNoMovements: Toggle, uploadStatement: uploadStatement, onDropExtraFile: DropFiles}} Props\n * @extends {PureComponent<Assignment & Props, {isAlertVisible: boolean}>}\n */\n\n\nvar AssignmentCard =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(AssignmentCard, _PureComponent);\n\n  function AssignmentCard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AssignmentCard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AssignmentCard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isAlertVisible: false\n    };\n\n    _this.toggleAlert = function () {\n      _this.setState(function (_ref2) {\n        var isAlertVisible = _ref2.isAlertVisible;\n        return {\n          isAlertVisible: !isAlertVisible\n        };\n      });\n    };\n\n    _this.renderSendButtons = function () {\n      var _this$props = _this.props,\n          uploadStatement = _this$props.uploadStatement,\n          main = _this$props.main,\n          complement = _this$props.complement,\n          index = _this$props.index;\n      var condition = ['filled', 'zone_deleted'];\n      var uploadStatus = main === null ? '' : main.upload_status;\n      var approved = main === null ? '' : main.approved;\n      var uploadStatusComplement = complement === null ? '' : complement.upload_status;\n\n      if (condition.includes(uploadStatus) && approved === null || uploadStatusComplement === 'filled') {\n        return React.createElement(Button, {\n          className: classNames(\"encontaButton \\n              link \\n              link--full-width \\n              is-paddingless flex-center\", {\n            'link link--pink': uploadStatus === 'filled' || uploadStatusComplement === 'filled'\n          }),\n          icon: \"send\",\n          onClick: function onClick() {\n            return uploadStatement(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, \"Enviar\");\n      }\n\n      if (uploadStatus === null && approved === null || !complement && !main) {\n        return React.createElement(Button, {\n          className: \"encontaButton \\n            link \\n            link--full-width \\n            is-paddingless \\n            flex-center\",\n          icon: \"send\",\n          disabled: uploadStatus !== 'filled',\n          onClick: function onClick() {\n            return uploadStatement(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, \"Enviar\");\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(AssignmentCard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props2 = this.props,\n          uploadStatus = _this$props2.upload_status,\n          approved = _this$props2.approved;\n\n      if (uploadStatus === null || approved === null) {\n        this.setState({\n          isCheckVisible: true\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          id = _this$props3.id,\n          index = _this$props3.index,\n          onDropFile = _this$props3.onDropFile,\n          toggleNoMovements = _this$props3.toggleNoMovements,\n          account = _this$props3.payment_account,\n          month = _this$props3.month,\n          originalFileName = _this$props3.original_filename,\n          originalFileNameExtra = _this$props3.original_filename_extra,\n          onDropExtraFile = _this$props3.onDropExtraFile,\n          deleteExtraZone = _this$props3.deleteExtraZone,\n          addedFirstFile = _this$props3.addedFirstFile,\n          addedSecondFile = _this$props3.addedSecondFile,\n          replaceFile = _this$props3.replaceFile,\n          replaceExtraFile = _this$props3.replaceExtraFile,\n          main = _this$props3.main,\n          complement = _this$props3.complement;\n      var uploadStatus = main === null ? '' : main.upload_status;\n      var approved = main === null ? '' : main.approved;\n      var url = !main || main.bank_statement === null ? '' : main.bank_statement.url;\n      var uploadStatusComplement = complement === null ? '' : complement.upload_status;\n      var approvedComplement = complement === null ? '' : complement.approved;\n      var bankStatementComplement = !complement || complement.bank_statement === null ? '' : complement.bank_statement.filename;\n      var bankStatement = !main || main.bank_statement === null ? '' : main.bank_statement.filename;\n      var showDownloadButton = uploadStatus === 'uploaded' && (approved === null || approved === true || !approved);\n      var filesAccepted = '.csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel, .pdf, .tsv, .tab, .xls, .xlsx';\n      var isAlertVisible = this.state.isAlertVisible;\n      var noMovements = uploadStatus === 'no_movements';\n      var displayMonth = moment({\n        month: month - 1\n      }).format('MMMM');\n      var isVisibleCheckbox = uploadStatus === null && approved === null || approved === false && uploadStatus === 'uploaded' || !main;\n      var showCorrectStatuses = uploadStatus === 'uploaded' && approved === false || uploadStatus === 'uploaded' && approved === null || approved && uploadStatus === 'no_movements' || approved && uploadStatus === 'uploaded' || approved && uploadStatus === 'synchronized' || approved && uploadStatus === 'sync_no_movements';\n      var buttonReplaceFirstFile = React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"files\",\n        className: \"encontaButton link is-paddingless dropzone-area--extra__icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-file-restore\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }), \"Reemplazar\"), React.createElement(\"input\", {\n        id: \"files\",\n        className: \"hide-element\",\n        type: \"file\",\n        accept: filesAccepted,\n        onChange: function onChange(e) {\n          return replaceFile(index, e.target.files[0]);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }));\n      var buttonDeleteAndReplaceExtra = React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"extra_files\",\n        className: \"encontaButton link is-paddingless dropzone-area--margin-left dropzone-area--margin-top dropzone-area--extra__icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-file-restore\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), \"Reemplazar\"), React.createElement(\"input\", {\n        id: \"extra_files\",\n        className: \"hide-element\",\n        type: \"file\",\n        accept: filesAccepted,\n        onChange: function onChange(e) {\n          return replaceExtraFile(index, e.target.files[0]);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), React.createElement(Button, {\n        className: \"encontaButton link is-paddingless\",\n        icon: \"delete\",\n        onClick: function onClick() {\n          return deleteExtraZone(index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, \"Eliminar\"));\n      return React.createElement(\"div\", {\n        className: \"column is-4 accounting-period-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"box is-fullheight is-marginless box--justify-start\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"accounting-period-card__header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"accounting-period-card__header__alias\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, account.alias.toUpperCase()), React.createElement(\"p\", {\n        className: \"is-capitalized  accounting-period-card__header__bank-name content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, account.bank_name.toLowerCase())), React.createElement(\"div\", {\n        className: \"accounting-period-card__content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, showCorrectStatuses ? React.createElement(Status, {\n        status: approved,\n        uploadStatus: uploadStatus,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }) : React.createElement(\"p\", {\n        className: \"accounting-period-card__content__status-message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-clock-outline icon-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }), \"En espera\"), isVisibleCheckbox && React.createElement(\"div\", {\n        className: \"accounting-period-card__no-movements-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"checkbox\",\n        name: \"no_movements\",\n        id: \"no_movements_\".concat(id),\n        onChange: this.toggleAlert,\n        checked: uploadStatus === 'no_movements',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"no_movements_\".concat(id),\n        className: \"labelNoMovements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, \"No realic\\xE9 movimientos durante \".concat(displayMonth))), approved === false && React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"info-rejected\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"info-rejected info-rejected--bold is-uppercase\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, \"Raz\\xF3n:\", ' '), REASONS[main.rejection_reason], React.createElement(IconButton, {\n        icon: \"comment-question-outline\",\n        tooltip: main.customer_service_comment,\n        tooltipStyle: \"rejected\",\n        iconOnly: true,\n        className: \"icon-button--margin-left-8px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }))), !noMovements && React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, uploadStatus !== 'no_movements' && uploadStatus !== 'synchronized' && uploadStatus !== 'sync_no_movements' && React.createElement(DropZoneFile, {\n        className: classNames('is-fullwidth is-marginless', {\n          notApproved: uploadStatus === 'uploaded' && approved === false,\n          approved: approved,\n          sent: uploadStatus === 'uploaded' && approved === null,\n          uploaded: uploadStatus === 'filled'\n        }),\n        accept: filesAccepted,\n        onDrop: function onDrop(files) {\n          return onDropFile(index, files);\n        },\n        icon: approved === false ? 'mdi-file-remove' : uploadStatus === 'uploaded' && !approved ? 'mdi-file-eye' : 'mdi-file-upload',\n        file: main !== null && !addedFirstFile ? bankStatement : originalFileName,\n        disabled: approved || uploadStatus === 'filled',\n        message: !approved && approved != null && 'Reemplazar archivo',\n        deleteButton: (addedFirstFile || addedSecondFile) && buttonReplaceFirstFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }), approvedComplement === false && React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"info-rejected info-rejected--margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"info-rejected info-rejected--bold is-uppercase\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, \"Raz\\xF3n:\", ' '), REASONS[complement.rejection_reason], React.createElement(IconButton, {\n        icon: \"comment-question-outline\",\n        tooltip: complement.customer_service_comment,\n        tooltipStyle: \"rejected\",\n        iconOnly: true,\n        className: \"icon-button--margin-left-8px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }))), (addedFirstFile === true && addedSecondFile === false || uploadStatusComplement) && React.createElement(DropZoneFile, {\n        className: classNames('is-fullwidth', {\n          'notApproved is-marginless': uploadStatusComplement === 'uploaded' && approvedComplement === false,\n          approved: approvedComplement,\n          sent: uploadStatusComplement === 'uploaded' && approvedComplement === null,\n          uploaded: uploadStatusComplement === 'filled'\n        }),\n        accept: filesAccepted,\n        onDrop: function onDrop(files) {\n          return onDropExtraFile(index, files);\n        },\n        icon: approvedComplement === false ? 'mdi-file-remove' : uploadStatusComplement === 'uploaded' && !approvedComplement ? 'mdi-file-eye' : 'mdi-file-upload',\n        file: complement ? bankStatementComplement : originalFileNameExtra,\n        message: !approvedComplement && approvedComplement != null && 'Reemplazar archivo',\n        addFileMessage: addedFirstFile && 'Agregar otro archivo (Opcional)',\n        disabled: approvedComplement === true || uploadStatusComplement === 'filled' || uploadStatus === 'filled' && uploadStatusComplement === 'uploaded',\n        deleteButton: addedFirstFile && buttonDeleteAndReplaceExtra,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }), React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, approved !== true && React.createElement(\"p\", {\n        className: \"caption caption-fixed-bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393\n        },\n        __self: this\n      }, \"Solo archivos tipo .PDF, .CSV, .XLS, .XLSX o .TSV\")))), React.createElement(\"footer\", {\n        className: classNames('accounting-period-card__footer', {\n          'accounting-period-card__footer--margin-top-less': uploadStatus === 'no_movements' || uploadStatus === 'synchronized' || uploadStatus === 'sync_no_movements'\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, showDownloadButton && React.createElement(\"a\", {\n        href: main ? url : '',\n        className: classNames('encontaButton link link--full-width is-paddingless flex-center', {\n          'encontaButton--hide': uploadStatusComplement === 'filled' && uploadStatus === 'uploaded'\n        }),\n        download: true,\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"mdi mdi-download\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423\n        },\n        __self: this\n      }), \"Descargar\"), this.renderSendButtons())), React.createElement(Modal, {\n        isActive: isAlertVisible,\n        toggleModal: this.toggleAlert,\n        onSubmit: function onSubmit() {\n          toggleNoMovements(index);\n\n          _this2.toggleAlert();\n        },\n        title: \"Movimientos \".concat(displayMonth),\n        primaryButton: \"Confirmar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440\n        },\n        __self: this\n      }, \"Confirma que NO realizaste movimientos durante \".concat(displayMonth))));\n    }\n  }]);\n\n  return AssignmentCard;\n}(PureComponent);\n\nexport { AssignmentCard as default };","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/accountingPeriods/uploadStatements/AssignmentCard.js"],"names":["React","PureComponent","Fragment","moment","classNames","DropZoneFile","Modal","Button","IconButton","REASONS","modified_document","different_period","different_bank","incorrect_format","incomplete_information","password_required","other","Status","status","uploadStatus","AssignmentCard","state","isAlertVisible","toggleAlert","setState","renderSendButtons","props","uploadStatement","main","complement","index","condition","upload_status","approved","uploadStatusComplement","includes","isCheckVisible","id","onDropFile","toggleNoMovements","account","payment_account","month","originalFileName","original_filename","originalFileNameExtra","original_filename_extra","onDropExtraFile","deleteExtraZone","addedFirstFile","addedSecondFile","replaceFile","replaceExtraFile","url","bank_statement","approvedComplement","bankStatementComplement","filename","bankStatement","showDownloadButton","filesAccepted","noMovements","displayMonth","format","isVisibleCheckbox","showCorrectStatuses","buttonReplaceFirstFile","e","target","files","buttonDeleteAndReplaceExtra","alias","toUpperCase","bank_name","toLowerCase","rejection_reason","customer_service_comment","notApproved","sent","uploaded"],"mappings":"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","sourcesContent":["import React, { PureComponent, Fragment } from 'react'\nimport moment from 'moment'\nimport classNames from 'classnames'\n// Components\nimport DropZoneFile from 'shared/credentials/components/DropzoneFile'\nimport Modal from 'shared/modal'\nimport Button from 'shared/button'\nimport IconButton from 'shared/iconButton'\n\nconst REASONS = {\n  modified_document: 'Documento modificado',\n  different_period: 'Pertenece a un periodo diferente',\n  different_bank: 'Pertenece a un banco diferente',\n  incorrect_format: 'El formato del archivo es diferente',\n  incomplete_information: 'Información incompleta',\n  password_required: 'Necesita contraseña',\n  other: 'Otro'\n}\n\nconst Status = ({ status, uploadStatus }) => {\n  switch (status) {\n    case true:\n      return (\n        <Fragment>\n          <p className='accounting-period-card__content__status-message has-text-success'>\n            <i className='mdi mdi-check icon-margin' />\n            Aprobado\n          </p>\n          {uploadStatus === 'no_movements' && (\n            <p className='accounting-period-card__content__no-movements'>\n              Cuenta sin movimientos.\n            </p>\n          )}\n          {uploadStatus === 'synchronized' && (\n            <p className='accounting-period-card__content__no-movements'>\n              Sincronización exitosa\n            </p>\n          )}\n          {uploadStatus === 'sync_no_movements' && (\n            <p className='accounting-period-card__content__no-movements'>\n              Sincronización sin movimientos\n            </p>\n          )}\n        </Fragment>\n      )\n    case false:\n      return (\n        <p className='accounting-period-card__content__status-message has-text-danger'>\n          <i className='mdi mdi-close icon-margin' />\n          Rechazado\n        </p>\n      )\n    default:\n      return (\n        <p className='accounting-period-card__content__status-message has-text-info'>\n          <i className='mdi mdi-clock icon-margin' />\n          En espera de aprobación\n        </p>\n      )\n  }\n}\n\n/**\n * @typedef {(index: number) => void} Toggle\n * @typedef {(index: number, files: File[]) => any} DropFiles\n * @typedef {import('api').Assignment} Assignment\n * @typedef {{index:number, onDropFile: DropFiles, toggleNoMovements: Toggle, uploadStatement: uploadStatement, onDropExtraFile: DropFiles}} Props\n * @extends {PureComponent<Assignment & Props, {isAlertVisible: boolean}>}\n */\nexport default class AssignmentCard extends PureComponent {\n  state = {\n    isAlertVisible: false\n  }\n\n  componentDidMount () {\n    const { upload_status: uploadStatus, approved } = this.props\n    if (uploadStatus === null || approved === null) {\n      this.setState({ isCheckVisible: true })\n    }\n  }\n\n  toggleAlert = () => {\n    this.setState(({ isAlertVisible }) => ({\n      isAlertVisible: !isAlertVisible\n    }))\n  }\n\n  renderSendButtons = () => {\n    const { uploadStatement, main, complement, index } = this.props\n    const condition = ['filled', 'zone_deleted']\n    const uploadStatus = main === null ? '' : main.upload_status\n    const approved = main === null ? '' : main.approved\n    const uploadStatusComplement =\n      complement === null ? '' : complement.upload_status\n\n    if (\n      (condition.includes(uploadStatus) && approved === null) ||\n      uploadStatusComplement === 'filled'\n    ) {\n      return (\n        <Button\n          className={classNames(\n            `encontaButton \n              link \n              link--full-width \n              is-paddingless flex-center`,\n            {\n              'link link--pink':\n                uploadStatus === 'filled' || uploadStatusComplement === 'filled'\n            }\n          )}\n          icon='send'\n          onClick={() => uploadStatement(index)}\n        >\n          Enviar\n        </Button>\n      )\n    }\n    if (\n      (uploadStatus === null && approved === null) ||\n      (!complement && !main)\n    ) {\n      return (\n        <Button\n          className={`encontaButton \n            link \n            link--full-width \n            is-paddingless \n            flex-center`}\n          icon='send'\n          disabled={uploadStatus !== 'filled'}\n          onClick={() => uploadStatement(index)}\n        >\n          Enviar\n        </Button>\n      )\n    }\n  }\n\n  render () {\n    const {\n      id,\n      index,\n      onDropFile,\n      toggleNoMovements,\n      payment_account: account,\n      month,\n      original_filename: originalFileName,\n      original_filename_extra: originalFileNameExtra,\n      onDropExtraFile,\n      deleteExtraZone,\n      addedFirstFile,\n      addedSecondFile,\n      replaceFile,\n      replaceExtraFile,\n      main,\n      complement\n    } = this.props\n\n    const uploadStatus = main === null ? '' : main.upload_status\n    const approved = main === null ? '' : main.approved\n    const url =\n      !main || main.bank_statement === null ? '' : main.bank_statement.url\n    const uploadStatusComplement =\n      complement === null ? '' : complement.upload_status\n    const approvedComplement = complement === null ? '' : complement.approved\n    const bankStatementComplement =\n      !complement || complement.bank_statement === null\n        ? ''\n        : complement.bank_statement.filename\n    const bankStatement =\n      !main || main.bank_statement === null ? '' : main.bank_statement.filename\n    const showDownloadButton =\n      uploadStatus === 'uploaded' &&\n      (approved === null || approved === true || !approved)\n    const filesAccepted =\n      '.csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel, .pdf, .tsv, .tab, .xls, .xlsx'\n    const { isAlertVisible } = this.state\n    const noMovements = uploadStatus === 'no_movements'\n    const displayMonth = moment({ month: month - 1 }).format('MMMM')\n    const isVisibleCheckbox =\n      (uploadStatus === null && approved === null) ||\n      (approved === false && uploadStatus === 'uploaded') ||\n      !main\n    const showCorrectStatuses =\n      (uploadStatus === 'uploaded' && approved === false) ||\n      (uploadStatus === 'uploaded' && approved === null) ||\n      (approved && uploadStatus === 'no_movements') ||\n      (approved && uploadStatus === 'uploaded') ||\n      (approved && uploadStatus === 'synchronized') ||\n      (approved && uploadStatus === 'sync_no_movements')\n\n    const buttonReplaceFirstFile = (\n      <Fragment>\n        <label\n          for='files'\n          className='encontaButton link is-paddingless dropzone-area--extra__icon'\n        >\n          <i className='mdi mdi-file-restore' />\n          Reemplazar\n        </label>\n        <input\n          id='files'\n          className='hide-element'\n          type='file'\n          accept={filesAccepted}\n          onChange={e => replaceFile(index, e.target.files[0])}\n        />\n      </Fragment>\n    )\n\n    const buttonDeleteAndReplaceExtra = (\n      <Fragment>\n        <label\n          for='extra_files'\n          className='encontaButton link is-paddingless dropzone-area--margin-left dropzone-area--margin-top dropzone-area--extra__icon'\n        >\n          <i className='mdi mdi-file-restore' />\n          Reemplazar\n        </label>\n        <input\n          id='extra_files'\n          className='hide-element'\n          type='file'\n          accept={filesAccepted}\n          onChange={e => replaceExtraFile(index, e.target.files[0])}\n        />\n        <Button\n          className='encontaButton link is-paddingless'\n          icon='delete'\n          onClick={() => deleteExtraZone(index)}\n        >\n          Eliminar\n        </Button>\n      </Fragment>\n    )\n    return (\n      <div className='column is-4 accounting-period-card'>\n        <div className='box is-fullheight is-marginless box--justify-start'>\n          <header className='accounting-period-card__header'>\n            <p className='accounting-period-card__header__alias'>\n              {account.alias.toUpperCase()}\n            </p>\n            <p className='is-capitalized  accounting-period-card__header__bank-name content'>\n              {account.bank_name.toLowerCase()}\n            </p>\n          </header>\n          <div className='accounting-period-card__content'>\n            {showCorrectStatuses ? (\n              <Status status={approved} uploadStatus={uploadStatus} />\n            ) : (\n              <p className='accounting-period-card__content__status-message'>\n                <i className='mdi mdi-clock-outline icon-margin' />\n                En espera\n              </p>\n            )}\n\n            {isVisibleCheckbox && (\n              <div className='accounting-period-card__no-movements-container'>\n                <input\n                  type='checkbox'\n                  name='no_movements'\n                  id={`no_movements_${id}`}\n                  onChange={this.toggleAlert}\n                  checked={uploadStatus === 'no_movements'}\n                />\n                <label\n                  htmlFor={`no_movements_${id}`}\n                  className='labelNoMovements'\n                >\n                  {`No realicé movimientos durante ${displayMonth}`}\n                </label>\n              </div>\n            )}\n            {approved === false && (\n              <Fragment>\n                <p className='info-rejected'>\n                  <span className='info-rejected info-rejected--bold is-uppercase'>\n                    Razón:{' '}\n                  </span>\n                  {REASONS[main.rejection_reason]}\n                  <IconButton\n                    icon='comment-question-outline'\n                    tooltip={main.customer_service_comment}\n                    tooltipStyle='rejected'\n                    iconOnly\n                    className='icon-button--margin-left-8px'\n                  />\n                </p>\n              </Fragment>\n            )}\n            {!noMovements && (\n              <Fragment>\n                {uploadStatus !== 'no_movements' &&\n                  uploadStatus !== 'synchronized' &&\n                  uploadStatus !== 'sync_no_movements' && (\n                  <DropZoneFile\n                    className={classNames('is-fullwidth is-marginless', {\n                      notApproved:\n                          uploadStatus === 'uploaded' && approved === false,\n                      approved: approved,\n                      sent: uploadStatus === 'uploaded' && approved === null,\n                      uploaded: uploadStatus === 'filled'\n                    })}\n                    accept={filesAccepted}\n                    onDrop={files => onDropFile(index, files)}\n                    icon={\n                      approved === false\n                        ? 'mdi-file-remove'\n                        : uploadStatus === 'uploaded' && !approved\n                          ? 'mdi-file-eye'\n                          : 'mdi-file-upload'\n                    }\n                    file={\n                      main !== null && !addedFirstFile\n                        ? bankStatement\n                        : originalFileName\n                    }\n                    disabled={approved || uploadStatus === 'filled'}\n                    message={\n                      !approved && approved != null && 'Reemplazar archivo'\n                    }\n                    deleteButton={\n                      (addedFirstFile || addedSecondFile) &&\n                        buttonReplaceFirstFile\n                    }\n                  />\n                )}\n                {approvedComplement === false && (\n                  <Fragment>\n                    <p className='info-rejected info-rejected--margin'>\n                      <span className='info-rejected info-rejected--bold is-uppercase'>\n                        Razón:{' '}\n                      </span>\n                      {REASONS[complement.rejection_reason]}\n                      <IconButton\n                        icon='comment-question-outline'\n                        tooltip={complement.customer_service_comment}\n                        tooltipStyle='rejected'\n                        iconOnly\n                        className='icon-button--margin-left-8px'\n                      />\n                    </p>\n                  </Fragment>\n                )}\n                {((addedFirstFile === true && addedSecondFile === false) ||\n                  uploadStatusComplement) && (\n                  <DropZoneFile\n                    className={classNames('is-fullwidth', {\n                      'notApproved is-marginless':\n                        uploadStatusComplement === 'uploaded' &&\n                        approvedComplement === false,\n                      approved: approvedComplement,\n                      sent:\n                        uploadStatusComplement === 'uploaded' &&\n                        approvedComplement === null,\n                      uploaded: uploadStatusComplement === 'filled'\n                    })}\n                    accept={filesAccepted}\n                    onDrop={files => onDropExtraFile(index, files)}\n                    icon={\n                      approvedComplement === false\n                        ? 'mdi-file-remove'\n                        : uploadStatusComplement === 'uploaded' &&\n                          !approvedComplement\n                          ? 'mdi-file-eye'\n                          : 'mdi-file-upload'\n                    }\n                    file={\n                      complement\n                        ? bankStatementComplement\n                        : originalFileNameExtra\n                    }\n                    message={\n                      !approvedComplement &&\n                      approvedComplement != null &&\n                      'Reemplazar archivo'\n                    }\n                    addFileMessage={\n                      addedFirstFile && 'Agregar otro archivo (Opcional)'\n                    }\n                    disabled={\n                      approvedComplement === true ||\n                      uploadStatusComplement === 'filled' ||\n                      (uploadStatus === 'filled' &&\n                        uploadStatusComplement === 'uploaded')\n                    }\n                    deleteButton={addedFirstFile && buttonDeleteAndReplaceExtra}\n                  />\n                )}\n                <Fragment>\n                  {approved !== true && (\n                    <p className='caption caption-fixed-bottom'>\n                      Solo archivos tipo .PDF, .CSV, .XLS, .XLSX o .TSV\n                    </p>\n                  )}\n                </Fragment>\n              </Fragment>\n            )}\n          </div>\n          <footer\n            className={classNames('accounting-period-card__footer', {\n              'accounting-period-card__footer--margin-top-less':\n                uploadStatus === 'no_movements' ||\n                uploadStatus === 'synchronized' ||\n                uploadStatus === 'sync_no_movements'\n            })}\n          >\n            {showDownloadButton && (\n              <a\n                href={main ? url : ''}\n                className={classNames(\n                  'encontaButton link link--full-width is-paddingless flex-center',\n                  {\n                    'encontaButton--hide':\n                      uploadStatusComplement === 'filled' &&\n                      uploadStatus === 'uploaded'\n                  }\n                )}\n                download\n                target='_blank'\n              >\n                <i className='mdi mdi-download' />\n                Descargar\n              </a>\n            )}\n            {this.renderSendButtons()}\n          </footer>\n        </div>\n        <Modal\n          isActive={isAlertVisible}\n          toggleModal={this.toggleAlert}\n          onSubmit={() => {\n            toggleNoMovements(index)\n            this.toggleAlert()\n          }}\n          title={`Movimientos ${displayMonth}`}\n          primaryButton='Confirmar'\n        >\n          <p>\n            {`Confirma que NO realizaste movimientos durante ${displayMonth}`}\n          </p>\n        </Modal>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}