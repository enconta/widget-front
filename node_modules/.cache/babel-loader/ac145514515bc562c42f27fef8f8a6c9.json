{"ast":null,"code":"import _toConsumableArray from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/usuario-rtd/Desktop/widget-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/downloads/index.js\";\n// Libraries\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport accounting from 'accounting';\nimport classNames from 'classnames'; // Components\n\nimport NotificationsActions from 'actions/notifications';\nimport DownloadsActions from 'actions/downloads';\nimport DownloadsStore from 'stores/downloads';\nimport TextField from 'shared/textField';\nimport SelectField from 'shared/selectField';\nimport Card from 'shared/card';\nimport IconButton from 'shared/iconButton';\nimport Paginator from 'shared/paginator';\nimport Datepicker from 'shared/datepicker';\nimport Alert from 'shared/alert';\nimport TableFilter from 'shared/tableFilter';\nimport { prettyDate, resetScroll } from 'utils';\nimport { ALL_ITEMS } from 'shared/catalogs'; // Constants\n\nvar EXCEL_FILE_TYPE = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\nvar ZIP_FILE_TYPE = 'application/zip';\nvar FILE_TYPES = [];\nFILE_TYPES[EXCEL_FILE_TYPE] = 'Excel';\nFILE_TYPES[ZIP_FILE_TYPE] = 'Zip';\nvar FILE_ICONS = [];\nFILE_ICONS[EXCEL_FILE_TYPE] = 'mdi mdi-file-excel';\nFILE_ICONS[ZIP_FILE_TYPE] = 'mdi mdi-folder-outline';\nvar FILE_TYPE_OPTIONS = [{\n  id: 'xlsx',\n  label: 'Excel'\n}, {\n  id: 'pdf',\n  label: 'PDF'\n}, {\n  id: 'zip',\n  label: 'Zip'\n}, {\n  id: 'txt',\n  label: 'Texto plano'\n}];\n\nfunction getCurrentState() {\n  var filesList = DownloadsStore.getFilesList();\n  var totalPages = DownloadsStore.getTotalPages();\n  var totalItems = DownloadsStore.getTotalItems();\n  return {\n    filesList: filesList,\n    totalPages: totalPages,\n    totalItems: totalItems\n  };\n}\n\nvar Downloads =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Downloads, _Component);\n\n  function Downloads() {\n    var _this;\n\n    _classCallCheck(this, Downloads);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Downloads).call(this));\n    _this.data = {\n      filters: {\n        file_name: '',\n        file_type: '',\n        startDate: moment().subtract(1, 'M'),\n        endDate: moment()\n      },\n      datesOpen: false,\n      alertOpen: false\n    };\n    _this.state = Object.assign({}, _this.data, getCurrentState());\n    _this._onChange = _this._onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Downloads, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // Adds listener, when the Store changes, trigger the _onChange callback func\n      DownloadsStore.addChangeListener(this._onChange);\n      this.loadData();\n      resetScroll();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.location.search !== prevProps.location.search) {\n        this.loadData(this.props);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // Removes the listener to avoid memory leaks\n      DownloadsStore.removeChangeListener(this._onChange);\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange() {\n      // When the store changes, the state goes to it and pulls the updated data\n      // then sets it so the component rerenders\n      var state = getCurrentState();\n      this.setState(state);\n    }\n  }, {\n    key: \"loadData\",\n    value: function loadData() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      var params = Object.assign({}, props.location.query);\n      DownloadsActions.getFilesList(params);\n      this.setState(function (prevState) {\n        return {\n          filters: Object.assign({}, prevState.filters, params)\n        };\n      });\n    }\n  }, {\n    key: \"deleteFile\",\n    value: function deleteFile(id) {\n      var _this2 = this;\n\n      DownloadsActions.deleteFile(this.state.itemToDelete).then(function () {\n        _this2.loadData();\n\n        NotificationsActions.success('El archivo ha sido borrado con éxito');\n\n        _this2.setState({\n          itemToDelete: ''\n        });\n      }).catch(function (err) {\n        return NotificationsActions.error(err);\n      });\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(field, e) {\n      var filter = _defineProperty({}, field, e.target.value);\n\n      this.setState(function (prevState) {\n        return {\n          filters: Object.assign({}, prevState.filters, filter)\n        };\n      });\n    }\n  }, {\n    key: \"onChangeDate\",\n    value: function onChangeDate(field, e) {\n      var filter = _defineProperty({}, field, e);\n\n      this.setState(function (prevState) {\n        return {\n          filters: Object.assign({}, prevState.filters, filter)\n        };\n      });\n    }\n  }, {\n    key: \"toggleDatesOpen\",\n    value: function toggleDatesOpen() {\n      this.setState(function (prevState) {\n        return {\n          datesOpen: !prevState.datesOpen\n        };\n      });\n    }\n  }, {\n    key: \"toggleAlert\",\n    value: function toggleAlert() {\n      var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      this.setState(function (prevState) {\n        return {\n          alertOpen: !prevState.alertOpen,\n          itemToDelete: id\n        };\n      });\n    }\n  }, {\n    key: \"prepareFilters\",\n    value: function prepareFilters(filters) {\n      var datesOpen = this.state.datesOpen;\n      var _filters = {\n        file_name: filters.file_name,\n        file_type: filters.file_type\n      };\n\n      if (datesOpen) {\n        Object.assign(_filters, {\n          'date_range[start]': moment(filters.startDate).format('YYYY-MM-DD'),\n          'date_range[end]': moment(filters.endDate).format('YYYY-MM-DD')\n        });\n      }\n\n      return _filters;\n    } // Reset all filters and data to default\n\n  }, {\n    key: \"clearFilters\",\n    value: function clearFilters() {\n      this.setState({\n        filters: this.data.filters,\n        datesOpen: false\n      });\n    } // Format file size to a human friendly number\n\n  }, {\n    key: \"formatBytes\",\n    value: function formatBytes(bytes) {\n      var decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n      if (bytes === 0) return '0 Bytes';\n      var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n      var i = Math.floor(Math.log(bytes) / Math.log(1000));\n      return \"\".concat(parseFloat((bytes / Math.pow(1000, i)).toFixed(decimals)), \" \").concat(sizes[i]);\n    }\n  }, {\n    key: \"renderFilters\",\n    value: function renderFilters() {\n      var _this$state = this.state,\n          datesOpen = _this$state.datesOpen,\n          filters = _this$state.filters;\n      return React.createElement(TableFilter, {\n        baseUrl: \"/descargas\",\n        filters: filters,\n        prepareFilters: this.prepareFilters.bind(this),\n        onClearFilters: this.clearFilters.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        placeholder: \"Nombre\",\n        value: filters.file_name,\n        onChange: this.onChange.bind(this, 'file_name'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(SelectField, {\n        options: [].concat(_toConsumableArray(ALL_ITEMS), FILE_TYPE_OPTIONS),\n        value: filters.file_type,\n        placeholder: \"Tipo de archivo\",\n        onChange: this.onChange.bind(this, 'file_type'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"flex-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: this.toggleDatesOpen.bind(this),\n        style: {\n          cursor: 'pointer'\n        },\n        className: \"subtitle-body flex-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Periodo\", React.createElement(\"i\", {\n        className: classNames('mdi', {\n          'mdi-plus': !datesOpen,\n          'mdi-minus': datesOpen\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: classNames({\n          'is-hidden': !datesOpen\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(Datepicker, {\n        label: \"Del\",\n        placeholder: \"Fecha inicio\",\n        value: filters.startDate,\n        onChange: this.onChangeDate.bind(this, 'startDate'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(Datepicker, {\n        label: \"Al\",\n        placeholder: \"Fecha fin\",\n        value: filters.endDate,\n        onChange: this.onChangeDate.bind(this, 'endDate'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }))));\n    } // Render downloads table\n\n  }, {\n    key: \"renderTable\",\n    value: function renderTable() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          filesList = _this$state2.filesList,\n          totalPages = _this$state2.totalPages;\n      var renderTable = React.createElement(\"div\", {\n        className: \"block unselectable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"No tienes archivos generados\"));\n\n      if (filesList.length > 0) {\n        var downloads = filesList.map(function (file) {\n          var size = _this3.formatBytes(file.fileFileSize, 1);\n\n          return React.createElement(\"tr\", {\n            key: file.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 238\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            className: \"flexCell align-left\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 239\n            },\n            __self: this\n          }, file.fileFileName), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 240\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            className: FILE_ICONS[file.fileContentType],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 241\n            },\n            __self: this\n          }), ' ', FILE_TYPES[file.fileContentType]), React.createElement(\"td\", {\n            className: \"align-left\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 244\n            },\n            __self: this\n          }, size), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 245\n            },\n            __self: this\n          }, prettyDate(file.createdAt, 'YYYY-MM-DD', true, false, '/')), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 248\n            },\n            __self: this\n          }, React.createElement(\"a\", {\n            style: {\n              marginRight: '14px'\n            },\n            href: file.url,\n            download: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 249\n            },\n            __self: this\n          }, React.createElement(IconButton, {\n            icon: \"download\",\n            tooltip: \"Descargar\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 250\n            },\n            __self: this\n          })), React.createElement(IconButton, {\n            icon: \"delete\",\n            onClick: _this3.toggleAlert.bind(_this3, file.id),\n            tooltip: \"Borrar\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 252\n            },\n            __self: this\n          })));\n        });\n        renderTable = React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          className: \"table fixedTable\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          className: \"align-left\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        }, \"Nombre del archivo\"), React.createElement(\"th\", {\n          style: {\n            width: '10rem'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268\n          },\n          __self: this\n        }, \"Tipo de archivo\"), React.createElement(\"th\", {\n          style: {\n            width: '5rem'\n          },\n          className: \"align-left\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269\n          },\n          __self: this\n        }, \"Tama\\xF1o\"), React.createElement(\"th\", {\n          style: {\n            width: '8rem'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }, \"Creado\"), React.createElement(\"th\", {\n          style: {\n            width: '8rem'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273\n          },\n          __self: this\n        }))), React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276\n          },\n          __self: this\n        }, downloads)), React.createElement(Paginator, {\n          totalPages: totalPages,\n          location: this.props.location,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }));\n      }\n\n      return renderTable;\n    } // Main render\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state3 = this.state,\n          totalItems = _this$state3.totalItems,\n          alertOpen = _this$state3.alertOpen;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"headline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, \"Descargas\"), React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, this.renderFilters(), React.createElement(\"div\", {\n        className: \"caption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, accounting.formatNumber(totalItems), \" archivos visibles\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }), this.renderTable()), React.createElement(Alert, {\n        isActive: alertOpen,\n        toggleAlert: this.toggleAlert.bind(this),\n        onSubmit: this.deleteFile.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Downloads;\n}(Component);\n\nDownloads.propTypes = {\n  location: PropTypes.object\n};\nexport default Downloads;","map":{"version":3,"sources":["/Users/usuario-rtd/Desktop/widget-front/src/components/app/views/downloads/index.js"],"names":["React","Component","PropTypes","moment","accounting","classNames","NotificationsActions","DownloadsActions","DownloadsStore","TextField","SelectField","Card","IconButton","Paginator","Datepicker","Alert","TableFilter","prettyDate","resetScroll","ALL_ITEMS","EXCEL_FILE_TYPE","ZIP_FILE_TYPE","FILE_TYPES","FILE_ICONS","FILE_TYPE_OPTIONS","id","label","getCurrentState","filesList","getFilesList","totalPages","getTotalPages","totalItems","getTotalItems","Downloads","data","filters","file_name","file_type","startDate","subtract","endDate","datesOpen","alertOpen","state","Object","assign","_onChange","bind","addChangeListener","loadData","prevProps","props","location","search","removeChangeListener","setState","params","query","prevState","deleteFile","itemToDelete","then","success","catch","err","error","field","e","filter","target","value","_filters","format","bytes","decimals","sizes","i","Math","floor","log","parseFloat","pow","toFixed","prepareFilters","clearFilters","onChange","toggleDatesOpen","cursor","onChangeDate","renderTable","length","downloads","map","file","size","formatBytes","fileFileSize","fileFileName","fileContentType","createdAt","marginRight","url","toggleAlert","width","renderFilters","formatNumber","propTypes","object"],"mappings":"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","sourcesContent":["// Libraries\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport moment from 'moment'\nimport accounting from 'accounting'\nimport classNames from 'classnames'\n\n// Components\nimport NotificationsActions from 'actions/notifications'\nimport DownloadsActions from 'actions/downloads'\nimport DownloadsStore from 'stores/downloads'\nimport TextField from 'shared/textField'\nimport SelectField from 'shared/selectField'\nimport Card from 'shared/card'\nimport IconButton from 'shared/iconButton'\nimport Paginator from 'shared/paginator'\nimport Datepicker from 'shared/datepicker'\nimport Alert from 'shared/alert'\nimport TableFilter from 'shared/tableFilter'\nimport { prettyDate, resetScroll } from 'utils'\nimport { ALL_ITEMS } from 'shared/catalogs'\n// Constants\nconst EXCEL_FILE_TYPE =\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\nconst ZIP_FILE_TYPE = 'application/zip'\n\nconst FILE_TYPES = []\nFILE_TYPES[EXCEL_FILE_TYPE] = 'Excel'\nFILE_TYPES[ZIP_FILE_TYPE] = 'Zip'\n\nconst FILE_ICONS = []\nFILE_ICONS[EXCEL_FILE_TYPE] = 'mdi mdi-file-excel'\nFILE_ICONS[ZIP_FILE_TYPE] = 'mdi mdi-folder-outline'\n\nconst FILE_TYPE_OPTIONS = [\n  { id: 'xlsx', label: 'Excel' },\n  { id: 'pdf', label: 'PDF' },\n  { id: 'zip', label: 'Zip' },\n  { id: 'txt', label: 'Texto plano' }\n]\n\nfunction getCurrentState () {\n  const filesList = DownloadsStore.getFilesList()\n  const totalPages = DownloadsStore.getTotalPages()\n  const totalItems = DownloadsStore.getTotalItems()\n  return {\n    filesList,\n    totalPages,\n    totalItems\n  }\n}\n\nclass Downloads extends Component {\n  constructor () {\n    super()\n    this.data = {\n      filters: {\n        file_name: '',\n        file_type: '',\n        startDate: moment().subtract(1, 'M'),\n        endDate: moment()\n      },\n      datesOpen: false,\n      alertOpen: false\n    }\n    this.state = Object.assign({}, this.data, getCurrentState())\n    this._onChange = this._onChange.bind(this)\n  }\n\n  componentDidMount () {\n    // Adds listener, when the Store changes, trigger the _onChange callback func\n    DownloadsStore.addChangeListener(this._onChange)\n    this.loadData()\n    resetScroll()\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.props.location.search !== prevProps.location.search) {\n      this.loadData(this.props)\n    }\n  }\n\n  componentWillUnmount () {\n    // Removes the listener to avoid memory leaks\n    DownloadsStore.removeChangeListener(this._onChange)\n  }\n\n  _onChange () {\n    // When the store changes, the state goes to it and pulls the updated data\n    // then sets it so the component rerenders\n    const state = getCurrentState()\n    this.setState(state)\n  }\n\n  loadData (props = this.props) {\n    const params = Object.assign({}, props.location.query)\n    DownloadsActions.getFilesList(params)\n    this.setState(prevState => ({\n      filters: Object.assign({}, prevState.filters, params)\n    }))\n  }\n\n  deleteFile (id) {\n    DownloadsActions.deleteFile(this.state.itemToDelete)\n      .then(() => {\n        this.loadData()\n        NotificationsActions.success('El archivo ha sido borrado con éxito')\n        this.setState({ itemToDelete: '' })\n      })\n      .catch(err => NotificationsActions.error(err))\n  }\n\n  onChange (field, e) {\n    const filter = { [field]: e.target.value }\n    this.setState(prevState => ({\n      filters: Object.assign({}, prevState.filters, filter)\n    }))\n  }\n\n  onChangeDate (field, e) {\n    const filter = { [field]: e }\n    this.setState(prevState => ({\n      filters: Object.assign({}, prevState.filters, filter)\n    }))\n  }\n\n  toggleDatesOpen () {\n    this.setState(prevState => ({\n      datesOpen: !prevState.datesOpen\n    }))\n  }\n\n  toggleAlert (id = '') {\n    this.setState(prevState => ({\n      alertOpen: !prevState.alertOpen,\n      itemToDelete: id\n    }))\n  }\n\n  prepareFilters (filters) {\n    const { datesOpen } = this.state\n    const _filters = {\n      file_name: filters.file_name,\n      file_type: filters.file_type\n    }\n    if (datesOpen) {\n      Object.assign(_filters, {\n        'date_range[start]': moment(filters.startDate).format('YYYY-MM-DD'),\n        'date_range[end]': moment(filters.endDate).format('YYYY-MM-DD')\n      })\n    }\n    return _filters\n  }\n\n  // Reset all filters and data to default\n  clearFilters () {\n    this.setState({\n      filters: this.data.filters,\n      datesOpen: false\n    })\n  }\n  // Format file size to a human friendly number\n  formatBytes (bytes, decimals = 2) {\n    if (bytes === 0) return '0 Bytes'\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n    const i = Math.floor(Math.log(bytes) / Math.log(1000))\n    return `${parseFloat((bytes / Math.pow(1000, i)).toFixed(decimals))} ${\n      sizes[i]\n    }`\n  }\n\n  renderFilters () {\n    const { datesOpen, filters } = this.state\n    return (\n      <TableFilter\n        baseUrl='/descargas'\n        filters={filters}\n        prepareFilters={this.prepareFilters.bind(this)}\n        onClearFilters={this.clearFilters.bind(this)}\n      >\n        <TextField\n          placeholder='Nombre'\n          value={filters.file_name}\n          onChange={this.onChange.bind(this, 'file_name')}\n        />\n        <SelectField\n          options={[...ALL_ITEMS, ...FILE_TYPE_OPTIONS]}\n          value={filters.file_type}\n          placeholder='Tipo de archivo'\n          onChange={this.onChange.bind(this, 'file_type')}\n        />\n        <div className='flex-column'>\n          <div\n            onClick={this.toggleDatesOpen.bind(this)}\n            style={{ cursor: 'pointer' }}\n            className='subtitle-body flex-between'\n          >\n            Periodo\n            <i\n              className={classNames('mdi', {\n                'mdi-plus': !datesOpen,\n                'mdi-minus': datesOpen\n              })}\n            />\n          </div>\n          <div className={classNames({ 'is-hidden': !datesOpen })}>\n            <Datepicker\n              label='Del'\n              placeholder='Fecha inicio'\n              value={filters.startDate}\n              onChange={this.onChangeDate.bind(this, 'startDate')}\n            />\n            <Datepicker\n              label='Al'\n              placeholder='Fecha fin'\n              value={filters.endDate}\n              onChange={this.onChangeDate.bind(this, 'endDate')}\n            />\n          </div>\n        </div>\n      </TableFilter>\n    )\n  }\n\n  // Render downloads table\n  renderTable () {\n    const { filesList, totalPages } = this.state\n    let renderTable = (\n      <div className='block unselectable'>\n        <p>No tienes archivos generados</p>\n      </div>\n    )\n\n    if (filesList.length > 0) {\n      const downloads = filesList.map(file => {\n        const size = this.formatBytes(file.fileFileSize, 1)\n        return (\n          <tr key={file.id}>\n            <td className='flexCell align-left'>{file.fileFileName}</td>\n            <td>\n              <i className={FILE_ICONS[file.fileContentType]} />{' '}\n              {FILE_TYPES[file.fileContentType]}\n            </td>\n            <td className='align-left'>{size}</td>\n            <td>\n              {prettyDate(file.createdAt, 'YYYY-MM-DD', true, false, '/')}\n            </td>\n            <td>\n              <a style={{ marginRight: '14px' }} href={file.url} download>\n                <IconButton icon='download' tooltip='Descargar' />\n              </a>\n              <IconButton\n                icon='delete'\n                onClick={this.toggleAlert.bind(this, file.id)}\n                tooltip='Borrar'\n              />\n            </td>\n          </tr>\n        )\n      })\n\n      renderTable = (\n        <div>\n          <table className='table fixedTable'>\n            <thead>\n              <tr>\n                <th className='align-left'>Nombre del archivo</th>\n                <th style={{ width: '10rem' }}>Tipo de archivo</th>\n                <th style={{ width: '5rem' }} className='align-left'>\n                  Tamaño\n                </th>\n                <th style={{ width: '8rem' }}>Creado</th>\n                <th style={{ width: '8rem' }} />\n              </tr>\n            </thead>\n            <tbody>{downloads}</tbody>\n          </table>\n          <Paginator totalPages={totalPages} location={this.props.location} />\n        </div>\n      )\n    }\n\n    return renderTable\n  }\n\n  // Main render\n  render () {\n    const { totalItems, alertOpen } = this.state\n    return (\n      <div>\n        <h1 className='headline'>Descargas</h1>\n        <Card>\n          {this.renderFilters()}\n          <div className='caption'>\n            {accounting.formatNumber(totalItems)} archivos visibles\n          </div>\n          <br />\n          {this.renderTable()}\n        </Card>\n        <Alert\n          isActive={alertOpen}\n          toggleAlert={this.toggleAlert.bind(this)}\n          onSubmit={this.deleteFile.bind(this)}\n        />\n      </div>\n    )\n  }\n}\n\nDownloads.propTypes = {\n  location: PropTypes.object\n}\n\nexport default Downloads\n"]},"metadata":{},"sourceType":"module"}